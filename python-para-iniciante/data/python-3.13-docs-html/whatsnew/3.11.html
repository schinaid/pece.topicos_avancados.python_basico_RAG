<!DOCTYPE html>

<html lang="pt-BR" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="O que há de novo no Python 3.11" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/3.11.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Editor, Pablo Galindo Salgado,. Este artigo explica os novos recursos no Python 3.11, em comparação com 3.10. Python 3.11 foi lançado em 24 de outubro de 2022. Veja changelog para uma lista complet..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://docs.python.org/3.13/pt-br/_images/social_previews/summary_whatsnew_3.11_f24120c2.png" />
<meta property="og:image:alt" content="Editor, Pablo Galindo Salgado,. Este artigo explica os novos recursos no Python 3.11, em comparação com 3.10. Python 3.11 foi lançado em 24 de outubro de 2022. Veja changelog para uma lista complet..." />
<meta name="description" content="Editor, Pablo Galindo Salgado,. Este artigo explica os novos recursos no Python 3.11, em comparação com 3.10. Python 3.11 foi lançado em 24 de outubro de 2022. Veja changelog para uma lista complet..." />
<meta name="twitter:card" content="summary_large_image" />

    <title>O que há de novo no Python 3.11 &#8212; Documentação Python 3.13.5</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=234b1a7c" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?v=5ff89526" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css?v=5349f25f" />
    
    <script src="../_static/documentation_options.js?v=62a4a58b"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=71a39b36"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Pesquisar dentro de Documentação Python 3.13.5"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre esses documentos" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="copyright" title="Direitos autorais" href="../copyright.html" />
    <link rel="next" title="O que há de novo no Python 3.10" href="3.10.html" />
    <link rel="prev" title="O que há de novo no Python 3.12" href="3.12.html" />
    
      
      <script defer data-domain="docs.python.org" src="https://analytics.python.org/js/script.outbound-links.js"></script>
      
      <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.11.html">
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg">
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 
            <script type="text/javascript" src="../_static/rtd_switcher.js"></script>
            <meta name="readthedocs-addons-api-version" content="1">

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu">
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Python logo">
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Busca rápida" aria-label="Busca rápida" type="search" name="q">
                <input type="submit" value="Ir">
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
    <ul>
<li><a class="reference internal" href="#">O que há de novo no Python 3.11</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumo – Destaques da versão</a></li>
<li><a class="reference internal" href="#new-features">Novas funcionalidades</a><ul>
<li><a class="reference internal" href="#pep-657-fine-grained-error-locations-in-tracebacks">PEP 657: Localizações de erros refinadas em tracebacks</a></li>
<li><a class="reference internal" href="#pep-654-exception-groups-and-except">PEP 654: Grupos de exceção e <code class="docutils literal notranslate"><span class="pre">except*</span></code></a></li>
<li><a class="reference internal" href="#pep-678-exceptions-can-be-enriched-with-notes">PEP 678: Exceções podem ser enriquecidas com notas</a></li>
<li><a class="reference internal" href="#windows-py-exe-launcher-improvements">Melhorias no inicializador <code class="docutils literal notranslate"><span class="pre">py.exe</span></code> do Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-features-related-to-type-hints">Novos recursos relacionados a dicas de tipo</a><ul>
<li><a class="reference internal" href="#pep-646-variadic-generics">PEP 646: Genéricos variádicos</a></li>
<li><a class="reference internal" href="#pep-655-marking-individual-typeddict-items-as-required-or-not-required">PEP 655: Marcando itens <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> individuais como obrigatórios ou não obrigatórios</a></li>
<li><a class="reference internal" href="#pep-673-self-type">PEP 673: Tipo <code class="docutils literal notranslate"><span class="pre">Self</span></code></a></li>
<li><a class="reference internal" href="#pep-675-arbitrary-literal-string-type">PEP 675: Tipo de string literal arbitrário</a></li>
<li><a class="reference internal" href="#pep-681-data-class-transforms">PEP 681: Transformações de classe de dados</a></li>
<li><a class="reference internal" href="#pep-563-may-not-be-the-future">PEP 563 pode não ser o futuro</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Outras mudanças na linguagem</a></li>
<li><a class="reference internal" href="#other-cpython-implementation-changes">Outras mudanças na implementação do CPython</a></li>
<li><a class="reference internal" href="#new-modules">Novos módulos</a></li>
<li><a class="reference internal" href="#improved-modules">Módulos melhorados</a><ul>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#contextlib">contextlib</a></li>
<li><a class="reference internal" href="#dataclasses">dataclasses</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#enum">enum</a></li>
<li><a class="reference internal" href="#fcntl">fcntl</a></li>
<li><a class="reference internal" href="#fractions">fractions</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#gzip">gzip</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#whatsnew311-idle">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#locale">locale</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#operator">operador</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#re">re</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#sqlite3">sqlite3</a></li>
<li><a class="reference internal" href="#string">string</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#sysconfig">sysconfig</a></li>
<li><a class="reference internal" href="#tempfile">tempfile</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#tkinter">tkinter</a></li>
<li><a class="reference internal" href="#traceback">traceback</a></li>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#warnings">avisos</a></li>
<li><a class="reference internal" href="#zipfile">zipfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Otimizações</a></li>
<li><a class="reference internal" href="#faster-cpython">CPython mais rápido</a><ul>
<li><a class="reference internal" href="#faster-startup">Inicialização mais rápida</a><ul>
<li><a class="reference internal" href="#frozen-imports-static-code-objects">Importações congeladas/objetos de código estático</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faster-runtime">Tempo de execução mais rápido</a><ul>
<li><a class="reference internal" href="#cheaper-lazy-python-frames">Quadros Python menos custosos e mais preguiçosos</a></li>
<li><a class="reference internal" href="#inlined-python-function-calls">Chamadas de função Python em linha</a></li>
<li><a class="reference internal" href="#pep-659-specializing-adaptive-interpreter">PEP 659: Interpretador adaptativo especializado</a></li>
</ul>
</li>
<li><a class="reference internal" href="#misc">Diversos</a></li>
<li><a class="reference internal" href="#faq">FAQ</a><ul>
<li><a class="reference internal" href="#how-should-i-write-my-code-to-utilize-these-speedups">Como devo escrever meu código para utilizar esses aceleradores?</a></li>
<li><a class="reference internal" href="#will-cpython-3-11-use-more-memory">O CPython 3.11 usará mais memória?</a></li>
<li><a class="reference internal" href="#i-don-t-see-any-speedups-in-my-workload-why">Não vejo nenhuma aceleração em minha carga de trabalho. Por que?</a></li>
<li><a class="reference internal" href="#is-there-a-jit-compiler">Existe um compilador JIT?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#about">Sobre</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Alterações de bytecode do CPython</a><ul>
<li><a class="reference internal" href="#new-opcodes">Novos opcodes</a></li>
<li><a class="reference internal" href="#replaced-opcodes">Opcodes substituídos</a></li>
<li><a class="reference internal" href="#changed-removed-opcodes">Opcodes alterados/removidos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deprecated">Descontinuados</a><ul>
<li><a class="reference internal" href="#language-builtins">Linguagem/Embutidos</a></li>
<li><a class="reference internal" href="#modules">Módulos</a></li>
<li><a class="reference internal" href="#standard-library">Biblioteca Padrão</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pending-removal-in-python-3-12">Pendente remoção no Python 3.12</a></li>
<li><a class="reference internal" href="#removed">Removidos</a></li>
<li><a class="reference internal" href="#porting-to-python-3-11">Portando para Python 3.11</a></li>
<li><a class="reference internal" href="#build-changes">Mudanças na construção</a></li>
<li><a class="reference internal" href="#c-api-changes">Alterações na API C</a><ul>
<li><a class="reference internal" href="#whatsnew311-c-api-new-features">Novas funcionalidades</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-porting">Portando para Python 3.11</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-deprecated">Descontinuados</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-pending-removal">Pendente remoção no Python 3.12</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-removed">Removidos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-3-11-4">Alterações notáveis no 3.11.4</a><ul>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-3-11-5">Alterações notáveis no 3.11.5</a><ul>
<li><a class="reference internal" href="#openssl">OpenSSL</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tópico anterior</h4>
    <p class="topless"><a href="3.12.html"
                          title="capítulo anterior">O que há de novo no Python 3.12</a></p>
  </div>
  <div>
    <h4>Próximo tópico</h4>
    <p class="topless"><a href="3.10.html"
                          title="próximo capítulo">O que há de novo no Python 3.10</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.11.rst?plain=1"
            rel="nofollow">Mostrar o código-fonte
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice Geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="O que há de novo no Python 3.10"
             accesskey="N">próximo</a> |</li>
        <li class="right" >
          <a href="3.12.html" title="O que há de novo no Python 3.12"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.13.5 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">O que há de novo no Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">O que há de novo no Python 3.11</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="search" name="q" id="search-box">
          <input type="submit" value="Ir">
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-11">
<h1 class="translated">O que há de novo no Python 3.11<a class="headerlink" href="#what-s-new-in-python-3-11" title="Link para este cabeçalho">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd translated">Editor<span class="colon">:</span></dt>
<dd class="field-odd translated"><p class="translated">Pablo Galindo Salgado</p>
</dd>
</dl>
<p class="translated">Este artigo explica os novos recursos no Python 3.11, em comparação com 3.10. Python 3.11 foi lançado em 24 de outubro de 2022. Veja <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a> para uma lista completa de mudanças.</p>
<section id="summary-release-highlights">
<span id="whatsnew311-summary"></span><h2 class="translated">Resumo – Destaques da versão<a class="headerlink" href="#summary-release-highlights" title="Link para este cabeçalho">¶</a></h2>
<ul class="simple">
<li><p class="translated">O Python 3.11 é entre 10-60% mais rápido que o Python 3.10. Em média, medimos uma aceleração de 1,25x no conjunto de benchmarks padrão. Veja <a class="reference internal" href="#whatsnew311-faster-cpython"><span class="std std-ref">CPython mais rápido</span></a> para detalhes.</p></li>
</ul>
<p class="translated">Novos recursos de sintaxe:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep654"><span class="std std-ref">PEP 654: Grupos de exceção e except*</span></a></p></li>
</ul>
<p class="translated">Novos recursos embutidos:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep678"><span class="std std-ref">PEP 678: Exceções podem ser enriquecidas com notas</span></a></p></li>
</ul>
<p class="translated">Novos módulos da biblioteca padrão:</p>
<ul class="simple">
<li><p class="translated"><span class="target" id="index-86"></span><a class="pep reference external" href="https://peps.python.org/pep-0680/"><strong>PEP 680</strong></a>: <a class="reference internal" href="../library/tomllib.html#module-tomllib" title="tomllib: Parse TOML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tomllib</span></code></a> — Suporte para analisar <a class="reference external" href="https://toml.io/">TOML</a> na Biblioteca Padrão</p></li>
</ul>
<p class="translated">Melhorias no interpretador:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep657"><span class="std std-ref">PEP 657: Localizações de erros refinadas em tracebacks</span></a></p></li>
<li><p class="translated">Nova opção de linha de comando <a class="reference internal" href="../using/cmdline.html#cmdoption-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code></a> e variável de ambiente <span class="target" id="index-87"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONSAFEPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSAFEPATH</span></code></a> para <a class="reference internal" href="#whatsnew311-pythonsafepath"><span class="std std-ref">desabilitar automaticamente a anteposição automática de caminhos potencialmente inseguros</span></a> para <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a></p></li>
</ul>
<p class="translated">Novos recursos de tipagem:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep646"><span class="std std-ref">PEP 646: Genéricos variádicos</span></a></p></li>
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep655"><span class="std std-ref">PEP 655: Marcando itens TypedDict individuais como obrigatórios ou não obrigatórios</span></a></p></li>
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep673"><span class="std std-ref">PEP 673: Tipo Self</span></a></p></li>
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep675"><span class="std std-ref">PEP 675: Tipo de string literal arbitrário</span></a></p></li>
<li><p class="translated"><a class="reference internal" href="#whatsnew311-pep681"><span class="std std-ref">PEP 681: Transformações de classe de dados</span></a></p></li>
</ul>
<p class="translated">Descontinuações, remoções e restrições importantes:</p>
<ul class="simple">
<li><p class="translated"><span class="target" id="index-88"></span><a class="pep reference external" href="https://peps.python.org/pep-0594/"><strong>PEP 594</strong></a>: <a class="reference internal" href="#whatsnew311-pep594"><span class="std std-ref">Muitos módulos legados de biblioteca padrão foram descontinuados</span></a> e serão removidos no Python 3.13</p></li>
<li><p class="translated"><span class="target" id="index-89"></span><a class="pep reference external" href="https://peps.python.org/pep-0624/"><strong>PEP 624</strong></a>: <a class="reference internal" href="#whatsnew311-pep624"><span class="std std-ref">APIs do codificador Py_UNICODE foram removidas</span></a></p></li>
<li><p class="translated"><span class="target" id="index-90"></span><a class="pep reference external" href="https://peps.python.org/pep-0670/"><strong>PEP 670</strong></a>: <a class="reference internal" href="#whatsnew311-pep670"><span class="std std-ref">Macros convertidos em funções estáticas em linha</span></a></p></li>
</ul>
</section>
<section id="new-features">
<span id="whatsnew311-features"></span><h2 class="translated">Novas funcionalidades<a class="headerlink" href="#new-features" title="Link para este cabeçalho">¶</a></h2>
<section id="pep-657-fine-grained-error-locations-in-tracebacks">
<span id="whatsnew311-pep657"></span><h3 class="translated">PEP 657: Localizações de erros refinadas em tracebacks<a class="headerlink" href="#pep-657-fine-grained-error-locations-in-tracebacks" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">Ao imprimir tracebacks (situação da pilha de execução), o interpretador agora apontará para a expressão exata que causou o erro, em vez de apenas a linha. Por exemplo:</p>
<div class="translated highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;distância.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">11</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">distância_de_manhattan</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">))</span>
          <span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">&quot;distância.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">6</span><span class="p">,</span> <span class="ow">in</span> <span class="n">distância_de_manhattan</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ponto_1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">ponto_2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ponto_1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ponto_2</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                           <span class="o">^^^^^^^^^</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;NoneType&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;x&#39;</span>
</pre></div>
</div>
<p class="translated">Versões anteriores do interpretador apontavam apenas para a linha, tornando ambíguo qual objeto era <code class="docutils literal notranslate"><span class="pre">None</span></code>. Esses erros aprimorados também podem ser úteis ao lidar com objetos <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> profundamente aninhados e várias chamadas de função:</p>
<div class="translated highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;consultar.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">37</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">mágica_aritmética</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;consultar.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">18</span><span class="p">,</span> <span class="ow">in</span> <span class="n">mágica_aritmética</span>
    <span class="k">return</span> <span class="n">adicionar_contagens</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">25</span>
           <span class="o">^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">&quot;consultar.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">24</span><span class="p">,</span> <span class="ow">in</span> <span class="n">adicionar_contagens</span>
    <span class="k">return</span> <span class="mi">25</span> <span class="o">+</span> <span class="n">consultar_usuário</span><span class="p">(</span><span class="n">usuário1</span><span class="p">)</span> <span class="o">+</span> <span class="n">consultar_usuário</span><span class="p">(</span><span class="n">usuário2</span><span class="p">)</span>
                <span class="o">^^^^^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">&quot;consultar.consultar&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">32</span><span class="p">,</span> <span class="ow">in</span> <span class="n">consultar_usuário</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">consultar_contagem</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">resposta</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">][</span><span class="s1">&#39;user&#39;</span><span class="p">],</span> <span class="n">tentar_novamente</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                                      <span class="o">~~~~~~~~~~~~~~~~~~^^^^^</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;NoneType&#39;</span> <span class="nb">object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">subscriptable</span>
</pre></div>
</div>
<p class="translated">Bem como expressões aritméticas complexas:</p>
<div class="translated highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;cálculo.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">54</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">resultado</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">/</span> <span class="n">z</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">/</span> <span class="n">b</span> <span class="o">/</span> <span class="n">c</span><span class="p">)</span>
                 <span class="o">~~~~~~^~~</span>
<span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
</pre></div>
</div>
<p class="translated">Além disso, as informações usadas pela funcionalidade de traceback aprimorado são disponibilizadas por meio de uma API geral, que pode ser usada para correlacionar <a class="reference internal" href="../library/dis.html#bytecodes"><span class="std std-ref">instruções</span></a> <a class="reference internal" href="../glossary.html#term-bytecode"><span class="xref std std-term">bytecode</span></a> com a localização do código-fonte. Essas informações podem ser recuperadas usando:</p>
<ul class="simple">
<li><p class="translated">O método <a class="reference internal" href="../reference/datamodel.html#codeobject.co_positions" title="codeobject.co_positions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">codeobject.co_positions()</span></code></a> no Python.</p></li>
<li><p class="translated">A função <a class="reference internal" href="../c-api/code.html#c.PyCode_Addr2Location" title="PyCode_Addr2Location"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_Addr2Location()</span></code></a> na API C.</p></li>
</ul>
<p class="translated">Veja <span class="target" id="index-91"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>PEP 657</strong></a> para mais detalhes. (Contribuição de Pablo Galindo, Batuhan Taskaya e Ammar Askar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43950">bpo-43950</a>.)</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p class="translated">Esse recurso requer o armazenamento de posições de coluna em <a class="reference internal" href="../c-api/code.html#codeobjects"><span class="std std-ref">Objetos código</span></a>, o que pode resultar em um pequeno aumento no uso de memória do interpretador e no uso de disco para arquivos Python compilados. Para evitar armazenar as informações extras e desativar a exibição das informações extras de rastreamento, use a opção de linha de comando <a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span> <span class="pre">no_debug_ranges</span></code></a> ou a variável de ambiente <span class="target" id="index-92"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONNODEBUGRANGES"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONNODEBUGRANGES</span></code></a>.</p>
</div>
</section>
<section id="pep-654-exception-groups-and-except">
<span id="whatsnew311-pep654"></span><h3 class="translated">PEP 654: Grupos de exceção e <code class="docutils literal notranslate"><span class="pre">except*</span></code><a class="headerlink" href="#pep-654-exception-groups-and-except" title="Link para este cabeçalho">¶</a></h3>
<p class="translated"><span class="target" id="index-93"></span><a class="pep reference external" href="https://peps.python.org/pep-0654/"><strong>PEP 654</strong></a> introduz recursos de linguagem que permitem que um programa levante e manipule várias exceções não relacionadas simultaneamente. Os tipos internos <a class="reference internal" href="../library/exceptions.html#ExceptionGroup" title="ExceptionGroup"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ExceptionGroup</span></code></a> e <a class="reference internal" href="../library/exceptions.html#BaseExceptionGroup" title="BaseExceptionGroup"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseExceptionGroup</span></code></a> tornam possível agrupar exceções e criá-las juntas, e a nova sintaxe <a class="reference internal" href="../reference/compound_stmts.html#except-star"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except*</span></code></a> generaliza <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> para corresponder a subgrupos de grupos de exceção.</p>
<p class="translated">Veja <span class="target" id="index-94"></span><a class="pep reference external" href="https://peps.python.org/pep-0654/"><strong>PEP 654</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45292">bpo-45292</a>. PEP escrita por Irit Katriel, Yury Selivanov e Guido van Rossum.)</p>
</section>
<section id="pep-678-exceptions-can-be-enriched-with-notes">
<span id="whatsnew311-pep678"></span><h3 class="translated">PEP 678: Exceções podem ser enriquecidas com notas<a class="headerlink" href="#pep-678-exceptions-can-be-enriched-with-notes" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">O método <a class="reference internal" href="../library/exceptions.html#BaseException.add_note" title="BaseException.add_note"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_note()</span></code></a> é adicionado a <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseException</span></code></a>. Ele pode ser usado para enriquecer exceções com informações de contexto que não estão disponíveis no momento em que a exceção é gerada. As notas adicionadas aparecem no traceback padrão.</p>
<p class="translated">Veja <span class="target" id="index-95"></span><a class="pep reference external" href="https://peps.python.org/pep-0678/"><strong>PEP 678</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45607">bpo-45607</a>. PEP escrita por Zac Hatfield-Dodds.)</p>
</section>
<section id="windows-py-exe-launcher-improvements">
<span id="whatsnew311-windows-launcher"></span><h3 class="translated">Melhorias no inicializador <code class="docutils literal notranslate"><span class="pre">py.exe</span></code> do Windows<a class="headerlink" href="#windows-py-exe-launcher-improvements" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">A cópia do <a class="reference internal" href="../using/windows.html#launcher"><span class="std std-ref">Inicializador Python para Windows</span></a> incluída no Python 3.11 foi significativamente atualizada. Ele agora oferece suporte à sintaxe de company/tag conforme definido em <span class="target" id="index-96"></span><a class="pep reference external" href="https://peps.python.org/pep-0514/"><strong>PEP 514</strong></a> usando o argumento <code class="samp docutils literal notranslate"><span class="pre">-V:</span><em><span class="pre">&lt;company&gt;</span></em><span class="pre">/</span><em><span class="pre">&lt;tag&gt;</span></em></code> em vez do limitado <code class="samp docutils literal notranslate"><span class="pre">-</span><em><span class="pre">&lt;major&gt;</span></em><span class="pre">.</span><em><span class="pre">&lt;minor&gt;</span></em></code>. Isso permite iniciar outras distribuições além de <code class="docutils literal notranslate"><span class="pre">PythonCore</span></code>, aquela hospedada em <a class="reference external" href="https://www.python.org">python.org</a>.</p>
<p class="translated">Ao usar seletores <code class="docutils literal notranslate"><span class="pre">-V:</span></code>, tanto company quanto tag podem ser omitidos, mas todas as instalações serão pesquisadas. Por exemplo, <code class="docutils literal notranslate"><span class="pre">-V:OtherPython/</span></code> selecionará a “melhor” tag registrada para <code class="docutils literal notranslate"><span class="pre">OtherPython</span></code>, enquanto <code class="docutils literal notranslate"><span class="pre">-V:3.11</span></code> ou <code class="docutils literal notranslate"><span class="pre">-V:/3.11</span></code> selecionará o “best” com a tag <code class="docutils literal notranslate"><span class="pre">3.11</span></code>.</p>
<p class="translated">Ao usar os argumentos legados <code class="samp docutils literal notranslate"><span class="pre">-</span><em><span class="pre">&lt;major&gt;</span></em></code>, <code class="samp docutils literal notranslate"><span class="pre">-</span><em><span class="pre">&lt;major&gt;</span></em><span class="pre">.</span><em><span class="pre">&lt;minor&gt;</span></em></code>, <code class="samp docutils literal notranslate"><span class="pre">-</span><em><span class="pre">&lt;major&gt;</span></em><span class="pre">-</span><em><span class="pre">&lt;bitness&gt;</span></em></code> ou <code class="samp docutils literal notranslate"><span class="pre">-</span><em><span class="pre">&lt;major&gt;</span></em><span class="pre">.</span><em><span class="pre">&lt;minor&gt;</span></em><span class="pre">-</span><em><span class="pre">&lt;bitness&gt;</span></em></code>, todo o comportamento existente deve ser preservado de versões anteriores e somente lançamentos de <code class="docutils literal notranslate"><span class="pre">PythonCore</span></code> será selecionado. No entanto, o sufixo <code class="docutils literal notranslate"><span class="pre">-64</span></code> agora implica “não 32 bits” (não necessariamente x86-64), pois existem várias plataformas de 64 bits suportadas. Tempos de execução de 32 bits são detectados verificando a tag do tempo de execução para um sufixo <code class="docutils literal notranslate"><span class="pre">-32</span></code>. Todas as versões do Python desde 3.5 incluíram isso em suas compilações de 32 bits.</p>
</section>
</section>
<section id="new-features-related-to-type-hints">
<span id="whatsnew311-typing-features"></span><span id="new-feat-related-type-hints-311"></span><h2 class="translated">Novos recursos relacionados a dicas de tipo<a class="headerlink" href="#new-features-related-to-type-hints" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">Esta seção cobre as principais mudanças que afetam as dicas de tipo da  <span class="target" id="index-97"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> e o módulo <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a>.</p>
<section id="pep-646-variadic-generics">
<span id="whatsnew311-pep646"></span><h3 class="translated">PEP 646: Genéricos variádicos<a class="headerlink" href="#pep-646-variadic-generics" title="Link para este cabeçalho">¶</a></h3>
<p class="translated"><span class="target" id="index-98"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> introduzido anteriormente <a class="reference internal" href="../library/typing.html#typing.TypeVar" title="typing.TypeVar"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVar</span></code></a>, permitindo a criação de genéricos parametrizados com um único tipo. <span class="target" id="index-99"></span><a class="pep reference external" href="https://peps.python.org/pep-0646/"><strong>PEP 646</strong></a> adiciona <a class="reference internal" href="../library/typing.html#typing.TypeVarTuple" title="typing.TypeVarTuple"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVarTuple</span></code></a>, permitindo a parametrização com um número <em>arbitrário</em> de tipos. Em outras palavras, uma <a class="reference internal" href="../library/typing.html#typing.TypeVarTuple" title="typing.TypeVarTuple"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVarTuple</span></code></a> é uma variável do tipo <em>variádico</em>, habilitando genéricos <em>variádicos</em>.</p>
<p class="translated">Isso permite uma ampla variedade de casos de uso. Em particular, ele permite que o tipo de estruturas do tipo array em bibliotecas de computação numérica, como NumPy e TensorFlow, sejam parametrizadas com o array <em>shape</em>. Os verificadores de tipo estáticos agora poderão capturar bugs relacionados a formas no código que usa essas bibliotecas.</p>
<p class="translated">Veja <span class="target" id="index-100"></span><a class="pep reference external" href="https://peps.python.org/pep-0646/"><strong>PEP 646</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de Matthew Rahtz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43224">bpo-43224</a>, com contribuições de Serhiy Storchaka e Jelle Zijlstra. PEP escrita por Mark Mendoza, Matthew Rahtz, Pradeep Kumar Srinivasan e Vincent Siles.)</p>
</section>
<section id="pep-655-marking-individual-typeddict-items-as-required-or-not-required">
<span id="whatsnew311-pep655"></span><h3 class="translated">PEP 655: Marcando itens <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> individuais como obrigatórios ou não obrigatórios<a class="headerlink" href="#pep-655-marking-individual-typeddict-items-as-required-or-not-required" title="Link para este cabeçalho">¶</a></h3>
<p class="translated"><a class="reference internal" href="../library/typing.html#typing.Required" title="typing.Required"><code class="xref py py-data docutils literal notranslate"><span class="pre">Required</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.NotRequired" title="typing.NotRequired"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotRequired</span></code></a> fornecem uma maneira direta de marcar se itens individuais em um <a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypedDict</span></code></a> devem estar presentes. Anteriormente, isso só era possível usando herança.</p>
<p class="translated">Todos os campos ainda são obrigatórios por padrão, a menos que o parâmetro <em>total</em> seja definido como <code class="docutils literal notranslate"><span class="pre">False</span></code>, caso em que todos os campos ainda não são obrigatórios por padrão. Por exemplo, o seguinte especifica um <code class="xref py py-class docutils literal notranslate"><span class="pre">TypedDict</span></code> com uma chave obrigatória e uma chave não obrigatória:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Filme</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
   <span class="n">título</span><span class="p">:</span> <span class="nb">str</span>
   <span class="n">ano</span><span class="p">:</span> <span class="n">NotRequired</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="n">m1</span><span class="p">:</span> <span class="n">Filme</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;título&quot;</span><span class="p">:</span> <span class="s2">&quot;Pantera Negra&quot;</span><span class="p">,</span> <span class="s2">&quot;ano&quot;</span><span class="p">:</span> <span class="mi">2018</span><span class="p">}</span>  <span class="c1"># OK</span>
<span class="n">m2</span><span class="p">:</span> <span class="n">Filme</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;título&quot;</span><span class="p">:</span> <span class="s2">&quot;Star Wars&quot;</span><span class="p">}</span>  <span class="c1"># OK (ano não é obrigatório)</span>
<span class="n">m3</span><span class="p">:</span> <span class="n">Filme</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ano&quot;</span><span class="p">:</span> <span class="mi">2022</span><span class="p">}</span>  <span class="c1"># ERRO (falta título, um campo obrigatório)</span>
</pre></div>
</div>
<p class="translated">A seguinte definição é equivalente:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">File</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
   <span class="n">título</span><span class="p">:</span> <span class="n">Required</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
   <span class="n">ano</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>
<p class="translated">Veja <span class="target" id="index-101"></span><a class="pep reference external" href="https://peps.python.org/pep-0655/"><strong>PEP 655</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de David Foster e Jelle Zijlstra em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47087">bpo-47087</a>. PEP escrita por David Foster.)</p>
</section>
<section id="pep-673-self-type">
<span id="whatsnew311-pep673"></span><h3 class="translated">PEP 673: Tipo <code class="docutils literal notranslate"><span class="pre">Self</span></code><a class="headerlink" href="#pep-673-self-type" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">A nova anotação <a class="reference internal" href="../library/typing.html#typing.Self" title="typing.Self"><code class="xref py py-data docutils literal notranslate"><span class="pre">Self</span></code></a> fornece uma maneira simples e intuitiva de anotar métodos que retornam uma instância de sua classe. Isso se comporta da mesma forma que a abordagem baseada em <a class="reference internal" href="../library/typing.html#typing.TypeVar" title="typing.TypeVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a> <span class="target" id="index-102"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/#annotating-instance-and-class-methods"><strong>especificada na PEP 484</strong></a>, mas é mais concisa e fácil de seguir.</p>
<p class="translated">Casos de uso comuns incluem construtores alternativos fornecidos como <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod</span></code></a>s e métodos <a class="reference internal" href="../reference/datamodel.html#object.__enter__" title="object.__enter__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code></a> que retornam <code class="docutils literal notranslate"><span class="pre">self</span></code>:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MinhaTrava</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trava</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MeuInt</span><span class="p">:</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">de_hex</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

    <span class="o">...</span>
</pre></div>
</div>
<p class="translated"><a class="reference internal" href="../library/typing.html#typing.Self" title="typing.Self"><code class="xref py py-data docutils literal notranslate"><span class="pre">Self</span></code></a> também pode ser usado para anotar parâmetros de métodos ou atributos do mesmo tipo que sua classe de inclusão.</p>
<p class="translated">Veja <span class="target" id="index-103"></span><a class="pep reference external" href="https://peps.python.org/pep-0673/"><strong>PEP 673</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de James Hilton-Balfe em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46534">bpo-46534</a>. PEP escrita por Pradeep Kumar Srinivasan e James Hilton-Balfe.)</p>
</section>
<section id="pep-675-arbitrary-literal-string-type">
<span id="whatsnew311-pep675"></span><h3 class="translated">PEP 675: Tipo de string literal arbitrário<a class="headerlink" href="#pep-675-arbitrary-literal-string-type" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">A nova anotação <a class="reference internal" href="../library/typing.html#typing.LiteralString" title="typing.LiteralString"><code class="xref py py-data docutils literal notranslate"><span class="pre">LiteralString</span></code></a> pode ser usada para indicar que um parâmetro de função pode ser de qualquer tipo de string literal. Isso permite que uma função aceite tipos de string literais arbitrários, bem como strings criadas a partir de outras strings literais. Os verificadores de tipo podem então impor que funções confidenciais, como aquelas que executam instruções SQL ou comandos de console, sejam chamadas apenas com argumentos estáticos, fornecendo proteção contra ataques de injeção.</p>
<p class="translated">Por exemplo, uma função de consulta SQL pode ser anotada da seguinte forma:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">faz_consulta</span><span class="p">(</span><span class="n">sql</span><span class="p">:</span> <span class="n">LiteralString</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>
    <span class="o">...</span>

<span class="k">def</span><span class="w"> </span><span class="nf">chamador</span><span class="p">(</span>
    <span class="n">string_arbitrária</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">string_consulta</span><span class="p">:</span> <span class="n">LiteralString</span><span class="p">,</span>
    <span class="n">nome_tabela</span><span class="p">:</span> <span class="n">LiteralString</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">faz_consulta</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students&quot;</span><span class="p">)</span>       <span class="c1"># ok</span>
    <span class="n">faz_consulta</span><span class="p">(</span><span class="n">string_consulta</span><span class="p">)</span>                <span class="c1"># ok</span>
    <span class="n">faz_consulta</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM &quot;</span> <span class="o">+</span> <span class="n">nome_tabela</span><span class="p">)</span> <span class="c1"># ok</span>
    <span class="n">faz_consulta</span><span class="p">(</span><span class="n">string_arbitrária</span><span class="p">)</span>              <span class="c1"># erro no verificador de tipo</span>
    <span class="n">faz_consulta</span><span class="p">(</span>                                <span class="c1"># erro no verificador de tipo</span>
        <span class="sa">f</span><span class="s2">&quot;SELECT * FROM students WHERE name = </span><span class="si">{</span><span class="n">string_arbitrária</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p class="translated">Veja <span class="target" id="index-104"></span><a class="pep reference external" href="https://peps.python.org/pep-0675/"><strong>PEP 675</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de Jelle Zijlstra em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47088">bpo-47088</a>. PEP escrita por Pradeep Kumar Srinivasan e Graham Bleaney.)</p>
</section>
<section id="pep-681-data-class-transforms">
<span id="whatsnew311-pep681"></span><h3 class="translated">PEP 681: Transformações de classe de dados<a class="headerlink" href="#pep-681-data-class-transforms" title="Link para este cabeçalho">¶</a></h3>
<p class="translated"><a class="reference internal" href="../library/typing.html#typing.dataclass_transform" title="typing.dataclass_transform"><code class="xref py py-data docutils literal notranslate"><span class="pre">dataclass_transform</span></code></a> pode ser usado para decorar uma classe, metaclasse ou uma função que é um decorador. A presença de <code class="docutils literal notranslate"><span class="pre">&#64;dataclass_transform()</span></code> informa a um verificador de tipo estático que o objeto decorado executa uma “mágica” de tempo de execução que transforma uma classe, dando a ela comportamentos semelhantes a <a class="reference internal" href="../library/dataclasses.html#dataclasses.dataclass" title="dataclasses.dataclass"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclass</span></code></a>.</p>
<p class="translated">Por exemplo:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># O decorador cria_modelo está definido por uma biblioteca.</span>
<span class="nd">@typing</span><span class="o">.</span><span class="n">dataclass_transform</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cria_modelo</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
    <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span> <span class="o">=</span> <span class="o">...</span>
    <span class="bp">cls</span><span class="o">.</span><span class="fm">__eq__</span> <span class="o">=</span> <span class="o">...</span>
    <span class="bp">cls</span><span class="o">.</span><span class="fm">__ne__</span> <span class="o">=</span> <span class="o">...</span>
    <span class="k">return</span> <span class="bp">cls</span>

<span class="c1"># O decorador cria_modelo agora pode ser usado para criar novas classes de modelo:</span>
<span class="nd">@cria_modelo</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ModeloCliente</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">nome</span><span class="p">:</span> <span class="nb">str</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">ModeloCliente</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">327</span><span class="p">,</span> <span class="n">nome</span><span class="o">=</span><span class="s2">&quot;Eric Idle&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="translated">Veja <span class="target" id="index-105"></span><a class="pep reference external" href="https://peps.python.org/pep-0681/"><strong>PEP 681</strong></a> para mais detalhes.</p>
<p class="translated">(Contribuição de Jelle Zijlstra em <a class="reference external" href="https://github.com/python/cpython/issues/91860">gh-91860</a>. PEP escrita por Erik De Bonte e Eric Traut.)</p>
</section>
<section id="pep-563-may-not-be-the-future">
<span id="whatsnew311-pep563-deferred"></span><h3 class="translated">PEP 563 pode não ser o futuro<a class="headerlink" href="#pep-563-may-not-be-the-future" title="Link para este cabeçalho">¶</a></h3>
<p class="translated"><span class="target" id="index-106"></span><a class="pep reference external" href="https://peps.python.org/pep-0563/"><strong>PEP 563</strong></a> Avaliação adiada de anotações (a <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code> <a class="reference internal" href="../reference/simple_stmts.html#future"><span class="std std-ref">instrução future</span></a>) que foi originalmente planejada para lançamento no Python 3.10 foi colocada em espera indefinidamente. Veja <a class="reference external" href="https://mail.python.org/archives/list/python-dev&#64;python.org/message/VIZEBX5EYMSYIJNDBF6DMUMZOCWHARSO/">esta mensagem do Conselho Diretor</a> para mais informações.</p>
</section>
</section>
<section id="other-language-changes">
<span id="whatsnew311-other-lang-changes"></span><h2 class="translated">Outras mudanças na linguagem<a class="headerlink" href="#other-language-changes" title="Link para este cabeçalho">¶</a></h2>
<ul class="simple">
<li><p class="translated">Expressões de desempacotamento com asterisco agora podem ser usadas em instruções <a class="reference internal" href="../reference/compound_stmts.html#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a>. (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46725">bpo-46725</a> para mais detalhes.)</p></li>
<li><p class="translated"><a class="reference internal" href="../reference/expressions.html#comprehensions"><span class="std std-ref">Compreensões</span></a> assíncronas agora são permitidas dentro de compreensões em <a class="reference internal" href="../reference/compound_stmts.html#async-def"><span class="std std-ref">funções assíncronas</span></a>. As compreensões externas tornam-se implicitamente assíncronas neste caso. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33346">bpo-33346</a>.)</p></li>
<li><p class="translated">Uma exceção <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> agora é levantada em vez de uma <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> em instruções <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> e <a class="reference internal" href="../library/contextlib.html#contextlib.ExitStack.enter_context" title="contextlib.ExitStack.enter_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.ExitStack.enter_context()</span></code></a> para objetos que não oferecem suporte ao protocolo de <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">gerenciador de contexto</span></a>, e em instruções <a class="reference internal" href="../reference/compound_stmts.html#async-with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code></a> e <a class="reference internal" href="../library/contextlib.html#contextlib.AsyncExitStack.enter_async_context" title="contextlib.AsyncExitStack.enter_async_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.AsyncExitStack.enter_async_context()</span></code></a> para objetos que não oferecem suporte ao protocolo de <a class="reference internal" href="../glossary.html#term-asynchronous-context-manager"><span class="xref std std-term">gerenciador de contexto assíncrono</span></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=12022">bpo-12022</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44471">bpo-44471</a>.)</p></li>
<li><p class="translated">Adicionado <a class="reference internal" href="../library/pickle.html#object.__getstate__" title="object.__getstate__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__getstate__()</span></code></a>, que fornece a implementação padrão do método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getstate__()</span></code>. Fazer <a class="reference internal" href="../library/copy.html#module-copy" title="copy: Shallow and deep copy operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">copy</span></code></a> e <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> de instâncias de subclasses de tipos embutidos <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a>, <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a>, <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a>, <a class="reference internal" href="../library/weakref.html#weakref.WeakSet" title="weakref.WeakSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">weakref.WeakSet</span></code></a> e <a class="reference internal" href="../library/datetime.html#datetime.tzinfo" title="datetime.tzinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.tzinfo</span></code></a> agora copia e serializa com pickle atributos de instância implementados como <a class="reference internal" href="../glossary.html#term-__slots__"><span class="xref std std-term">slots</span></a>. Essa mudança tem um efeito colateral não intencional: ela atrapalha uma pequena minoria de projetos Python existentes que não esperavam que <a class="reference internal" href="../library/pickle.html#object.__getstate__" title="object.__getstate__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__getstate__()</span></code></a> existisse. Consulte os comentários posteriores  em <a class="reference external" href="https://github.com/python/cpython/issues/70766">gh-70766</a> para discussões sobre quais soluções alternativas esse código pode precisar. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26579">bpo-26579</a>.)</p></li>
</ul>
<ul class="simple" id="whatsnew311-pythonsafepath">
<li><p class="translated">Adicionada uma opção de linha de comando <a class="reference internal" href="../using/cmdline.html#cmdoption-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code></a> e uma variável de ambiente <span class="target" id="index-107"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONSAFEPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSAFEPATH</span></code></a>, que desativa o prefixo automático para <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> do diretório do script ao executar um script ou o diretório atual ao usar <a class="reference internal" href="../using/cmdline.html#cmdoption-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">-c</span></code></a> e <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a>. Isso garante que apenas os módulos stdlib e instalados sejam escolhidos por <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a>, e evita sombreamento involuntário ou mal-intencionado de módulos com aqueles em um diretório local (e normalmente gravável pelo usuário). (Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/57684">gh-57684</a>.)</p></li>
<li><p class="translated">Uma opção <code class="docutils literal notranslate"><span class="pre">&quot;z&quot;</span></code> foi adicionada ao <a class="reference internal" href="../library/string.html#formatspec"><span class="std std-ref">Minilinguagem de especificação de formato</span></a> que força zero negativo para positivo após o arredondamento para a precisão do formato. Veja <span class="target" id="index-108"></span><a class="pep reference external" href="https://peps.python.org/pep-0682/"><strong>PEP 682</strong></a> para mais detalhes. (Contribuição de John Belmonte em <a class="reference external" href="https://github.com/python/cpython/issues/90153">gh-90153</a>.)</p></li>
<li><p class="translated">Bytes não são mais aceitos em <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>. O suporte quebrou em algum momento entre o Python 3.2 e o 3.6, sem que ninguém percebesse até o lançamento do Python 3.10.0. Além disso, trazer de volta o suporte seria problemático devido às interações entre <a class="reference internal" href="../using/cmdline.html#cmdoption-b"><code class="xref std std-option docutils literal notranslate"><span class="pre">-b</span></code></a> e <a class="reference internal" href="../library/sys.html#sys.path_importer_cache" title="sys.path_importer_cache"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path_importer_cache</span></code></a> quando há uma mistura de chaves <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>. (Contribuição de Thomas Grainger em <a class="reference external" href="https://github.com/python/cpython/issues/91181">gh-91181</a>.)</p></li>
</ul>
</section>
<section id="other-cpython-implementation-changes">
<span id="whatsnew311-other-implementation-changes"></span><h2 class="translated">Outras mudanças na implementação do CPython<a class="headerlink" href="#other-cpython-implementation-changes" title="Link para este cabeçalho">¶</a></h2>
<ul class="simple">
<li><p class="translated">Os métodos especiais <a class="reference internal" href="../reference/datamodel.html#object.__complex__" title="object.__complex__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__complex__()</span></code></a> para <a class="reference internal" href="../library/functions.html#complex" title="complex"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a> e <a class="reference internal" href="../reference/datamodel.html#object.__bytes__" title="object.__bytes__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bytes__()</span></code></a> para <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> são implementados para oferecer suporte aos protocolos <a class="reference internal" href="../library/typing.html#typing.SupportsComplex" title="typing.SupportsComplex"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.SupportsComplex</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.SupportsBytes" title="typing.SupportsBytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.SupportsBytes</span></code></a>. (Contribuição de Mark Dickinson e Donghee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24234">bpo-24234</a>.)</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">siphash13</span></code> foi adicionado como um novo algoritmo de hash interno. Ele tem propriedades de segurança semelhantes ao <code class="docutils literal notranslate"><span class="pre">siphash24</span></code>, mas é um pouco mais rápido para entradas longas. <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> e alguns outros tipos agora o usam como o algoritmo padrão para <a class="reference internal" href="../library/functions.html#hash" title="hash"><code class="xref py py-func docutils literal notranslate"><span class="pre">hash()</span></code></a>. <a class="reference internal" href="../reference/import.html#pyc-invalidation"><span class="std std-ref">Arquivos .pyc baseados em hash</span></a> da <span class="target" id="index-109"></span><a class="pep reference external" href="https://peps.python.org/pep-0552/"><strong>PEP 552</strong></a> agora usam <code class="docutils literal notranslate"><span class="pre">siphash13</span></code> também. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29410">bpo-29410</a>.)</p></li>
<li><p class="translated">Quando uma exceção ativa é reativada por uma instrução <a class="reference internal" href="../reference/simple_stmts.html#raise"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">raise</span></code></a> sem parâmetros, o traceback anexado a essa exceção agora é sempre <code class="docutils literal notranslate"><span class="pre">sys.exc_info()[1].__traceback__</span></code>. Isso significa que as alterações feitas no traceback na cláusula <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> atual são refletidas na exceção levantada novamente. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li>
<li><p class="translated">A representação do estado do interpretador de exceções tratadas (também conhecidas como <code class="docutils literal notranslate"><span class="pre">exc_info</span></code> ou <code class="docutils literal notranslate"><span class="pre">_PyErr_StackItem</span></code>) agora tem apenas o campo <code class="docutils literal notranslate"><span class="pre">exc_value</span></code>; <code class="docutils literal notranslate"><span class="pre">exc_type</span></code> e <code class="docutils literal notranslate"><span class="pre">exc_traceback</span></code> foram removidos, pois podem ser derivados de <code class="docutils literal notranslate"><span class="pre">exc_value</span></code>. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li>
<li><p class="translated">Uma nova <a class="reference internal" href="../using/windows.html#install-quiet-option"><span class="std std-ref">opção de linha de comando</span></a>, <code class="docutils literal notranslate"><span class="pre">AppendPath</span></code>, foi adicionada para o instalador do Windows. Ela se comporta de maneira semelhante ao <code class="docutils literal notranslate"><span class="pre">PrependPath</span></code>, mas anexa os diretórios de instalação e scripts em vez de antecedê-los. (Contribuição de Bastian Neuburger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44934">bpo-44934</a>.)</p></li>
<li><p class="translated">O campo <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.module_search_paths_set" title="PyConfig.module_search_paths_set"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.module_search_paths_set</span></code></a> agora deve ser definido como <code class="docutils literal notranslate"><span class="pre">1</span></code> para a inicialização usar <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.module_search_paths" title="PyConfig.module_search_paths"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.module_search_paths</span></code></a> para inicializar <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>. Caso contrário, a inicialização irá recalcular o caminho e substituir quaisquer valores adicionados a <code class="docutils literal notranslate"><span class="pre">module_search_paths</span></code>.</p></li>
<li><p class="translated">A saída da opção <a class="reference internal" href="../using/cmdline.html#cmdoption-help"><code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code></a> agora cabe em 50 linhas/80 colunas. Informações sobre as <a class="reference internal" href="../using/cmdline.html#using-on-envvars"><span class="std std-ref">variáveis de ambiente do Python</span></a> e a opção <a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a> agora estão disponíveis usando os respectivos sinalizadores <a class="reference internal" href="../using/cmdline.html#cmdoption-help-env"><code class="xref std std-option docutils literal notranslate"><span class="pre">--help-env</span></code></a> e <a class="reference internal" href="../using/cmdline.html#cmdoption-help-xoptions"><code class="xref std std-option docutils literal notranslate"><span class="pre">--help-xoptions</span></code></a>, e com o novo <a class="reference internal" href="../using/cmdline.html#cmdoption-help-all"><code class="xref std std-option docutils literal notranslate"><span class="pre">--help-all</span></code></a>. (Contribuição de Éric Araujo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46142">bpo-46142</a>.)</p></li>
<li><p class="translated">Converter entre <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> em bases diferentes de 2 (binário), 4, 8 (octal), 16 (hexadecimal) ou 32 como base 10 (decimal) agora levanta uma exceção <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> se o número de dígitos em forma de string estiver acima de um limite para evitar possíveis ataques de negação de serviço devido à complexidade algorítmica. Esta é uma mitigação para <span class="target" id="index-110"></span><a class="cve reference external" href="https://www.cve.org/CVERecord?id=CVE-2020-10735"><strong>CVE 2020-10735</strong></a>. Este limite pode ser configurado ou desabilitado por variável de ambiente, sinalizador de linha de comando ou APIs de <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a>. Veja a documentação de <a class="reference internal" href="../library/stdtypes.html#int-max-str-digits"><span class="std std-ref">limitação de comprimento de conversão de string inteira</span></a>. O limite padrão é de 4300 dígitos em forma de string.</p></li>
</ul>
</section>
<section id="new-modules">
<span id="whatsnew311-new-modules"></span><h2 class="translated">Novos módulos<a class="headerlink" href="#new-modules" title="Link para este cabeçalho">¶</a></h2>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/tomllib.html#module-tomllib" title="tomllib: Parse TOML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tomllib</span></code></a>: Para analisar <a class="reference external" href="https://toml.io/">TOML</a>. Veja <span class="target" id="index-111"></span><a class="pep reference external" href="https://peps.python.org/pep-0680/"><strong>PEP 680</strong></a> para mais detalhes. (Contribuição de Taneli Hukkinen em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40059">bpo-40059</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/wsgiref.html#module-wsgiref.types" title="wsgiref.types: WSGI types for static type checking"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.types</span></code></a>: Tipos específicos de <span class="target" id="index-112"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>WSGI</strong></a> para verificação de tipo estático. (Contribuição de Sebastian Rittau em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42012">bpo-42012</a>.)</p></li>
</ul>
</section>
<section id="improved-modules">
<span id="whatsnew311-improved-modules"></span><h2 class="translated">Módulos melhorados<a class="headerlink" href="#improved-modules" title="Link para este cabeçalho">¶</a></h2>
<section id="asyncio">
<span id="whatsnew311-asyncio"></span><h3 class="translated">asyncio<a class="headerlink" href="#asyncio" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicionada a classe <a class="reference internal" href="../library/asyncio-task.html#asyncio.TaskGroup" title="asyncio.TaskGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskGroup</span></code></a>, um <a class="reference internal" href="../reference/datamodel.html#async-context-managers"><span class="std std-ref">assíncrono gerenciador de contexto</span></a> contendo um grupo de tarefas que irá esperar por todas elas ao sair. Para código novo, é recomendado usar <a class="reference internal" href="../library/asyncio-task.html#asyncio.create_task" title="asyncio.create_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_task()</span></code></a> e <a class="reference internal" href="../library/asyncio-task.html#asyncio.gather" title="asyncio.gather"><code class="xref py py-func docutils literal notranslate"><span class="pre">gather()</span></code></a> diretamente. (Contribuição de Yury Selivanov e outros em <a class="reference external" href="https://github.com/python/cpython/issues/90908">gh-90908</a>.)</p></li>
<li><p class="translated">Adicionado <a class="reference internal" href="../library/asyncio-task.html#asyncio.timeout" title="asyncio.timeout"><code class="xref py py-func docutils literal notranslate"><span class="pre">timeout()</span></code></a>, um gerenciador de contexto assíncrono para definir um tempo limite em operações assíncronas. Para código novo, é recomendado usar <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait_for" title="asyncio.wait_for"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait_for()</span></code></a> diretamente. (Contribuição de Andrew Svetlov em <a class="reference external" href="https://github.com/python/cpython/issues/90927">gh-90927</a>.)</p></li>
<li><p class="translated">Adicionada a classe <a class="reference internal" href="../library/asyncio-runner.html#asyncio.Runner" title="asyncio.Runner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Runner</span></code></a>, que expõe o maquinário usado por <a class="reference internal" href="../library/asyncio-runner.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a>. (Contribuição de Andrew Svetlov em <a class="reference external" href="https://github.com/python/cpython/issues/91218">gh-91218</a>.)</p></li>
<li><p class="translated">Adicionada a classe <a class="reference internal" href="../library/asyncio-sync.html#asyncio.Barrier" title="asyncio.Barrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Barrier</span></code></a> às primitivas de sincronização na biblioteca asyncio, e a exceção <a class="reference internal" href="../library/asyncio-sync.html#asyncio.BrokenBarrierError" title="asyncio.BrokenBarrierError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BrokenBarrierError</span></code></a> relacionada. (Contribuição de Yves Duprat e Andrew Svetlov em <a class="reference external" href="https://github.com/python/cpython/issues/87518">gh-87518</a>.)</p></li>
<li><p class="translated">Adicionado o argumento nomeado <em>all_errors</em> para <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_connection()</span></code></a> para que vários erros de conexão possam ser levantados como <a class="reference internal" href="../library/exceptions.html#ExceptionGroup" title="ExceptionGroup"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ExceptionGroup</span></code></a>.</p></li>
<li><p class="translated">Adicionado o método <a class="reference internal" href="../library/asyncio-stream.html#asyncio.StreamWriter.start_tls" title="asyncio.StreamWriter.start_tls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.StreamWriter.start_tls()</span></code></a> para atualizar conexões baseadas em fluxo existentes para TLS. (Contribuição de Ian Good em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34975">bpo-34975</a>.)</p></li>
<li><p class="translated">Adicionadas funções de soquete de datagrama <em>raw</em> ao laço de eventos: <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.sock_sendto" title="asyncio.loop.sock_sendto"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sock_sendto()</span></code></a>, <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.sock_recvfrom" title="asyncio.loop.sock_recvfrom"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sock_recvfrom()</span></code></a> e <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.sock_recvfrom_into" title="asyncio.loop.sock_recvfrom_into"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sock_recvfrom_into()</span></code></a>. Eles têm implementações em <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a> e <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a>. (Contribuição de Alex Grönholm em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46805">bpo-46805</a>.)</p></li>
<li><p class="translated">Adicionados os métodos <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task.cancelling" title="asyncio.Task.cancelling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cancelling()</span></code></a> e <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task.uncancel" title="asyncio.Task.uncancel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">uncancel()</span></code></a> a <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>. Estes são destinados principalmente para uso interno, notadamente por <a class="reference internal" href="../library/asyncio-task.html#asyncio.TaskGroup" title="asyncio.TaskGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskGroup</span></code></a>.</p></li>
</ul>
</section>
<section id="contextlib">
<span id="whatsnew311-contextlib"></span><h3 class="translated">contextlib<a class="headerlink" href="#contextlib" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicionado gerenciador de contexto não paralelo seguro <a class="reference internal" href="../library/contextlib.html#contextlib.chdir" title="contextlib.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">chdir()</span></code></a> para alterar o diretório de trabalho atual e depois restaurá-lo na saída. Wrapper simples em torno de <a class="reference internal" href="../library/os.html#os.chdir" title="os.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">chdir()</span></code></a>. (Contribuição de Filipe Laíns em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=25625">bpo-25625</a>)</p></li>
</ul>
</section>
<section id="dataclasses">
<span id="whatsnew311-dataclasses"></span><h3 class="translated">dataclasses<a class="headerlink" href="#dataclasses" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Alterar a verificação de mutabilidade padrão do campo, permitindo apenas padrões que são <a class="reference internal" href="../glossary.html#term-hashable"><span class="xref std std-term">hasheáveis</span></a> em vez de qualquer objeto que não seja uma instância de <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> ou <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>. (Contribuição de Eric V. Smith em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44674">bpo-44674</a>.)</p></li>
</ul>
</section>
<section id="datetime">
<span id="whatsnew311-datetime"></span><h3 class="translated">datetime<a class="headerlink" href="#datetime" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicione <a class="reference internal" href="../library/datetime.html#datetime.UTC" title="datetime.UTC"><code class="xref py py-const docutils literal notranslate"><span class="pre">datetime.UTC</span></code></a>, um apelido de conveniência para <a class="reference internal" href="../library/datetime.html#datetime.timezone.utc" title="datetime.timezone.utc"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.timezone.utc</span></code></a>. (Contribuição de Kabir Kwatra em <a class="reference external" href="https://github.com/python/cpython/issues/91973">gh-91973</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/datetime.html#datetime.date.fromisoformat" title="datetime.date.fromisoformat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.date.fromisoformat()</span></code></a>, <a class="reference internal" href="../library/datetime.html#datetime.time.fromisoformat" title="datetime.time.fromisoformat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.time.fromisoformat()</span></code></a> e <a class="reference internal" href="../library/datetime.html#datetime.datetime.fromisoformat" title="datetime.datetime.fromisoformat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.datetime.fromisoformat()</span></code></a> agora podem ser usados para analisar a maioria dos formatos ISO 8601 (exceto aqueles que têm suporte a horas fracionárias e minutos). (Contribuição de Paul Ganssle em <a class="reference external" href="https://github.com/python/cpython/issues/80010">gh-80010</a>.)</p></li>
</ul>
</section>
<section id="enum">
<span id="whatsnew311-enum"></span><h3 class="translated">enum<a class="headerlink" href="#enum" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Renomeado <code class="xref py py-class docutils literal notranslate"><span class="pre">EnumMeta</span></code> para <a class="reference internal" href="../library/enum.html#enum.EnumType" title="enum.EnumType"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnumType</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">EnumMeta</span></code> mantido como um apelido).</p></li>
<li><p class="translated">Adicionada <a class="reference internal" href="../library/enum.html#enum.StrEnum" title="enum.StrEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrEnum</span></code></a>, com membros que podem ser usados como (e devem ser) strings.</p></li>
<li><p class="translated">Adicionada <a class="reference internal" href="../library/enum.html#enum.ReprEnum" title="enum.ReprEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReprEnum</span></code></a>, que apenas modifica o <a class="reference internal" href="../reference/datamodel.html#object.__repr__" title="object.__repr__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code></a> dos membros enquanto retorna seus valores literais (ao invés de nomes) para <a class="reference internal" href="../reference/datamodel.html#object.__str__" title="object.__str__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__str__()</span></code></a> e <a class="reference internal" href="../reference/datamodel.html#object.__format__" title="object.__format__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__format__()</span></code></a> (usado por <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a>, <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-func docutils literal notranslate"><span class="pre">format()</span></code></a> e <a class="reference internal" href="../glossary.html#term-f-string"><span class="xref std std-term">f-string</span></a>s).</p></li>
<li><p class="translated">Alterado <a class="reference internal" href="../library/enum.html#enum.Enum.__format__" title="enum.Enum.__format__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Enum.__format__()</span></code></a> (o padrão para <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-func docutils literal notranslate"><span class="pre">format()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a> e <a class="reference internal" href="../glossary.html#term-f-string"><span class="xref std std-term">f-string</span></a>s) para sempre produz o mesmo resultado que <a class="reference internal" href="../library/enum.html#enum.Enum.__str__" title="enum.Enum.__str__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Enum.__str__()</span></code></a>: para enums herdados de <a class="reference internal" href="../library/enum.html#enum.ReprEnum" title="enum.ReprEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReprEnum</span></code></a> será o valor do membro; para todos os outros enums, será o enum e o nome do membro (por exemplo, <code class="docutils literal notranslate"><span class="pre">Color.RED</span></code>).</p></li>
<li><p class="translated">Adicionado um novo parâmetro de classe <em>boundary</em> para enums <a class="reference internal" href="../library/enum.html#enum.Flag" title="enum.Flag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flag</span></code></a> e <a class="reference internal" href="../library/enum.html#enum.FlagBoundary" title="enum.FlagBoundary"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagBoundary</span></code></a> com suas opções, para controlar como lidar com valores de sinalizadores fora do intervalo.</p></li>
<li><p class="translated">Adicionado o decorador de enum <a class="reference internal" href="../library/enum.html#enum.verify" title="enum.verify"><code class="xref py py-func docutils literal notranslate"><span class="pre">verify()</span></code></a> e o enum <a class="reference internal" href="../library/enum.html#enum.EnumCheck" title="enum.EnumCheck"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnumCheck</span></code></a> com suas opções, para verificar classes de enum em relação a várias restrições específicas.</p></li>
<li><p class="translated">Adicionados os decoradores <a class="reference internal" href="../library/enum.html#enum.member" title="enum.member"><code class="xref py py-func docutils literal notranslate"><span class="pre">member()</span></code></a> e <a class="reference internal" href="../library/enum.html#enum.nonmember" title="enum.nonmember"><code class="xref py py-func docutils literal notranslate"><span class="pre">nonmember()</span></code></a>, para garantir que o objeto decorado seja/não seja convertido em um membro enum.</p></li>
<li><p class="translated">Adicionado o decorador <a class="reference internal" href="../library/enum.html#enum.property" title="enum.property"><code class="xref py py-func docutils literal notranslate"><span class="pre">property()</span></code></a>, que funciona como <a class="reference internal" href="../library/functions.html#property" title="property"><code class="xref py py-func docutils literal notranslate"><span class="pre">property()</span></code></a> exceto para enums. Use isso em vez de <a class="reference internal" href="../library/types.html#types.DynamicClassAttribute" title="types.DynamicClassAttribute"><code class="xref py py-func docutils literal notranslate"><span class="pre">types.DynamicClassAttribute()</span></code></a>.</p></li>
<li><p class="translated">Adicionado o decorador enum <a class="reference internal" href="../library/enum.html#enum.global_enum" title="enum.global_enum"><code class="xref py py-func docutils literal notranslate"><span class="pre">global_enum()</span></code></a>, que ajusta <a class="reference internal" href="../reference/datamodel.html#object.__repr__" title="object.__repr__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code></a> e <a class="reference internal" href="../reference/datamodel.html#object.__str__" title="object.__str__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__str__()</span></code></a> para mostrar valores como membros de seu módulo em vez da classe enum. Por exemplo, <code class="docutils literal notranslate"><span class="pre">'re.ASCII'</span></code> para o membro <a class="reference internal" href="../library/re.html#re.ASCII" title="re.ASCII"><code class="xref py py-const docutils literal notranslate"><span class="pre">ASCII</span></code></a> de <a class="reference internal" href="../library/re.html#re.RegexFlag" title="re.RegexFlag"><code class="xref py py-class docutils literal notranslate"><span class="pre">re.RegexFlag</span></code></a> em vez de <code class="docutils literal notranslate"><span class="pre">'RegexFlag.ASCII'</span></code>.</p></li>
<li><p class="translated">Aprimorada <a class="reference internal" href="../library/enum.html#enum.Flag" title="enum.Flag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flag</span></code></a> para ter suporte a <a class="reference internal" href="../library/functions.html#len" title="len"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a>, iteração e <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">in</span></code></a>/<a class="reference internal" href="../reference/expressions.html#not-in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code></a> em seus membros. Por exemplo, o seguinte agora funciona: <code class="docutils literal notranslate"><span class="pre">len(AFlag(3))</span> <span class="pre">==</span> <span class="pre">2</span> <span class="pre">and</span> <span class="pre">list(AFlag(3))</span> <span class="pre">==</span> <span class="pre">(AFlag.ONE,</span> <span class="pre">AFlag.TWO)</span></code></p></li>
<li><p class="translated">Alterada <a class="reference internal" href="../library/enum.html#enum.Enum" title="enum.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> e <a class="reference internal" href="../library/enum.html#enum.Flag" title="enum.Flag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flag</span></code></a> para que os membros sejam agora definidos antes de <a class="reference internal" href="../reference/datamodel.html#object.__init_subclass__" title="object.__init_subclass__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__init_subclass__()</span></code></a> ser chamado; <a class="reference internal" href="../library/functions.html#dir" title="dir"><code class="xref py py-func docutils literal notranslate"><span class="pre">dir()</span></code></a> agora inclui métodos, etc., de tipos de dados mistos.</p></li>
<li><p class="translated">Alterada <a class="reference internal" href="../library/enum.html#enum.Flag" title="enum.Flag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flag</span></code></a> para considerar apenas valores primários (potência de dois) canônicos enquanto valores compostos (<code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">6</span></code>, <code class="docutils literal notranslate"><span class="pre">10</span></code>, etc.) são considerados apelidos; bandeiras invertidas são coagidas ao seu equivalente positivo.</p></li>
</ul>
</section>
<section id="fcntl">
<span id="whatsnew311-fcntl"></span><h3 class="translated">fcntl<a class="headerlink" href="#fcntl" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">No FreeBSD, os sinalizadores <code class="xref py py-data docutils literal notranslate"><span class="pre">F_DUP2FD</span></code> e <code class="xref py py-data docutils literal notranslate"><span class="pre">F_DUP2FD_CLOEXEC</span></code> respectivamente são suportados, o primeiro é igual ao uso de <code class="docutils literal notranslate"><span class="pre">dup2</span></code> enquanto o último define o sinalizador <code class="docutils literal notranslate"><span class="pre">FD_CLOEXEC</span></code> adicionalmente.</p></li>
</ul>
</section>
<section id="fractions">
<span id="whatsnew311-fractions"></span><h3 class="translated">fractions<a class="headerlink" href="#fractions" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Suporte à inicialização no estilo <span class="target" id="index-113"></span><a class="pep reference external" href="https://peps.python.org/pep-0515/"><strong>PEP 515</strong></a> de <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> da string. (Contribuição de Sergey B Kirpichev em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44258">bpo-44258</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> agora implementa um método <code class="docutils literal notranslate"><span class="pre">__int__</span></code>, para que uma verificação de <code class="docutils literal notranslate"><span class="pre">isinstance(some_fraction,</span> <span class="pre">typing.SupportsInt)</span></code> seja aprovada. (Contribuição de Mark Dickinson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44547">bpo-44547</a>.)</p></li>
</ul>
</section>
<section id="functools">
<span id="whatsnew311-functools"></span><h3 class="translated">functools<a class="headerlink" href="#functools" title="Link para este cabeçalho">¶</a></h3>
<ul>
<li><p class="translated"><a class="reference internal" href="../library/functools.html#functools.singledispatch" title="functools.singledispatch"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.singledispatch()</span></code></a> agora suporta <a class="reference internal" href="../library/types.html#types.UnionType" title="types.UnionType"><code class="xref py py-data docutils literal notranslate"><span class="pre">types.UnionType</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.Union" title="typing.Union"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Union</span></code></a> como anotações para o argumento de dispatch.:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">singledispatch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@singledispatch</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">fun</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verboso</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">verboso</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Deixe-me apenas dizer,&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@fun</span><span class="o">.</span><span class="n">register</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span> <span class="n">verboso</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">verboso</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Força nos números, não é?&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@fun</span><span class="o">.</span><span class="n">register</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">set</span><span class="p">],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">verboso</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Enumere isso:&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p class="translated">(Contribuição de Yurii Karabas na <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46014">bpo-46014</a>.)</p>
</li>
</ul>
</section>
<section id="gzip">
<span id="whatsnew311-gzip"></span><h3 class="translated">gzip<a class="headerlink" href="#gzip" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">A função <a class="reference internal" href="../library/gzip.html#gzip.compress" title="gzip.compress"><code class="xref py py-func docutils literal notranslate"><span class="pre">gzip.compress()</span></code></a> agora é mais rápida quando usada com o argumento <strong>mtime=0</strong>, pois delega a compactação inteiramente para uma única operação <a class="reference internal" href="../library/zlib.html#zlib.compress" title="zlib.compress"><code class="xref py py-func docutils literal notranslate"><span class="pre">zlib.compress()</span></code></a>. Há um efeito colateral dessa mudança: o cabeçalho do arquivo gzip contém um byte de “OS” em seu cabeçalho. Tradicionalmente, isso sempre foi definido com um valor de 255 representando “desconhecido” pelo módulo <a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a>. Agora, ao usar <a class="reference internal" href="../library/gzip.html#gzip.compress" title="gzip.compress"><code class="xref py py-func docutils literal notranslate"><span class="pre">compress()</span></code></a> com <strong>mtime=0</strong>, ele pode ser definido com um valor diferente pela biblioteca zlib C subjacente à qual o Python estava vinculado. (Veja <a class="reference external" href="https://github.com/python/cpython/issues/112346">gh-112346</a> para detalhes sobre o efeito colateral.)</p></li>
</ul>
</section>
<section id="hashlib">
<span id="whatsnew311-hashlib"></span><h3 class="translated">hashlib<a class="headerlink" href="#hashlib" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/hashlib.html#hashlib.blake2b" title="hashlib.blake2b"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.blake2b()</span></code></a> e <a class="reference internal" href="../library/hashlib.html#hashlib.blake2s" title="hashlib.blake2s"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.blake2s()</span></code></a> agora preferem <a class="reference external" href="https://www.blake2.net/">libb2</a> em vez da cópia do Python. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47095">bpo-47095</a>.)</p></li>
<li><p class="translated">O módulo interno <code class="docutils literal notranslate"><span class="pre">_sha3</span></code> com algoritmos SHA3 e SHAKE agora usa <em>tiny_sha3</em> em vez do <em>Keccak Code Package</em> para reduzir o código e o tamanho binário. O módulo <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> prefere implementações otimizadas de SHA3 e SHAKE do OpenSSL. A alteração afeta apenas instalações sem suporte a OpenSSL. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47098">bpo-47098</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/hashlib.html#hashlib.file_digest" title="hashlib.file_digest"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.file_digest()</span></code></a>, uma função auxiliar para hash eficiente de objetos arquivo ou similar. (Contribuição de Christian Heimes em <a class="reference external" href="https://github.com/python/cpython/issues/89313">gh-89313</a>.)</p></li>
</ul>
</section>
<section id="whatsnew311-idle">
<span id="idle-and-idlelib"></span><h3 class="translated">IDLE e idlelib<a class="headerlink" href="#whatsnew311-idle" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Aplica realce de sintaxe em arquivos <code class="docutils literal notranslate"><span class="pre">.pyi</span></code>. (Contribuição de Alex Waygood e Terry Jan Reedy em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45447">bpo-45447</a>.)</p></li>
<li><p class="translated">Inclui prompts ao salvar o console com entradas e saídas. (Contribuição de Terry Jan Reedy em <a class="reference external" href="https://github.com/python/cpython/issues/95191">gh-95191</a>.)</p></li>
</ul>
</section>
<section id="inspect">
<span id="whatsnew311-inspect"></span><h3 class="translated">inspect<a class="headerlink" href="#inspect" title="Link para este cabeçalho">¶</a></h3>
<ul>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/inspect.html#inspect.getmembers_static" title="inspect.getmembers_static"><code class="xref py py-func docutils literal notranslate"><span class="pre">getmembers_static()</span></code></a> para retornar todos os membros sem acionar a pesquisa dinâmica por meio do protocolo descritor. (Contribuição de Weipeng Hong em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30533">bpo-30533</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/inspect.html#inspect.ismethodwrapper" title="inspect.ismethodwrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">ismethodwrapper()</span></code></a> para verificar se o tipo de um objeto é um <a class="reference internal" href="../library/types.html#types.MethodWrapperType" title="types.MethodWrapperType"><code class="xref py py-class docutils literal notranslate"><span class="pre">MethodWrapperType</span></code></a>. (Contribuição de Hakan Çelik em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29418">bpo-29418</a>.)</p></li>
<li><p class="translated">Altera as funções relacionadas a quadros no módulo <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> para retornar novas instâncias de classe <a class="reference internal" href="../library/inspect.html#inspect.FrameInfo" title="inspect.FrameInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrameInfo</span></code></a> e <a class="reference internal" href="../library/inspect.html#inspect.Traceback" title="inspect.Traceback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Traceback</span></code></a> (compatíveis com as anteriores interfaces do tipo <a class="reference internal" href="../glossary.html#term-named-tuple"><span class="xref std std-term">tupla nomeada</span></a>) que inclui as informações de posição estendidas <span class="target" id="index-114"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>PEP 657</strong></a> (número da linha final, coluna e coluna final). As funções afetadas são:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/inspect.html#inspect.getframeinfo" title="inspect.getframeinfo"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getframeinfo()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../library/inspect.html#inspect.getouterframes" title="inspect.getouterframes"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getouterframes()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../library/inspect.html#inspect.getinnerframes" title="inspect.getinnerframes"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getinnerframes()</span></code></a>,</p></li>
<li><p class="translated"><a class="reference internal" href="../library/inspect.html#inspect.stack" title="inspect.stack"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.stack()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../library/inspect.html#inspect.trace" title="inspect.trace"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.trace()</span></code></a></p></li>
</ul>
<p class="translated">(Contribuição por Pablo Galindo em <a class="reference external" href="https://github.com/python/cpython/issues/88116">gh-88116</a>.)</p>
</li>
</ul>
</section>
<section id="locale">
<span id="whatsnew311-locale"></span><h3 class="translated">locale<a class="headerlink" href="#locale" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adiciona <a class="reference internal" href="../library/locale.html#locale.getencoding" title="locale.getencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getencoding()</span></code></a> para obter a codificação local atual. É semelhante a <code class="docutils literal notranslate"><span class="pre">locale.getpreferredencoding(False)</span></code>, mas ignora o <a class="reference internal" href="../library/os.html#utf8-mode"><span class="std std-ref">Modo UTF-8 do Python</span></a>.</p></li>
</ul>
</section>
<section id="logging">
<span id="whatsnew311-logging"></span><h3 class="translated">logging<a class="headerlink" href="#logging" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicionada <a class="reference internal" href="../library/logging.html#logging.getLevelNamesMapping" title="logging.getLevelNamesMapping"><code class="xref py py-func docutils literal notranslate"><span class="pre">getLevelNamesMapping()</span></code></a> para retornar um mapeamento de nomes de nível de registro (por exemplo, <code class="docutils literal notranslate"><span class="pre">'CRITICAL'</span></code>) para os valores de seus <a class="reference internal" href="../library/logging.html#levels"><span class="std std-ref">Níveis de Logging</span></a> correspondentes (por exemplo, <code class="docutils literal notranslate"><span class="pre">50</span></code>, por padrão ). (Contribuição de Andrei Kulakovin em <a class="reference external" href="https://github.com/python/cpython/issues/88024">gh-88024</a>.)</p></li>
<li><p class="translated">Adicionado um método <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.SysLogHandler.createSocket" title="logging.handlers.SysLogHandler.createSocket"><code class="xref py py-meth docutils literal notranslate"><span class="pre">createSocket()</span></code></a> a <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.SysLogHandler" title="logging.handlers.SysLogHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">SysLogHandler</span></code></a>, para corresponder a <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.SocketHandler.createSocket" title="logging.handlers.SocketHandler.createSocket"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SocketHandler.createSocket()</span></code></a> . Ele é chamado automaticamente durante a inicialização do manipulador e ao emitir um evento, se não houver nenhum soquete ativo. (Contribuição de Kirill Pinchuk em <a class="reference external" href="https://github.com/python/cpython/issues/88457">gh-88457</a>.)</p></li>
</ul>
</section>
<section id="math">
<span id="whatsnew311-math"></span><h3 class="translated">math<a class="headerlink" href="#math" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adiciona <a class="reference internal" href="../library/math.html#math.exp2" title="math.exp2"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.exp2()</span></code></a>: retorna 2 elevado à potência de x. (Contribuição de Gideon Mitchell em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45917">bpo-45917</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/math.html#math.cbrt" title="math.cbrt"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.cbrt()</span></code></a>: retorna a raiz cúbica de x. (Contribuição de Ajith Ramachandran em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44357">bpo-44357</a>.)</p></li>
<li><p class="translated">O comportamento de dois casos excepcionais <a class="reference internal" href="../library/math.html#math.pow" title="math.pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.pow()</span></code></a> foi alterado, para consistência com a especificação IEEE 754. As operações <code class="docutils literal notranslate"><span class="pre">math.pow(0.0,</span> <span class="pre">-math.inf)</span></code> e <code class="docutils literal notranslate"><span class="pre">math.pow(-0.0,</span> <span class="pre">-math.inf)</span></code> agora retornam <code class="docutils literal notranslate"><span class="pre">inf</span></code>. Anteriormente eles levantavam <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>. (Contribuição de Mark Dickinson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44339">bpo-44339</a>.)</p></li>
<li><p class="translated">O valor <a class="reference internal" href="../library/math.html#math.nan" title="math.nan"><code class="xref py py-data docutils literal notranslate"><span class="pre">math.nan</span></code></a> agora está sempre disponível. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46917">bpo-46917</a>.)</p></li>
</ul>
</section>
<section id="operator">
<span id="whatsnew311-operator"></span><h3 class="translated">operador<a class="headerlink" href="#operator" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Uma nova função <code class="docutils literal notranslate"><span class="pre">operator.call</span></code> foi adicionada, tal que <code class="docutils literal notranslate"><span class="pre">operator.call(obj,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)</span> <span class="pre">==</span> <span class="pre">obj(*args,</span> <span class="pre">**kwargs)</span></code> (Contribuição de Antony Lee em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44019">bpo-44019</a>.)</p></li>
</ul>
</section>
<section id="os">
<span id="whatsnew311-os"></span><h3 class="translated">os<a class="headerlink" href="#os" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">No Windows, <a class="reference internal" href="../library/os.html#os.urandom" title="os.urandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> agora usa <code class="docutils literal notranslate"><span class="pre">BCryptGenRandom()</span></code>, em vez de <code class="docutils literal notranslate"><span class="pre">CryptGenRandom()</span></code> que foi descontinuado. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44611">bpo-44611</a>.)</p></li>
</ul>
</section>
<section id="pathlib">
<span id="whatsnew311-pathlib"></span><h3 class="translated">pathlib<a class="headerlink" href="#pathlib" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/pathlib.html#pathlib.Path.glob" title="pathlib.Path.glob"><code class="xref py py-meth docutils literal notranslate"><span class="pre">glob()</span></code></a> e <a class="reference internal" href="../library/pathlib.html#pathlib.Path.rglob" title="pathlib.Path.rglob"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rglob()</span></code></a> retornam apenas diretórios se <em>pattern</em> terminar com um separador de componentes de nome de caminho: <a class="reference internal" href="../library/os.html#os.sep" title="os.sep"><code class="xref py py-data docutils literal notranslate"><span class="pre">sep</span></code></a> ou <a class="reference internal" href="../library/os.html#os.altsep" title="os.altsep"><code class="xref py py-data docutils literal notranslate"><span class="pre">altsep</span></code></a>. (Contribuição de Eisuke Kawasima em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=22276">bpo-22276</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33392">bpo-33392</a>.)</p></li>
</ul>
</section>
<section id="re">
<span id="whatsnew311-re"></span><h3 class="translated">re<a class="headerlink" href="#re" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Agrupamento atômico (<code class="docutils literal notranslate"><span class="pre">(?&gt;...)</span></code>) e quantificadores possessivos (<code class="docutils literal notranslate"><span class="pre">*+</span></code>, <code class="docutils literal notranslate"><span class="pre">++</span></code>, <code class="docutils literal notranslate"><span class="pre">?+</span></code>, <code class="docutils literal notranslate"><span class="pre">{m,n}+</span></code> ) agora são suportados em expressões regulares. (Contribuição de Jeffrey C. Jacobs e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=433030">bpo-433030</a>.)</p></li>
</ul>
</section>
<section id="shutil">
<span id="whatsnew311-shutil"></span><h3 class="translated">shutil<a class="headerlink" href="#shutil" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicione o parâmetro opcional <em>dir_fd</em> em <a class="reference internal" href="../library/shutil.html#shutil.rmtree" title="shutil.rmtree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.rmtree()</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46245">bpo-46245</a>.)</p></li>
</ul>
</section>
<section id="socket">
<span id="whatsnew311-socket"></span><h3 class="translated">socket<a class="headerlink" href="#socket" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adiciona suporte ao soquete CAN para NetBSD. (Contribuição de Thomas Klausner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30512">bpo-30512</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/socket.html#socket.create_connection" title="socket.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_connection()</span></code></a> tem a opção de levantar, em caso de falha na conexão, um <a class="reference internal" href="../library/exceptions.html#ExceptionGroup" title="ExceptionGroup"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ExceptionGroup</span></code></a> contendo todos os erros ao invés de somente levantar o último erro. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29980">bpo-29980</a>.)</p></li>
</ul>
</section>
<section id="sqlite3">
<span id="whatsnew311-sqlite3"></span><h3 class="translated">sqlite3<a class="headerlink" href="#sqlite3" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Agora você pode desabilitar o autorizador passando <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a> para <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.set_authorizer" title="sqlite3.Connection.set_authorizer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_authorizer()</span></code></a>. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44491">bpo-44491</a>.)</p></li>
<li><p class="translated">O nome do agrupamento <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.create_collation" title="sqlite3.Connection.create_collation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_collation()</span></code></a> agora pode conter qualquer caractere Unicode. Nomes de agrupamento com caracteres inválidos agora levantar <a class="reference internal" href="../library/exceptions.html#UnicodeEncodeError" title="UnicodeEncodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code></a> em vez de <a class="reference internal" href="../library/sqlite3.html#sqlite3.ProgrammingError" title="sqlite3.ProgrammingError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">sqlite3.ProgrammingError</span></code></a>. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44688">bpo-44688</a>.)</p></li>
<li><p class="translated">As exceções <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> agora incluem o código de erro estendido SQLite como <a class="reference internal" href="../library/sqlite3.html#sqlite3.Error.sqlite_errorcode" title="sqlite3.Error.sqlite_errorcode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite_errorcode</span></code></a> e o nome do erro SQLite como <a class="reference internal" href="../library/sqlite3.html#sqlite3.Error.sqlite_errorname" title="sqlite3.Error.sqlite_errorname"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite_errorname</span></code></a>. (Contribuição de Aviv Palivoda, Daniel Shahaf e Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=16379">bpo-16379</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24139">bpo-24139</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.setlimit" title="sqlite3.Connection.setlimit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setlimit()</span></code></a> e <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.getlimit" title="sqlite3.Connection.getlimit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getlimit()</span></code></a> a <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a> para definir e obter limites SQLite por base de conexão. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45243">bpo-45243</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> agora define <a class="reference internal" href="../library/sqlite3.html#sqlite3.threadsafety" title="sqlite3.threadsafety"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite3.threadsafety</span></code></a> com base no modo de threading padrão com o qual a biblioteca SQLite subjacente foi compilada. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45613">bpo-45613</a>.)</p></li>
<li><p class="translated">O retorno de chamadas C <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> agora usam exceções que não podem ser levantadas se os rastreamentos de retorno de chamada estiverem habilitados. Os usuários agora podem registrar um <a class="reference internal" href="../library/sys.html#sys.unraisablehook" title="sys.unraisablehook"><code class="xref py py-func docutils literal notranslate"><span class="pre">unraisable</span> <span class="pre">hook</span> <span class="pre">handler</span></code></a> para melhorar sua experiência de depuração. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45828">bpo-45828</a>.)</p></li>
<li><p class="translated">A busca por rollback não levanta mais <a class="reference internal" href="../library/sqlite3.html#sqlite3.InterfaceError" title="sqlite3.InterfaceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InterfaceError</span></code></a>. Em vez disso, deixamos para a biblioteca SQLite lidar com esses casos. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44092">bpo-44092</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.serialize" title="sqlite3.Connection.serialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">serialize()</span></code></a> e <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.deserialize" title="sqlite3.Connection.deserialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">deserialize()</span></code></a> a <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a> para serializar e desserializar bancos de dados. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41930">bpo-41930</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.create_window_function" title="sqlite3.Connection.create_window_function"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_window_function()</span></code></a> a <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a> para criar funções de janela agregadas. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34916">bpo-34916</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.blobopen" title="sqlite3.Connection.blobopen"><code class="xref py py-meth docutils literal notranslate"><span class="pre">blobopen()</span></code></a> a <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a>. <a class="reference internal" href="../library/sqlite3.html#sqlite3.Blob" title="sqlite3.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Blob</span></code></a> permite operações de E/S incrementais em blobs. (Contribuição de Aviv Palivoda e Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24905">bpo-24905</a>.)</p></li>
</ul>
</section>
<section id="string">
<span id="whatsnew311-string"></span><h3 class="translated">string<a class="headerlink" href="#string" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adiciona <a class="reference internal" href="../library/string.html#string.Template.get_identifiers" title="string.Template.get_identifiers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_identifiers()</span></code></a> e <a class="reference internal" href="../library/string.html#string.Template.is_valid" title="string.Template.is_valid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_valid()</span></code></a> a <a class="reference internal" href="../library/string.html#string.Template" title="string.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">string.Template</span></code></a>, que respectivamente retornam todos os marcadores de posição válidos e se quaisquer marcadores de posição inválidos estão presentes. (Contribuição de Ben Kehoe em <a class="reference external" href="https://github.com/python/cpython/issues/90465">gh-90465</a>.)</p></li>
</ul>
</section>
<section id="sys">
<span id="whatsnew311-sys"></span><h3 class="translated">sys<a class="headerlink" href="#sys" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a> agora deriva os campos <code class="docutils literal notranslate"><span class="pre">type</span></code> e <code class="docutils literal notranslate"><span class="pre">traceback</span></code> do <code class="docutils literal notranslate"><span class="pre">value</span></code> (a instância de exceção) de forma que quanto uma exceção é modificada enquanto está sendo tratada, são refletidos nos resultados de chamadas subsequentes para <code class="xref py py-func docutils literal notranslate"><span class="pre">exc_info()</span></code>. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/sys.html#sys.exception" title="sys.exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exception()</span></code></a> que retorna a instância de exceção ativa (equivalente a <code class="docutils literal notranslate"><span class="pre">sys.exc_info()[1]</span></code>). (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46328">bpo-46328</a>.)</p></li>
<li><p class="translated">Adiciona o sinalizador <a class="reference internal" href="../library/sys.html#sys.flags" title="sys.flags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.flags.safe_path</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/57684">gh-57684</a>.)</p></li>
</ul>
</section>
<section id="sysconfig">
<span id="whatsnew311-sysconfig"></span><h3 class="translated">sysconfig<a class="headerlink" href="#sysconfig" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Três novos <a class="reference internal" href="../library/sysconfig.html#installation-paths"><span class="std std-ref">esquemas de instalação</span></a> (<em>posix_venv</em>, <em>nt_venv</em> e <em>venv</em>) foram adicionados e são usados quando o Python cria novos ambientes virtuais ou quando está sendo executado a partir de um ambiente virtual. Os dois primeiros esquemas (<em>posix_venv</em> e <em>nt_venv</em>) são específicos do SO para não Windows e Windows, o <em>venv</em> é essencialmente um apelido para um deles de acordo com o SO em que o Python é executado. Isso é útil para distribuidores downstream que modificam <a class="reference internal" href="../library/sysconfig.html#sysconfig.get_preferred_scheme" title="sysconfig.get_preferred_scheme"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconfig.get_preferred_scheme()</span></code></a>. O código de terceiros que cria novos ambientes virtuais deve usar o novo esquema de instalação <em>venv</em> para determinar os caminhos, assim como <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a>. (Contribuição de Miro Hrončok em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45413">bpo-45413</a>.)</p></li>
</ul>
</section>
<section id="tempfile">
<span id="whatsnew311-tempfile"></span><h3 class="translated">tempfile<a class="headerlink" href="#tempfile" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Objetos <a class="reference internal" href="../library/tempfile.html#tempfile.SpooledTemporaryFile" title="tempfile.SpooledTemporaryFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpooledTemporaryFile</span></code></a> agora implementam totalmente os métodos de <a class="reference internal" href="../library/io.html#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BufferedIOBase</span></code></a> ou <a class="reference internal" href="../library/io.html#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.TextIOBase</span></code></a> (dependendo do modo de arquivo). Isso permite que eles funcionem corretamente com APIs que esperam objetos arquivo ou similares, como módulos de compactação. (Contribuição de Carey Metcalfe em <a class="reference external" href="https://github.com/python/cpython/issues/70363">gh-70363</a>.)</p></li>
</ul>
</section>
<section id="threading">
<span id="whatsnew311-threading"></span><h3 class="translated">threading<a class="headerlink" href="#threading" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">No Unix, se a função <code class="docutils literal notranslate"><span class="pre">sem_clockwait()</span></code> estiver disponível na biblioteca C (glibc 2.30 e mais recente), o método <a class="reference internal" href="../library/threading.html#threading.Lock.acquire" title="threading.Lock.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Lock.acquire()</span></code></a> agora usa o relógio monotônico (<a class="reference internal" href="../library/time.html#time.CLOCK_MONOTONIC" title="time.CLOCK_MONOTONIC"><code class="xref py py-const docutils literal notranslate"><span class="pre">time.CLOCK_MONOTONIC</span></code></a>) para o tempo limite, em vez de usar o relógio do sistema (<a class="reference internal" href="../library/time.html#time.CLOCK_REALTIME" title="time.CLOCK_REALTIME"><code class="xref py py-const docutils literal notranslate"><span class="pre">time.CLOCK_REALTIME</span></code></a>), para não ser afetado pelas alterações do relógio do sistema. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41710">bpo-41710</a>.)</p></li>
</ul>
</section>
<section id="time">
<span id="whatsnew311-time"></span><h3 class="translated">time<a class="headerlink" href="#time" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">No Unix, <a class="reference internal" href="../library/time.html#time.sleep" title="time.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.sleep()</span></code></a> agora usa a função <code class="docutils literal notranslate"><span class="pre">clock_nanosleep()</span></code> ou <code class="docutils literal notranslate"><span class="pre">nanosleep()</span></code>, se disponível, que tem uma resolução de 1 nanossegundo (10<sup>-9</sup> segundos), em vez de usar <code class="docutils literal notranslate"><span class="pre">select()</span></code> que tem uma resolução de 1 microssegundo (10<sup>-6</sup> segundos). (Contribuição de Benjamin Szőke e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21302">bpo-21302</a>.)</p></li>
<li><p class="translated">No Windows 8.1 e mais recente, <a class="reference internal" href="../library/time.html#time.sleep" title="time.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.sleep()</span></code></a> agora usa um temporizador aguardável baseado em <a class="reference external" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/kernel/high-resolution-timers">temporizadores de alta resolução</a> que tem uma resolução de 100 nanossegundos (10<sup>-7</sup> segundos). Anteriormente, tinha uma resolução de 1 milissegundo (10<sup>-3</sup> segundos). (Contribuição de Benjamin Szőke, Donghee Na, Eryk Sun e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21302">bpo-21302</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45429">bpo-45429</a>.)</p></li>
</ul>
</section>
<section id="tkinter">
<span id="whatsnew311-tkinter"></span><h3 class="translated">tkinter<a class="headerlink" href="#tkinter" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicionado o método <code class="docutils literal notranslate"><span class="pre">info_patchlevel()</span></code> que retorna a versão exata da biblioteca Tcl como uma tupla nomeada semelhante a <a class="reference internal" href="../library/sys.html#sys.version_info" title="sys.version_info"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.version_info</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://github.com/python/cpython/issues/91827">gh-91827</a>.)</p></li>
</ul>
</section>
<section id="traceback">
<span id="whatsnew311-traceback"></span><h3 class="translated">traceback<a class="headerlink" href="#traceback" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adiciona <a class="reference internal" href="../library/traceback.html#traceback.StackSummary.format_frame_summary" title="traceback.StackSummary.format_frame_summary"><code class="xref py py-func docutils literal notranslate"><span class="pre">traceback.StackSummary.format_frame_summary()</span></code></a> para permitir que os usuários substituam quais quadros aparecem no traceback e como eles são formatados. (Contribuição de Ammar Askar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44569">bpo-44569</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/traceback.html#traceback.TracebackException.print" title="traceback.TracebackException.print"><code class="xref py py-func docutils literal notranslate"><span class="pre">traceback.TracebackException.print()</span></code></a>, que imprime a instância formatada <a class="reference internal" href="../library/traceback.html#traceback.TracebackException" title="traceback.TracebackException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TracebackException</span></code></a> em um arquivo. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33809">bpo-33809</a>.)</p></li>
</ul>
</section>
<section id="typing">
<span id="whatsnew311-typing"></span><h3 class="translated">typing<a class="headerlink" href="#typing" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">Para alterações principais, veja <a class="reference internal" href="#new-feat-related-type-hints-311"><span class="std std-ref">Novos recursos relacionados a dicas de tipo</span></a>.</p>
<ul class="simple">
<li><p class="translated">Adiciona <a class="reference internal" href="../library/typing.html#typing.assert_never" title="typing.assert_never"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.assert_never()</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.Never" title="typing.Never"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Never</span></code></a>. <a class="reference internal" href="../library/typing.html#typing.assert_never" title="typing.assert_never"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.assert_never()</span></code></a> é útil para pedir a um verificador de tipo para confirmar que uma linha de código não está acessível. Em tempo de execução, ele levanta uma exceção <a class="reference internal" href="../library/exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code></a>. (Contribuição de Jelle Zijlstra em <a class="reference external" href="https://github.com/python/cpython/issues/90633">gh-90633</a>.)</p></li>
<li><p class="translated">Adiciona <a class="reference internal" href="../library/typing.html#typing.reveal_type" title="typing.reveal_type"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.reveal_type()</span></code></a>. Isso é útil para perguntar a um verificador de tipo qual tipo ele inferiu para uma determinada expressão. Em tempo de execução imprime o tipo do valor recebido. (Contribuição de Jelle Zijlstra em <a class="reference external" href="https://github.com/python/cpython/issues/90572">gh-90572</a>.)</p></li>
<li><p class="translated">Adicione <a class="reference internal" href="../library/typing.html#typing.assert_type" title="typing.assert_type"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.assert_type()</span></code></a>. Isso é útil para solicitar a um verificador de tipos que confirme se o tipo que ele inferiu para uma determinada expressão corresponde ao tipo fornecido. Em tempo de execução ele simplesmente retorna o valor recebido. (Contribuição de Jelle Zijlstra em <a class="reference external" href="https://github.com/python/cpython/issues/90638">gh-90638</a>.)</p></li>
<li><p class="translated">Os tipos <a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a> agora podem ser genéricos. (Contribuição de Samodya Abeysiriwardane em <a class="reference external" href="https://github.com/python/cpython/issues/89026">gh-89026</a>.)</p></li>
<li><p class="translated">Os tipos <a class="reference internal" href="../library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedTuple</span></code></a> agora podem ser genéricos. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43923">bpo-43923</a>.)</p></li>
<li><p class="translated">Permite criar subclasse de <a class="reference internal" href="../library/typing.html#typing.Any" title="typing.Any"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Any</span></code></a>. Isso é útil para evitar erros de verificador de tipo relacionados a classes altamente dinâmicas, como mocks. (Contribuição de Shantanu Jain em <a class="reference external" href="https://github.com/python/cpython/issues/91154">gh-91154</a>.)</p></li>
<li><p class="translated">O decorador <a class="reference internal" href="../library/typing.html#typing.final" title="typing.final"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.final()</span></code></a> agora define o <code class="docutils literal notranslate"><span class="pre">__final__</span></code> atribuído no objeto decorado. (Contribuição de Jelle Zijlstra em <a class="reference external" href="https://github.com/python/cpython/issues/90500">gh-90500</a>.)</p></li>
<li><p class="translated">A função <a class="reference internal" href="../library/typing.html#typing.get_overloads" title="typing.get_overloads"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_overloads()</span></code></a> pode ser usada para introspecção das sobrecargas de uma função. <a class="reference internal" href="../library/typing.html#typing.clear_overloads" title="typing.clear_overloads"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.clear_overloads()</span></code></a> pode ser usado para limpar todas as sobrecargas registradas de uma função. (Contribuição de Jelle Zijlstra em <a class="reference external" href="https://github.com/python/cpython/issues/89263">gh-89263</a>.)</p></li>
<li><p class="translated">O método <a class="reference internal" href="../reference/datamodel.html#object.__init__" title="object.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code></a> das subclasses <a class="reference internal" href="../library/typing.html#typing.Protocol" title="typing.Protocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></a> agora é preservado. (Contribuição de Adrian Garcia Badarasco em <a class="reference external" href="https://github.com/python/cpython/issues/88970">gh-88970</a>.)</p></li>
<li><p class="translated">A representação de tipos de tupla vazias (<code class="docutils literal notranslate"><span class="pre">Tuple[()]</span></code>) está simplificada. Isso afeta a introspecção, por exemplo. <code class="docutils literal notranslate"><span class="pre">get_args(Tuple[()])</span></code> agora é avaliado como <code class="docutils literal notranslate"><span class="pre">()</span></code> em vez de <code class="docutils literal notranslate"><span class="pre">((),)</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://github.com/python/cpython/issues/91137">gh-91137</a>.)</p></li>
<li><p class="translated">Afrouxa os requisitos de tempo de execução para anotações de tipo removendo a verificação chamável na função privada <code class="docutils literal notranslate"><span class="pre">typing._type_check</span></code>. (Contribuição de Gregory Beauregard em <a class="reference external" href="https://github.com/python/cpython/issues/90802">gh-90802</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/typing.html#typing.get_type_hints" title="typing.get_type_hints"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_type_hints()</span></code></a> agora tem suporte à avaliação de strings como referências diretas em <a class="reference internal" href="../library/stdtypes.html#types-genericalias"><span class="std std-ref">apelidos genéricos da PEP 585</span></a>. (Contribuição de Niklas Rosenstein em <a class="reference external" href="https://github.com/python/cpython/issues/85542">gh-85542</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/typing.html#typing.get_type_hints" title="typing.get_type_hints"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_type_hints()</span></code></a> não adiciona mais <a class="reference internal" href="../library/typing.html#typing.Optional" title="typing.Optional"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a> aos parâmetros com <code class="docutils literal notranslate"><span class="pre">None</span></code> como padrão. (Contribuição de Nikita Sobolev em <a class="reference external" href="https://github.com/python/cpython/issues/90353">gh-90353</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/typing.html#typing.get_type_hints" title="typing.get_type_hints"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_type_hints()</span></code></a> agora tem suporte à avaliação de anotações <a class="reference internal" href="../library/typing.html#typing.ClassVar" title="typing.ClassVar"><code class="xref py py-data docutils literal notranslate"><span class="pre">ClassVar</span></code></a> de strings simples. (Contribuição de Gregory Beauregard em <a class="reference external" href="https://github.com/python/cpython/issues/90711">gh-90711</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/typing.html#typing.no_type_check" title="typing.no_type_check"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.no_type_check()</span></code></a> não modifica mais classes e funções externas. Agora também marca corretamente os métodos de classe para não serem verificados quanto ao tipo. (Contribuição de Nikita Sobolev em <a class="reference external" href="https://github.com/python/cpython/issues/90729">gh-90729</a>.)</p></li>
</ul>
</section>
<section id="unicodedata">
<span id="whatsnew311-unicodedata"></span><h3 class="translated">unicodedata<a class="headerlink" href="#unicodedata" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">O banco de dados Unicode foi atualizado para a versão 14.0.0. (Contribuição de Benjamin Peterson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45190">bpo-45190</a>).</p></li>
</ul>
</section>
<section id="unittest">
<span id="whatsnew311-unittest"></span><h3 class="translated">unittest<a class="headerlink" href="#unittest" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicionados os métodos <a class="reference internal" href="../library/unittest.html#unittest.TestCase.enterContext" title="unittest.TestCase.enterContext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enterContext()</span></code></a> e <a class="reference internal" href="../library/unittest.html#unittest.TestCase.enterClassContext" title="unittest.TestCase.enterClassContext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enterClassContext()</span></code></a> da classe <a class="reference internal" href="../library/unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></a>, método <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase.enterAsyncContext" title="unittest.IsolatedAsyncioTestCase.enterAsyncContext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enterAsyncContext()</span></code></a> da classe <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase" title="unittest.IsolatedAsyncioTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsolatedAsyncioTestCase</span></code></a> e a função <a class="reference internal" href="../library/unittest.html#unittest.enterModuleContext" title="unittest.enterModuleContext"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.enterModuleContext()</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45046">bpo-45046</a>.)</p></li>
</ul>
</section>
<section id="venv">
<span id="whatsnew311-venv"></span><h3 class="translated">venv<a class="headerlink" href="#venv" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Quando novos ambientes virtuais Python são criados, o <a class="reference internal" href="../library/sysconfig.html#installation-paths"><span class="std std-ref">esquema de instalação do sysconfig</span></a> do <em>venv</em> é usado para determinar os caminhos dentro do ambiente. Quando o Python é executado em um ambiente virtual, o mesmo esquema de instalação é o padrão. Isso significa que os distribuidores downstream podem alterar o esquema de instalação padrão do sysconfig sem alterar o comportamento dos ambientes virtuais. O código de terceiros que também cria novos ambientes virtuais deve fazer o mesmo. (Contribuição de Miro Hrončok em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45413">bpo-45413</a>.)</p></li>
</ul>
</section>
<section id="warnings">
<span id="whatsnew311-warnings"></span><h3 class="translated">avisos<a class="headerlink" href="#warnings" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/warnings.html#warnings.catch_warnings" title="warnings.catch_warnings"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.catch_warnings()</span></code></a> agora aceita argumentos para <a class="reference internal" href="../library/warnings.html#warnings.simplefilter" title="warnings.simplefilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.simplefilter()</span></code></a>, fornecendo uma maneira mais concisa de ignorar localmente avisos ou convertê-los em erros. (Contribuição de Zac Hatfield-Dodds em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47074">bpo-47074</a>.)</p></li>
</ul>
</section>
<section id="zipfile">
<span id="whatsnew311-zipfile"></span><h3 class="translated">zipfile<a class="headerlink" href="#zipfile" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Adicionado suporte para especificar a codificação de nome de membro para leitura de metadados em um diretório <a class="reference internal" href="../library/zipfile.html#zipfile.ZipFile" title="zipfile.ZipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZipFile</span></code></a> e cabeçalhos de arquivo. (Contribuição de Stephen J. Turnbull e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28080">bpo-28080</a>.)</p></li>
<li><p class="translated">Adicionado <a class="reference internal" href="../library/zipfile.html#zipfile.ZipFile.mkdir" title="zipfile.ZipFile.mkdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ZipFile.mkdir()</span></code></a> para criar novos diretórios dentro de arquivos ZIP. (Contribuição de Sam Ezeh em <a class="reference external" href="https://github.com/python/cpython/issues/49083">gh-49083</a>.)</p></li>
<li><p class="translated">Adicionado <a class="reference internal" href="../library/zipfile.html#zipfile.Path.stem" title="zipfile.Path.stem"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stem</span></code></a>, <a class="reference internal" href="../library/zipfile.html#zipfile.Path.suffix" title="zipfile.Path.suffix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">suffix</span></code></a> e <a class="reference internal" href="../library/zipfile.html#zipfile.Path.suffixes" title="zipfile.Path.suffixes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">suffixes</span></code></a> a <a class="reference internal" href="../library/zipfile.html#zipfile.Path" title="zipfile.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipfile.Path</span></code></a>. (Contribuição de Miguel Brito em <a class="reference external" href="https://github.com/python/cpython/issues/88261">gh-88261</a>.)</p></li>
</ul>
</section>
</section>
<section id="optimizations">
<span id="whatsnew311-optimizations"></span><h2 class="translated">Otimizações<a class="headerlink" href="#optimizations" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">Esta seção cobre otimizações específicas independentes do projeto <a class="reference internal" href="#whatsnew311-faster-cpython"><span class="std std-ref">CPython mais rápido</span></a>, que é abordado em sua própria seção.</p>
<ul class="simple">
<li><p class="translated">O compilador agora otimiza a <a class="reference internal" href="../library/stdtypes.html#old-string-formatting"><span class="std std-ref">formatação simples de % no estilo printf</span></a> em literais de string contendo apenas os códigos de formato <code class="docutils literal notranslate"><span class="pre">%s</span></code>, <code class="docutils literal notranslate"><span class="pre">%r</span></code> e <code class="docutils literal notranslate"><span class="pre">%a</span></code> e a torna tão rápida quanto uma expressão <a class="reference internal" href="../glossary.html#term-f-string"><span class="xref std std-term">f-string</span></a> correspondente. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28307">bpo-28307</a>.)</p></li>
<li><p class="translated">A divisão inteira (<code class="docutils literal notranslate"><span class="pre">//</span></code>) é melhor ajustada para otimização por compiladores. Agora é cerca de 20% mais rápido em x86-64 ao dividir um <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> por um valor menor que <code class="docutils literal notranslate"><span class="pre">2**30</span></code>. (Contribuição de Gregory P. Smith e Tim Peters em <a class="reference external" href="https://github.com/python/cpython/issues/90564">gh-90564</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/functions.html#sum" title="sum"><code class="xref py py-func docutils literal notranslate"><span class="pre">sum()</span></code></a> agora é quase 30% mais rápida para inteiros menores que <code class="docutils literal notranslate"><span class="pre">2**30</span></code>. (Contribuição de Stefan Behnel em <a class="reference external" href="https://github.com/python/cpython/issues/68264">gh-68264</a>.)</p></li>
<li><p class="translated">O redimensionamento de listas é simplificado para o caso comum, acelerando <code class="xref py py-meth docutils literal notranslate"><span class="pre">list.append()</span></code> em ≈15% e <a class="reference internal" href="../glossary.html#term-list-comprehension"><span class="xref std std-term">compreensões de lista</span></a> em até 20-30% (Contribuição de Dennis Sweeney em <a class="reference external" href="https://github.com/python/cpython/issues/91165">gh-91165</a>.)</p></li>
<li><p class="translated">Dicionários não armazenam valores de hash quando todas as chaves são objetos Unicode, diminuindo o tamanho de <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>. Por exemplo, <code class="docutils literal notranslate"><span class="pre">sys.getsizeof(dict.fromkeys(&quot;abcdefg&quot;))</span></code> foi reduzido de 352 bytes para 272 bytes (23% menor) em plataformas de 64 bits. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46845">bpo-46845</a>.)</p></li>
<li><p class="translated">Usar <a class="reference internal" href="../library/asyncio-protocol.html#asyncio.DatagramProtocol" title="asyncio.DatagramProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.DatagramProtocol</span></code></a> agora é muito mais rápido ao transferir arquivos grandes por UDP, com velocidades mais de 100 vezes maiores para um arquivo de ≈60 MiB. (Contribuição de msoxzw em <a class="reference external" href="https://github.com/python/cpython/issues/91487">gh-91487</a>.)</p></li>
<li><p class="translated">As funções <a class="reference internal" href="../library/math.html#math.comb" title="math.comb"><code class="xref py py-func docutils literal notranslate"><span class="pre">comb()</span></code></a> e <a class="reference internal" href="../library/math.html#math.perm" title="math.perm"><code class="xref py py-func docutils literal notranslate"><span class="pre">perm()</span></code></a> de <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a> são agora ≈10 vezes mais rápidas para argumentos grandes (com uma aceleração maior para <em>k</em> maiores). (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37295">bpo-37295</a>.)</p></li>
<li><p class="translated">As funções <a class="reference internal" href="../library/statistics.html#statistics.mean" title="statistics.mean"><code class="xref py py-func docutils literal notranslate"><span class="pre">mean()</span></code></a>, <a class="reference internal" href="../library/statistics.html#statistics.variance" title="statistics.variance"><code class="xref py py-func docutils literal notranslate"><span class="pre">variance()</span></code></a> e <a class="reference internal" href="../library/statistics.html#statistics.stdev" title="statistics.stdev"><code class="xref py py-func docutils literal notranslate"><span class="pre">stdev()</span></code></a> do <a class="reference internal" href="../library/statistics.html#module-statistics" title="statistics: Mathematical statistics functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">statistics</span></code></a> agora consomem iteradores em uma passagem em vez de convertê-los em uma <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> primeiro. Isso é duas vezes mais rápido e pode economizar memória de forma substancial. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://github.com/python/cpython/issues/90415">gh-90415</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/unicodedata.html#unicodedata.normalize" title="unicodedata.normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">unicodedata.normalize()</span></code></a> agora normaliza strings de puro ASCII em tempo constante. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44987">bpo-44987</a>.)</p></li>
</ul>
</section>
<section id="faster-cpython">
<span id="whatsnew311-faster-cpython"></span><h2 class="translated">CPython mais rápido<a class="headerlink" href="#faster-cpython" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">O CPython 3.11 é em média <a class="reference external" href="https://github.com/faster-cpython/ideas#published-results">25% mais rápido</a> que o CPython 3.10 medido com o conjunto de ferramentas de benchmarks <a class="reference external" href="https://github.com/python/pyperformance">pyperformance</a>, quando compilado com GCC no Ubuntu Linux. Dependendo da sua carga de trabalho, a aceleração geral pode ser de 10 a 60%.</p>
<p class="translated">Este projeto se concentra em duas áreas principais em Python: <a class="reference internal" href="#whatsnew311-faster-startup"><span class="std std-ref">Inicialização mais rápida</span></a> e <a class="reference internal" href="#whatsnew311-faster-runtime"><span class="std std-ref">Tempo de execução mais rápido</span></a>. Otimizações que não são abordadas neste projeto estão listadas em <a class="reference internal" href="#whatsnew311-optimizations"><span class="std std-ref">Otimizações</span></a>.</p>
<section id="faster-startup">
<span id="whatsnew311-faster-startup"></span><h3 class="translated">Inicialização mais rápida<a class="headerlink" href="#faster-startup" title="Link para este cabeçalho">¶</a></h3>
<section id="frozen-imports-static-code-objects">
<span id="whatsnew311-faster-imports"></span><h4 class="translated">Importações congeladas/objetos de código estático<a class="headerlink" href="#frozen-imports-static-code-objects" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">O Python armazena o <a class="reference internal" href="../glossary.html#term-bytecode"><span class="xref std std-term">bytecode</span></a> no diretório <a class="reference internal" href="../tutorial/modules.html#tut-pycache"><span class="std std-ref">__pycache__</span></a> para acelerar o carregamento do módulo.</p>
<p class="translated">Anteriormente na versão 3.10, a execução do módulo Python era assim:</p>
<div class="translated highlight-text notranslate"><div class="highlight"><pre><span></span>Read __pycache__ -&gt; Unmarshal -&gt; Heap allocated code object -&gt; Evaluate
</pre></div>
</div>
<p class="translated">No Python 3.11, os principais módulos essenciais para a inicialização do Python são “congelados”. Isso significa que seus <a class="reference internal" href="../c-api/code.html#codeobjects"><span class="std std-ref">Objetos código</span></a> (e bytecode) são alocados estaticamente pelo interpretador. Isso reduz as etapas no processo de execução do módulo para isso:</p>
<div class="translated highlight-text notranslate"><div class="highlight"><pre><span></span>Statically allocated code object -&gt; Evaluate
</pre></div>
</div>
<p class="translated">A inicialização do interpretador agora é 10-15% mais rápida no Python 3.11. Isso tem um grande impacto para programas de execução curta usando Python.</p>
<p class="translated">(Contribuição de Eric Snow, Guido van Rossum e Kumar Aditya em vários issues.)</p>
</section>
</section>
<section id="faster-runtime">
<span id="whatsnew311-faster-runtime"></span><h3 class="translated">Tempo de execução mais rápido<a class="headerlink" href="#faster-runtime" title="Link para este cabeçalho">¶</a></h3>
<section id="cheaper-lazy-python-frames">
<span id="whatsnew311-lazy-python-frames"></span><h4 class="translated">Quadros Python menos custosos e mais preguiçosos<a class="headerlink" href="#cheaper-lazy-python-frames" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">Os quadros do Python, contendo informações de execução, são criados sempre que o Python chama uma função do Python. A seguir estão as novas otimizações de quadro:</p>
<ul class="simple">
<li><p class="translated">Simplificado o processo de criação do quadro.</p></li>
<li><p class="translated">Alocação de memória evitada reutilizando generosamente o espaço do quadro na pilha C.</p></li>
<li><p class="translated">Simplificada a estrutura interna do quadro para conter apenas as informações essenciais. Os quadros anteriormente continham informações extras de depuração e gerenciamento de memória.</p></li>
</ul>
<p class="translated">Os antigos <a class="reference internal" href="../reference/datamodel.html#frame-objects"><span class="std std-ref">objetos quadros</span></a> agora são criados apenas quando solicitados por depuradores ou por funções de introspecção do Python, como <a class="reference internal" href="../library/sys.html#sys._getframe" title="sys._getframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys._getframe()</span></code></a> e <a class="reference internal" href="../library/inspect.html#inspect.currentframe" title="inspect.currentframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.currentframe()</span></code></a>. Para a maioria dos códigos de usuário, nenhum objeto quadro é criado. Como resultado, quase todas as chamadas de funções do Python aceleraram significativamente. Medimos uma aceleração de 3 a 7% no desempenho do py.</p>
<p class="translated">(Contribuição de Mark Shannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44590">bpo-44590</a>.)</p>
</section>
<section id="inlined-python-function-calls">
<span id="whatsnew311-inline-calls"></span><span id="inline-calls"></span><h4 class="translated">Chamadas de função Python em linha<a class="headerlink" href="#inlined-python-function-calls" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">Durante a chamada de uma função Python, o Python chamará uma função C de avaliação para interpretar o código dessa função. Isso efetivamente limita a recursão Python pura ao que é seguro para a pilha C.</p>
<p class="translated">No 3.11, quando o CPython detecta o código Python chamando outra função Python, ele configura um novo quadro e “pula” para o novo código dentro do novo quadro. Isso evita chamar a função de interpretação C completamente.</p>
<p class="translated">A maioria das chamadas de função do Python agora não consome espaço de pilha C, acelerando-as. Em funções recursivas simples como fibonacci ou fatorial, observamos um aumento de velocidade de 1,7x. Isso também significa que as funções recursivas podem recursar significativamente mais profundamente (se o usuário aumentar o limite de recursão com <a class="reference internal" href="../library/sys.html#sys.setrecursionlimit" title="sys.setrecursionlimit"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.setrecursionlimit()</span></code></a>). Medimos uma melhoria de 1 a 3% no desempenho do py.</p>
<p class="translated">(Contribuição de Pablo Galindo e Mark Shannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45256">bpo-45256</a>.)</p>
</section>
<section id="pep-659-specializing-adaptive-interpreter">
<span id="whatsnew311-pep659"></span><h4 class="translated">PEP 659: Interpretador adaptativo especializado<a class="headerlink" href="#pep-659-specializing-adaptive-interpreter" title="Link para este cabeçalho">¶</a></h4>
<p class="translated"><span class="target" id="index-115"></span><a class="pep reference external" href="https://peps.python.org/pep-0659/"><strong>PEP 659</strong></a> é uma das partes principais do projeto Faster CPython. A ideia geral é que, embora o Python seja uma linguagem dinâmica, a maior parte do código possui regiões onde objetos e tipos raramente mudam. Este conceito é conhecido como <em>estabilidade de tipo</em>.</p>
<p class="translated">Em tempo de execução, o Python tentará procurar padrões comuns e estabilidade de tipo no código em execução. O Python substituirá a operação atual por uma mais especializada. Essa operação especializada usa caminhos rápidos disponíveis apenas para esses casos/tipos de uso, que geralmente superam suas contrapartes genéricas. Isso também traz outro conceito chamado <em>cache inline</em>, onde o Python armazena em cache os resultados de operações caras diretamente no <a class="reference internal" href="../glossary.html#term-bytecode"><span class="xref std std-term">bytecode</span></a>.</p>
<p class="translated">O especializador também combinará certos pares de instruções comuns em uma superinstrução, reduzindo a sobrecarga durante a execução.</p>
<p class="translated">O Python só se especializará quando vir um código “quente” (executado várias vezes). Isso evita que o Python perca tempo com código de execução única. O Python também pode se especializar quando o código é muito dinâmico ou quando o uso muda. A especialização é tentada periodicamente e as tentativas de especialização não são muito caras, permitindo que a especialização se adapte às novas circunstâncias.</p>
<p class="translated">(PEP escrita por Mark Shannon, com ideias inspiradas por Stefan Brunthaler. Veja <span class="target" id="index-116"></span><a class="pep reference external" href="https://peps.python.org/pep-0659/"><strong>PEP 659</strong></a> para mais informações. Implementação por Mark Shannon e Brandt Bucher, com ajuda adicional de Irit Katriel e Dennis Sweeney.)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p class="translated">Operação</p></th>
<th class="head"><p class="translated">Forma</p></th>
<th class="head"><p class="translated">Especialização</p></th>
<th class="head"><p class="translated">Aceleração da operação</p></th>
<th class="head"><p class="translated">Contribuidor(es)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p class="translated">Operações binárias</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">x</span></code></p>
<p class="translated"><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">x</span></code></p>
<p class="translated"><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">x</span></code></p>
</td>
<td><p class="translated">Adicionar, multiplicar e subtrair binários para tipos comuns como <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> usam caminhos rápidos personalizados para seus tipos subjacentes.</p></td>
<td><p class="translated">10%</p></td>
<td><p class="translated">Mark Shannon,
Donghee Na,
Brandt Bucher,
Dennis Sweeney</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">Subscrição</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">a[i]</span></code></p></td>
<td><p class="translated">Subscrever tipos contêineres como <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> indexam diretamente as estruturas de dados subjacentes.</p>
<p class="translated">Subscrever <a class="reference internal" href="../reference/datamodel.html#object.__getitem__" title="object.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code></a> personalizado também é inserido em linha de forma similar a <a class="reference internal" href="#inline-calls"><span class="std std-ref">Chamadas de função Python em linha</span></a>.</p>
</td>
<td><p class="translated">10-25%</p></td>
<td><p class="translated">Irit Katriel,
Mark Shannon</p></td>
</tr>
<tr class="row-even"><td><p class="translated">Armazenar com subscrição</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">a[i]</span> <span class="pre">=</span> <span class="pre">z</span></code></p></td>
<td><p class="translated">Similar à especialização de subscrição acima.</p></td>
<td><p class="translated">10-25%</p></td>
<td><p class="translated">Dennis Sweeney</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">Chamadas</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">f(arg)</span></code></p>
<p class="translated"><code class="docutils literal notranslate"><span class="pre">C(arg)</span></code></p>
</td>
<td><p class="translated">Chamadas para funções e tipos (C) embutidos comuns como <a class="reference internal" href="../library/functions.html#len" title="len"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> chamam diretamente sua versão C subjacente. Isso evita passar pela convenção de chamada interna.</p></td>
<td><p class="translated">20%</p></td>
<td><p class="translated">Mark Shannon,
Ken Jin</p></td>
</tr>
<tr class="row-even"><td><p class="translated">Carregar variável global</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">print</span></code></p>
<p class="translated"><code class="docutils literal notranslate"><span class="pre">len</span></code></p>
</td>
<td><p class="translated">O índice do objeto no espaço de nomes globais/embutidas é armazenado em cache. Carregar globais e embutidas requer zero pesquisas de espaço de nomes.</p></td>
<td><p class="translated"><a class="footnote-reference brackets" href="#load-global" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p class="translated">Mark Shannon</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">Carregar atributo</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">o.attr</span></code></p></td>
<td><p class="translated">Semelhante ao carregamento de variáveis globais. O índice do atributo dentro do espaço de nomes da classe/objeto é armazenado em cache. Na maioria dos casos, o carregamento de atributos exigirá zero pesquisas de espaço de nomes.</p></td>
<td><p class="translated"><a class="footnote-reference brackets" href="#load-attr" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p></td>
<td><p class="translated">Mark Shannon</p></td>
</tr>
<tr class="row-even"><td><p class="translated">Carregar métodos para chamada</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">o.meth()</span></code></p></td>
<td><p class="translated">O endereço real do método é armazenado em cache. O carregamento de método agora não tem pesquisas de espaço de nomes – mesmo para classes com longas cadeias de herança.</p></td>
<td><p class="translated">10-20%</p></td>
<td><p class="translated">Ken Jin,
Mark Shannon</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">Armazenar atributo</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">o.attr</span> <span class="pre">=</span> <span class="pre">z</span></code></p></td>
<td><p class="translated">Semelhante à otimização de carregamento de atributos.</p></td>
<td><p class="translated">2% no pyperformance</p></td>
<td><p class="translated">Mark Shannon</p></td>
</tr>
<tr class="row-even"><td><p class="translated">Desempacotar sequência</p></td>
<td><p class="translated"><code class="docutils literal notranslate"><span class="pre">*seq</span></code></p></td>
<td><p class="translated">Especializado para contêineres comuns como <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>. Evita convenção de chamada interna.</p></td>
<td><p class="translated">8%</p></td>
<td><p class="translated">Brandt Bucher</p></td>
</tr>
</tbody>
</table>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="load-global" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p class="translated">Uma otimização semelhante já existia desde o Python 3.8. O 3.11 é especializado em mais formas e reduz algumas despesas gerais.</p>
</aside>
<aside class="footnote brackets" id="load-attr" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p class="translated">Uma otimização semelhante já existia desde o Python 3.10. 3.11 é especializado em mais formas. Além disso, todos os carregamentos de atributos devem ser acelerados por <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45947">bpo-45947</a>.</p>
</aside>
</aside>
</section>
</section>
<section id="misc">
<span id="whatsnew311-faster-cpython-misc"></span><h3 class="translated">Diversos<a class="headerlink" href="#misc" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Os objetos agora requerem menos memória devido aos espaços de nomes de objetos criados lentamente. Seus dicionários de espaços de nomes agora também compartilham chaves mais livremente. (Contribuição de Mark Shannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45340">bpo-45340</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40116">bpo-40116</a>.)</p></li>
<li><p class="translated">Exceções de “custo zero” estão implementadas, eliminando o custo das instruções <a class="reference internal" href="../reference/compound_stmts.html#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> quando nenhuma exceção é gerada. (Contribuição de Mark Shannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40222">bpo-40222</a>.)</p></li>
<li><p class="translated">Uma representação mais concisa de exceções no interpretador reduziu o tempo necessário para capturar uma exceção em cerca de 10%. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li>
<li><p class="translated">O mecanismo de correspondência de expressão regular do <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> foi parcialmente refatorado e agora usa <em>gotos</em> computados (ou “código encadeado”) em plataformas suportadas. Como resultado, o Python 3.11 executa os <a class="reference external" href="https://pyperformance.readthedocs.io/benchmarks.html#regex-dna">benchmarks de expressão regular do pyperformance</a> até 10% mais rápido que o Python 3.10. (Contribuição de Brandt Bucher em <a class="reference external" href="https://github.com/python/cpython/issues/91404">gh-91404</a>.)</p></li>
</ul>
</section>
<section id="faq">
<span id="whatsnew311-faster-cpython-faq"></span><h3 class="translated">FAQ<a class="headerlink" href="#faq" title="Link para este cabeçalho">¶</a></h3>
<section id="how-should-i-write-my-code-to-utilize-these-speedups">
<span id="faster-cpython-faq-my-code"></span><h4 class="translated">Como devo escrever meu código para utilizar esses aceleradores?<a class="headerlink" href="#how-should-i-write-my-code-to-utilize-these-speedups" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">Escrever código pythônico que segue as melhores práticas comuns; você não precisa alterar seu código. O projeto Faster CPython otimiza para padrões de código comuns que observamos.</p>
</section>
<section id="will-cpython-3-11-use-more-memory">
<span id="faster-cpython-faq-memory"></span><h4 class="translated">O CPython 3.11 usará mais memória?<a class="headerlink" href="#will-cpython-3-11-use-more-memory" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">Talvez não; não esperamos que o uso de memória exceda 20% a mais que 3.10. Isso é compensado por otimizações de memória para objetos quadro e dicionários de objetos, conforme mencionado acima.</p>
</section>
<section id="i-don-t-see-any-speedups-in-my-workload-why">
<span id="faster-cpython-ymmv"></span><h4 class="translated">Não vejo nenhuma aceleração em minha carga de trabalho. Por que?<a class="headerlink" href="#i-don-t-see-any-speedups-in-my-workload-why" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">Certos códigos não terão benefícios perceptíveis. Se seu código passa a maior parte do tempo em operações de E/S ou já faz a maior parte de sua computação em uma biblioteca de extensão C como NumPy, não haverá acelerações significativas. Atualmente, esse projeto é o que mais beneficia as cargas de trabalho Python puro.</p>
<p class="translated">Além disso, os valores de desempenho py são uma média geométrica. Mesmo dentro dos benchmarks de pyperformance, alguns benchmarks desaceleraram um pouco, enquanto outros aceleraram quase 2x!</p>
</section>
<section id="is-there-a-jit-compiler">
<span id="faster-cpython-jit"></span><h4 class="translated">Existe um compilador JIT?<a class="headerlink" href="#is-there-a-jit-compiler" title="Link para este cabeçalho">¶</a></h4>
<p class="translated">Não. Ainda estamos explorando outras otimizações.</p>
</section>
</section>
<section id="about">
<span id="whatsnew311-faster-cpython-about"></span><h3 class="translated">Sobre<a class="headerlink" href="#about" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">O Faster CPython explora otimizações para o <a class="reference internal" href="../glossary.html#term-CPython"><span class="xref std std-term">CPython</span></a>. A equipe principal é financiada pela Microsoft para trabalhar nisso em tempo integral. Pablo Galindo Salgado também é financiado pela Bloomberg LP para trabalhar no projeto em tempo parcial. Finalmente, muitos colaboradores são voluntários da comunidade.</p>
</section>
</section>
<section id="cpython-bytecode-changes">
<span id="whatsnew311-bytecode-changes"></span><h2 class="translated">Alterações de bytecode do CPython<a class="headerlink" href="#cpython-bytecode-changes" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">O bytecode agora contém entradas de cache inline, que assumem a forma das instruções recém-adicionadas <a class="reference internal" href="../library/dis.html#opcode-CACHE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CACHE</span></code></a>. Muitos códigos de operações, ou <em>opcodes</em>,  esperam ser seguidos por um número exato de caches e instruem o interpretador a ignorá-los em tempo de execução. Os caches preenchidos podem parecer instruções arbitrárias, portanto, muito cuidado deve ser tomado ao ler ou modificar o bytecode adaptativo bruto que contém dados acelerados.</p>
<section id="new-opcodes">
<span id="whatsnew311-added-opcodes"></span><h3 class="translated">Novos opcodes<a class="headerlink" href="#new-opcodes" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">ASYNC_GEN_WRAP</span></code>, <a class="reference internal" href="../library/dis.html#opcode-RETURN_GENERATOR"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">RETURN_GENERATOR</span></code></a> e <a class="reference internal" href="../library/dis.html#opcode-SEND"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">SEND</span></code></a>, usados em geradores e corrotinas.</p></li>
<li><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-COPY_FREE_VARS"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">COPY_FREE_VARS</span></code></a>, que evita precisar de código especial no lado do chamado para fechamentos.</p></li>
<li><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-JUMP_BACKWARD_NO_INTERRUPT"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_BACKWARD_NO_INTERRUPT</span></code></a>, para usasr em certos loops nos quais o tratamento de interrupções é indesejável.</p></li>
<li><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-MAKE_CELL"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">MAKE_CELL</span></code></a>, para criar <a class="reference internal" href="../c-api/cell.html#cell-objects"><span class="std std-ref">Objeto célula</span></a>.</p></li>
<li><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-CHECK_EG_MATCH"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CHECK_EG_MATCH</span></code></a> e <code class="xref std std-opcode docutils literal notranslate"><span class="pre">PREP_RERAISE_STAR</span></code>, para manipular <a class="reference internal" href="#whatsnew311-pep654"><span class="std std-ref">novos grupos de exceção e except*</span></a>, adicionados na <span class="target" id="index-117"></span><a class="pep reference external" href="https://peps.python.org/pep-0654/"><strong>PEP 654</strong></a>.</p></li>
<li><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-PUSH_EXC_INFO"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">PUSH_EXC_INFO</span></code></a>, para uso em manipuladores de exceção.</p></li>
<li><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-RESUME"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">RESUME</span></code></a>, um <em>no-op</em>, para rastreamento interno, depuração e verificações de otimização.</p></li>
</ul>
</section>
<section id="replaced-opcodes">
<span id="whatsnew311-replaced-opcodes"></span><h3 class="translated">Opcodes substituídos<a class="headerlink" href="#replaced-opcodes" title="Link para este cabeçalho">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p class="translated">Opcode(s) substituído(s)</p></th>
<th class="head"><p class="translated">Novo(s) opcode(s)</p></th>
<th class="head"><p class="translated">Notas</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">BINARY_*</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">INPLACE_*</span></code></div>
</div>
</td>
<td><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-BINARY_OP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">BINARY_OP</span></code></a></p></td>
<td><p class="translated">Substituiu todos os opcodes numéricos binários/no local por um único opcode</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_FUNCTION</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_FUNCTION_KW</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_METHOD</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="translated line"><a class="reference internal" href="../library/dis.html#opcode-CALL"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL</span></code></a></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">KW_NAMES</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">PRECALL</span></code></div>
<div class="translated line"><a class="reference internal" href="../library/dis.html#opcode-PUSH_NULL"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">PUSH_NULL</span></code></a></div>
</div>
</td>
<td><p class="translated">Separa a mudança de argumento para métodos da manipulação de argumentos nomeados; permite uma melhor especialização dos atendimentos</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">DUP_TOP</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">DUP_TOP_TWO</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">ROT_TWO</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">ROT_THREE</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">ROT_FOUR</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">ROT_N</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="translated line"><a class="reference internal" href="../library/dis.html#opcode-COPY"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">COPY</span></code></a></div>
<div class="translated line"><a class="reference internal" href="../library/dis.html#opcode-SWAP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">SWAP</span></code></a></div>
</div>
</td>
<td><p class="translated">Instruções de manipulação de pilha</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_NOT_EXC_MATCH</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="translated line"><a class="reference internal" href="../library/dis.html#opcode-CHECK_EXC_MATCH"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CHECK_EXC_MATCH</span></code></a></div>
</div>
</td>
<td><p class="translated">Agora efetua verificações, mas não pula</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_ABSOLUTE</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_IF_FALSE</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_IF_TRUE</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="translated line"><a class="reference internal" href="../library/dis.html#opcode-JUMP_BACKWARD"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_BACKWARD</span></code></a></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_BACKWARD_IF_*</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_FORWARD_IF_*</span></code></div>
</div>
</td>
<td><p class="translated">Veja <a class="footnote-reference brackets" href="#bytecode-jump" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>. Variantes <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>, <code class="docutils literal notranslate"><span class="pre">NONE</span></code> e <code class="docutils literal notranslate"><span class="pre">NOT_NONE</span></code> para cada direção</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">SETUP_WITH</span></code></div>
<div class="translated line"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">SETUP_ASYNC_WITH</span></code></div>
</div>
</td>
<td><p class="translated"><a class="reference internal" href="../library/dis.html#opcode-BEFORE_WITH"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">BEFORE_WITH</span></code></a></p></td>
<td><p class="translated">Configuração de bloco <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a></p></td>
</tr>
</tbody>
</table>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="bytecode-jump" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">3</a><span class="fn-bracket">]</span></span>
<p class="translated">Todos os opcodes de salto agora são relativos, incluindo os existentes <code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_TRUE_OR_POP</span></code> e <code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_FALSE_OR_POP</span></code>. O argumento agora é um deslocamento da instrução atual em vez de um local absoluto.</p>
</aside>
</aside>
</section>
<section id="changed-removed-opcodes">
<span id="whatsnew311-changed-removed-opcodes"></span><span id="whatsnew311-removed-opcodes"></span><span id="whatsnew311-changed-opcodes"></span><h3 class="translated">Opcodes alterados/removidos<a class="headerlink" href="#changed-removed-opcodes" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Alterados <a class="reference internal" href="../library/dis.html#opcode-MATCH_CLASS"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">MATCH_CLASS</span></code></a> e <a class="reference internal" href="../library/dis.html#opcode-MATCH_KEYS"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">MATCH_KEYS</span></code></a> para não enviar mais um valor booleano adicional para indicar sucesso/falha. Em vez disso, <code class="docutils literal notranslate"><span class="pre">None</span></code> é enviado em caso de falha no lugar da tupla de valores extraídos.</p></li>
<li><p class="translated">Alterados opcodes que funcionam com exceções para refleti-los agora sendo representados como um item na pilha em vez de três (consulte <a class="reference external" href="https://github.com/python/cpython/issues/89874">gh-89874</a>).</p></li>
<li><p class="translated">Removidos <code class="xref std std-opcode docutils literal notranslate"><span class="pre">COPY_DICT_WITHOUT_KEYS</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">GEN_START</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_BLOCK</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">SETUP_FINALLY</span></code> e <code class="xref std std-opcode docutils literal notranslate"><span class="pre">YIELD_FROM</span></code>.</p></li>
</ul>
</section>
</section>
<section id="deprecated">
<span id="whatsnew311-python-api-deprecated"></span><span id="whatsnew311-deprecated"></span><h2 class="translated">Descontinuados<a class="headerlink" href="#deprecated" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">Esta seção lista as APIs do Python que foram descontinuadas no Python 3.11.</p>
<p class="translated">As APIs C descontinuadas são <a class="reference internal" href="#whatsnew311-c-api-deprecated"><span class="std std-ref">listadas separadamente</span></a>.</p>
<section id="language-builtins">
<span id="whatsnew311-deprecated-builtins"></span><span id="whatsnew311-deprecated-language"></span><h3 class="translated">Linguagem/Embutidos<a class="headerlink" href="#language-builtins" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">O encadeamento de descritores <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">classmethod</span></code></a> (introduzido em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=19072">bpo-19072</a>) agora foi descontinuado. Ele não pode mais ser usado para agrupar outros descritores como <a class="reference internal" href="../library/functions.html#property" title="property"><code class="xref py py-class docutils literal notranslate"><span class="pre">property</span></code></a>. O design principal desse recurso era falho e causava vários problemas posteriores. Para “passar” um <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">classmethod</span></code></a>, considere usar o atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">__wrapped__</span></code> que foi adicionado no Python 3.10. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://github.com/python/cpython/issues/89519">gh-89519</a>.)</p></li>
<li><p class="translated">Escapes octais em strings e bytes literais com valores maiores que <code class="docutils literal notranslate"><span class="pre">0o377</span></code> (255 em decimal) agora produzem um <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. Em uma versão futura do Python, eles levantarão um <a class="reference internal" href="../library/exceptions.html#SyntaxWarning" title="SyntaxWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a> e eventualmente um <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://github.com/python/cpython/issues/81548">gh-81548</a>.)</p></li>
<li><p class="translated">A delegação de <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-func docutils literal notranslate"><span class="pre">int()</span></code></a> para <a class="reference internal" href="../reference/datamodel.html#object.__trunc__" title="object.__trunc__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__trunc__()</span></code></a> agora foi descontinuada. Chamar <code class="docutils literal notranslate"><span class="pre">int(a)</span></code> quando <code class="docutils literal notranslate"><span class="pre">type(a)</span></code> implementa <code class="xref py py-meth docutils literal notranslate"><span class="pre">__trunc__()</span></code>, mas não <a class="reference internal" href="../reference/datamodel.html#object.__int__" title="object.__int__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code></a> ou <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code></a>, agora levanta uma exceção <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. (Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44977">bpo-44977</a>.)</p></li>
</ul>
</section>
<section id="modules">
<span id="whatsnew311-deprecated-modules"></span><h3 class="translated">Módulos<a class="headerlink" href="#modules" title="Link para este cabeçalho">¶</a></h3>
<ul id="whatsnew311-pep594">
<li><p class="translated"><span class="target" id="index-118"></span><a class="pep reference external" href="https://peps.python.org/pep-0594/"><strong>PEP 594</strong></a> levou à descontinuação dos seguintes módulos programados para remoção no Python 3.13:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aifc</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">chunk</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">msilib</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pipes</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">telnetlib</span></code></p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">crypt</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nis</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sndhdr</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uu</span></code></p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cgi</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imghdr</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">spwd</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xdrlib</span></code></p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cgitb</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailcap</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ossaudiodev</span></code></p></td>
<td><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sunau</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<p class="translated">(Contribuição de Brett Cannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47061">bpo-47061</a> e Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/68966">gh-68966</a>.)</p>
</li>
<li><p class="translated">Os módulos <code class="xref py py-mod docutils literal notranslate"><span class="pre">asynchat</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncore</span></code> e <code class="xref py py-mod docutils literal notranslate"><span class="pre">smtpd</span></code> foram descontinuados desde pelo menos o Python 3.6. A documentação e os avisos de descontinuação foram atualizados para observar que serão removidos no Python 3.12. (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47022">bpo-47022</a>.)</p></li>
<li><p class="translated">O pacote <code class="xref py py-mod docutils literal notranslate"><span class="pre">lib2to3</span></code> e a ferramenta <code class="docutils literal notranslate"><span class="pre">2to3</span></code> agora foram descontinuados e podem não ser capazes de analisar o Python 3.10 ou mais recente. Veja <span class="target" id="index-119"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a>, apresentando o novo analisador GASE, para detalhes. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40360">bpo-40360</a>.)</p></li>
<li><p class="translated">Módulos não documentados <code class="xref py py-mod docutils literal notranslate"><span class="pre">sre_compile</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">sre_constants</span></code> e <code class="xref py py-mod docutils literal notranslate"><span class="pre">sre_parse</span></code> agora fora descontinuados. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47152">bpo-47152</a>.)</p></li>
</ul>
</section>
<section id="standard-library">
<span id="whatsnew311-deprecated-stdlib"></span><h3 class="translated">Biblioteca Padrão<a class="headerlink" href="#standard-library" title="Link para este cabeçalho">¶</a></h3>
<ul>
<li><p class="translated">Os itens a seguir foram descontinuados em <a class="reference internal" href="../library/configparser.html#module-configparser" title="configparser: Configuration file parser."><code class="xref py py-mod docutils literal notranslate"><span class="pre">configparser</span></code></a> desde o Python 3.2. Seus avisos de descontinuação agora foram atualizados para observar que serão removidos no Python 3.12:</p>
<ul class="simple">
<li><p class="translated">a classe <code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.SafeConfigParser</span></code></p></li>
<li><p class="translated">a propriedade <code class="xref py py-attr docutils literal notranslate"><span class="pre">configparser.ParsingError.filename</span></code></p></li>
<li><p class="translated">o método <code class="xref py py-meth docutils literal notranslate"><span class="pre">configparser.RawConfigParser.readfp()</span></code></p></li>
</ul>
<p class="translated">(Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45173">bpo-45173</a>.)</p>
</li>
<li><p class="translated"><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.LegacyInterpolation</span></code> foi descontinuada na docstring desde o Python 3.2, e não está listada na documentação do <a class="reference internal" href="../library/configparser.html#module-configparser" title="configparser: Configuration file parser."><code class="xref py py-mod docutils literal notranslate"><span class="pre">configparser</span></code></a>. Agora ela emite um <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> e será removida no Python 3.13. Use <a class="reference internal" href="../library/configparser.html#configparser.BasicInterpolation" title="configparser.BasicInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.BasicInterpolation</span></code></a> ou <a class="reference internal" href="../library/configparser.html#configparser.ExtendedInterpolation" title="configparser.ExtendedInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.ExtendedInterpolation</span></code></a>. (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46607">bpo-46607</a>.)</p></li>
<li><p class="translated">O antigo conjunto de funções <a class="reference internal" href="../library/importlib.resources.html#module-importlib.resources" title="importlib.resources: Package resource reading, opening, and access"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.resources</span></code></a> foi descontinuado em favor das substituições adicionadas no Python 3.9 e será removido em uma versão futura do Python, devido ao não suporte de recursos localizados nos subdiretórios do pacote:</p>
<ul class="simple">
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.contents()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.is_resource()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.open_binary()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.open_text()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.read_binary()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.read_text()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.path()</span></code></p></li>
</ul>
</li>
<li><p class="translated">A função <a class="reference internal" href="../library/locale.html#locale.getdefaultlocale" title="locale.getdefaultlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getdefaultlocale()</span></code></a> foi descontinuada e será removida no Python 3.15. Use as funções <a class="reference internal" href="../library/locale.html#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.setlocale()</span></code></a>, <a class="reference internal" href="../library/locale.html#locale.getpreferredencoding" title="locale.getpreferredencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getpreferredencoding(False)</span></code></a> e <a class="reference internal" href="../library/locale.html#locale.getlocale" title="locale.getlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getlocale()</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/90817">gh-90817</a>.)</p></li>
<li><p class="translated">A função <code class="xref py py-func docutils literal notranslate"><span class="pre">locale.resetlocale()</span></code> foi descontinuada e será removida no Python 3.13. Use <code class="docutils literal notranslate"><span class="pre">locale.setlocale(locale.LC_ALL,</span> <span class="pre">&quot;&quot;)</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/90817">gh-90817</a>.)</p></li>
<li><p class="translated">Regras mais rígidas agora serão aplicadas para referências numéricas de grupos e nomes de grupos em <a class="reference internal" href="../library/re.html#re-syntax"><span class="std std-ref">expressões regulares</span></a>. Apenas sequências de dígitos ASCII serão aceitas como referência numérica, e o nome do grupo em padrões <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> e strings de substituição podem conter apenas letras ASCII, dígitos e sublinhados. Por enquanto, um aviso de descontinuação é levantado para a sintaxe que viola essas regras. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://github.com/python/cpython/issues/91760">gh-91760</a>.)</p></li>
<li><p class="translated">No módulo <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>, a função <code class="xref py py-func docutils literal notranslate"><span class="pre">re.template()</span></code> e os sinalizadores <code class="xref py py-const docutils literal notranslate"><span class="pre">re.TEMPLATE</span></code> e <code class="xref py py-const docutils literal notranslate"><span class="pre">re.T</span></code> correspondentes foram descontinuados, pois não foram documentados e careciam da um propósito óbvio. Eles serão removidos no Python 3.13. (Contribuição de Serhiy Storchaka e Miro Hrončok em <a class="reference external" href="https://github.com/python/cpython/issues/92728">gh-92728</a>.)</p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">turtle.settiltangle()</span></code> foi descontinuada desde o Python 3.1; ela agora emite um aviso de descontinuação e será removida no Python 3.13. Em vez dela, use <a class="reference internal" href="../library/turtle.html#turtle.tiltangle" title="turtle.tiltangle"><code class="xref py py-func docutils literal notranslate"><span class="pre">turtle.tiltangle()</span></code></a> (foi marcada anteriormente incorretamente como descontinuada e sua docstring agora está corrigida). (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45837">bpo-45837</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/typing.html#typing.Text" title="typing.Text"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Text</span></code></a>, que existe apenas para fornecer suporte de compatibilidade entre o código Python 2 e Python 3, foi descontinuada nesta versão. Sua remoção não está planejada, mas os usuários são encorajados a usar <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> sempre que possível. (Contribuição de Alex Waygood em <a class="reference external" href="https://github.com/python/cpython/issues/92332">gh-92332</a>.)</p></li>
<li><p class="translated">A sintaxe do argumento nomeado para a construção de tipos <a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a> foi descontinuado neste versão. O suporte será removido no Python 3.13. (Contribuição de Jingchen Ye em <a class="reference external" href="https://github.com/python/cpython/issues/90224">gh-90224</a>.)</p></li>
<li><p class="translated"><code class="xref py py-class docutils literal notranslate"><span class="pre">webbrowser.MacOSX</span></code> foi descontinuada e será removida no Python 3.13. Ela não foi testada, não foi documentada e não é usada pelo próprio <a class="reference internal" href="../library/webbrowser.html#module-webbrowser" title="webbrowser: Easy-to-use controller for web browsers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">webbrowser</span></code></a>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42255">bpo-42255</a>.)</p></li>
<li><p class="translated">O comportamento de retornar um valor de um dos métodos de teste de <a class="reference internal" href="../library/unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></a> e <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase" title="unittest.IsolatedAsyncioTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsolatedAsyncioTestCase</span></code></a> (diferente do valor padrão <code class="docutils literal notranslate"><span class="pre">None</span></code>) foi descontinuado nesta versão.</p></li>
<li><p class="translated">Foram descontinuadas as seguintes funções <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> não formalmente documentadas, agendadas para remoção no Python 3.13:</p>
<ul class="simple">
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.findTestCases()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.makeSuite()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.getTestCaseNames()</span></code></p></li>
</ul>
<p class="translated">Em vez delas, use os métodos de <a class="reference internal" href="../library/unittest.html#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestLoader</span></code></a>:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromModule" title="unittest.TestLoader.loadTestsFromModule"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestLoader.loadTestsFromModule()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromTestCase" title="unittest.TestLoader.loadTestsFromTestCase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestLoader.loadTestsFromTestCase()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestLoader.getTestCaseNames()</span></code></a></p></li>
</ul>
<p class="translated">(Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5846">bpo-5846</a>.)</p>
</li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestProgram.usageExit()</span></code> foi marcado como descontinuado, para ser removido em 3.13. (Contribuição de Carlos Damázio em <a class="reference external" href="https://github.com/python/cpython/issues/67048">gh-67048</a>.)</p></li>
</ul>
</section>
</section>
<section id="pending-removal-in-python-3-12">
<span id="whatsnew311-python-api-pending-removal"></span><span id="whatsnew311-pending-removal"></span><h2 class="translated">Pendente remoção no Python 3.12<a class="headerlink" href="#pending-removal-in-python-3-12" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">As seguintes APIs do Python foram descontinuadas em versões anteriores do Python e serão removidas no Python 3.12.</p>
<p class="translated">As APIs C com remoção pendente são <a class="reference internal" href="#whatsnew311-c-api-pending-removal"><span class="std std-ref">listadas separadamente</span></a>.</p>
<ul>
<li><p class="translated">O módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">asynchat</span></code></p></li>
<li><p class="translated">O módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncore</span></code></p></li>
<li><p class="translated"><a class="reference internal" href="3.10.html#distutils-deprecated"><span class="std std-ref">Todo o pacote distutils</span></a></p></li>
<li><p class="translated">O módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></p></li>
<li><p class="translated">O espaço de nomes <a class="reference internal" href="../library/typing.html#typing.IO" title="typing.IO"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.io</span></code></a></p></li>
<li><p class="translated">O espaço de nomes <a class="reference internal" href="../library/typing.html#typing.Pattern" title="typing.Pattern"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.re</span></code></a></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.log()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.find_loader()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loader.module_repr()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_loader()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.BuiltinImporter.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.BuiltinLoader.module_repr()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FileFinder.find_loader()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FileFinder.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FrozenImporter.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FrozenLoader.module_repr()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.PathFinder.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.WindowsRegistryFinder.find_module()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.module_for_loader()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.set_loader_wrapper()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.set_package_wrapper()</span></code></p></li>
<li><p class="translated"><code class="xref py py-class docutils literal notranslate"><span class="pre">pkgutil.ImpImporter</span></code></p></li>
<li><p class="translated"><code class="xref py py-class docutils literal notranslate"><span class="pre">pkgutil.ImpLoader</span></code></p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.link_to()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">sqlite3.enable_shared_cache()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">sqlite3.OptimizedUnicode()</span></code></p></li>
<li><p class="translated">Variável de ambiente <code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONTHREADDEBUG</span></code></p></li>
<li><p class="translated">Os seguintes aliases foram descontinuados no <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p class="translated">Apelido descontinuado</p></th>
<th class="head"><p class="translated">Método</p></th>
<th class="head"><p class="translated">Descontinuado em</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failUnless</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertTrue()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failIf</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertFalse" title="unittest.TestCase.assertFalse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertFalse()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failUnlessEqual</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failIfEqual</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotEqual" title="unittest.TestCase.assertNotEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotEqual()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failUnlessAlmostEqual</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertAlmostEqual()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failIfAlmostEqual</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotAlmostEqual()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">failUnlessRaises</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaises()</span></code></a></p></td>
<td><p class="translated">3.1</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assert_</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertTrue()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertEquals</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertNotEquals</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotEqual" title="unittest.TestCase.assertNotEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotEqual()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertAlmostEquals</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertAlmostEqual()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertNotAlmostEquals</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotAlmostEqual()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertRegexpMatches</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertRegex" title="unittest.TestCase.assertRegex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRegex()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-odd"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertRaisesRegexp</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertRaisesRegex" title="unittest.TestCase.assertRaisesRegex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaisesRegex()</span></code></a></p></td>
<td><p class="translated">3.2</p></td>
</tr>
<tr class="row-even"><td><p class="translated"><code class="docutils literal notranslate"><span class="pre">assertNotRegexpMatches</span></code></p></td>
<td><p class="translated"><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotRegex" title="unittest.TestCase.assertNotRegex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotRegex()</span></code></a></p></td>
<td><p class="translated">3.5</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</section>
<section id="removed">
<span id="whatsnew311-python-api-removed"></span><span id="whatsnew311-removed"></span><h2 class="translated">Removidos<a class="headerlink" href="#removed" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">Esta seção lista as APIs do Python que foram removidas no Python 3.11.</p>
<p class="translated">As  APIs C removidas são <a class="reference internal" href="#whatsnew311-c-api-removed"><span class="std std-ref">listadas separadamente</span></a>.</p>
<ul>
<li><p class="translated">Removido o <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorador</span></a> <code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;asyncio.coroutine()</span></code> permitindo que corrotinas baseadas em gerador legado sejam compatíveis com o código <a class="reference internal" href="../reference/compound_stmts.html#async"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span></code></a> / <a class="reference internal" href="../reference/expressions.html#await"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">await</span></code></a>. A função foi descontinuada desde o Python 3.8 e a remoção foi inicialmente agendada para o Python 3.10. Use <a class="reference internal" href="../reference/compound_stmts.html#async-def"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code></a> em vez disso. (Contribuição de Illia Volochii em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43216">bpo-43216</a>.)</p></li>
<li><p class="translated">Removida <code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.coroutines.CoroWrapper</span></code>, que era usada para encapsular objetos de corrotina baseados em gerador legado no modo de depuração. (Contribuição de Illia Volochii em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43216">bpo-43216</a>.)</p></li>
<li><p class="translated">Devido a preocupações significativas de segurança, o parâmetro <em>reuse_address</em> de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_datagram_endpoint" title="asyncio.loop.create_datagram_endpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_datagram_endpoint()</span></code></a>, desabilitado no Python 3.9, agora foi totalmente removido. Isto é devido ao comportamento da opção de socket <code class="docutils literal notranslate"><span class="pre">SO_REUSEDDR</span></code> no UDP. (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45129">bpo-45129</a>.)</p></li>
<li><p class="translated">Removido o módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">binhex</span></code>, descontinuado no Python 3.9. Também foram removidas as funções <a class="reference internal" href="../library/binascii.html#module-binascii" title="binascii: Tools for converting between binary and various ASCII-encoded binary representations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code></a> relacionadas e igualmente descontinuadas:</p>
<ul class="simple">
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">binascii.a2b_hqx()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">binascii.b2a_hqx()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">binascii.rlecode_hqx()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">binascii.rldecode_hqx()</span></code></p></li>
</ul>
<p class="translated">A função <a class="reference internal" href="../library/binascii.html#binascii.crc_hqx" title="binascii.crc_hqx"><code class="xref py py-func docutils literal notranslate"><span class="pre">binascii.crc_hqx()</span></code></a> continua disponível.</p>
<p class="translated">(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45085">bpo-45085</a>.)</p>
</li>
<li><p class="translated">Removido o comando <code class="docutils literal notranslate"><span class="pre">bdist_msi</span></code> do <code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils</span></code> que foi descontinuado no Python 3.9. Em vez disso, use <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> (pacotes wheel). (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45124">bpo-45124</a>.)</p></li>
<li><p class="translated">Removidos os métodos <a class="reference internal" href="../reference/datamodel.html#object.__getitem__" title="object.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code></a> das classes <a class="reference internal" href="../library/xml.dom.pulldom.html#xml.dom.pulldom.DOMEventStream" title="xml.dom.pulldom.DOMEventStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.dom.pulldom.DOMEventStream</span></code></a>, <a class="reference internal" href="../library/wsgiref.html#wsgiref.util.FileWrapper" title="wsgiref.util.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.util.FileWrapper</span></code></a> e <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">fileinput.FileInput</span></code></a>, descontinuados desde o Python 3.9 . (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45132">bpo-45132</a>.)</p></li>
<li><p class="translated">Removidas as funções descontinuadas <code class="xref py py-func docutils literal notranslate"><span class="pre">lgettext()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">ldgettext()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">lngettext()</span></code> e <code class="xref py py-func docutils literal notranslate"><span class="pre">ldngettext()</span></code> de <a class="reference internal" href="../library/gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gettext</span></code></a>. Também removidas a função <code class="xref py py-func docutils literal notranslate"><span class="pre">bind_textdomain_codeset()</span></code>, os métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">NullTranslations.output_charset()</span></code> e <code class="xref py py-meth docutils literal notranslate"><span class="pre">NullTranslations.set_output_charset()</span></code>, e o parâmetro <em>codeset</em> de <code class="xref py py-func docutils literal notranslate"><span class="pre">translation()</span></code> e <code class="xref py py-func docutils literal notranslate"><span class="pre">install()</span></code>, já que eles são usados apenas para as funções <code class="xref py py-func docutils literal notranslate"><span class="pre">l*gettext()</span></code>. (Contribuição de Dong-hee Na e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44235">bpo-44235</a>.)</p></li>
<li><p class="translated">Removido do módulo <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a>:</p>
<ul class="simple">
<li><p class="translated">A função <code class="xref py py-func docutils literal notranslate"><span class="pre">getargspec()</span></code>, descontinuada desde o Python 3.0; use <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> ou <a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getfullargspec()</span></code></a>.</p></li>
<li><p class="translated">A função <code class="xref py py-func docutils literal notranslate"><span class="pre">formatargspec()</span></code>, descontinuada desde o Python 3.5; use a função <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> ou o objeto <a class="reference internal" href="../library/inspect.html#inspect.Signature" title="inspect.Signature"><code class="xref py py-class docutils literal notranslate"><span class="pre">inspect.Signature</span></code></a> diretamente.</p></li>
<li><p class="translated">Os métodos não documentados <code class="xref py py-meth docutils literal notranslate"><span class="pre">Signature.from_builtin()</span></code> e <code class="xref py py-meth docutils literal notranslate"><span class="pre">Signature.from_function()</span></code>, descontinuados desde o Python 3.5; use o método <a class="reference internal" href="../library/inspect.html#inspect.Signature.from_callable" title="inspect.Signature.from_callable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Signature.from_callable()</span></code></a>.</p></li>
</ul>
<p class="translated">(Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45320">bpo-45320</a>.)</p>
</li>
<li><p class="translated">Removido o método <a class="reference internal" href="../reference/datamodel.html#object.__class_getitem__" title="object.__class_getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__class_getitem__()</span></code></a> de <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.PurePath</span></code></a>, pois não era usado e foi adicionado por engano em versões anteriores. (Contribuição de Nikita Sobolev em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46483">bpo-46483</a>.)</p></li>
<li><p class="translated">Removida a classe <code class="xref py py-class docutils literal notranslate"><span class="pre">MailmanProxy</span></code> do módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">smtpd</span></code>, pois ela não pode ser usada sem o pacote <code class="xref py py-mod docutils literal notranslate"><span class="pre">mailman</span></code> externo. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35800">bpo-35800</a>.)</p></li>
<li><p class="translated">Removido o método descontinuado <code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">_tkinter.TkappType</span></code>. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38371">bpo-38371</a>.)</p></li>
<li><p class="translated">Removido o suporte a pacote de espaço de nomes da descoberta de <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>. Foi introduzido no Python 3.4, mas está quebrado desde o Python 3.7. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23882">bpo-23882</a>.)</p></li>
<li><p class="translated">Removido o método privado não documentado <code class="xref py py-meth docutils literal notranslate"><span class="pre">float.__set_format__()</span></code>, anteriormente conhecido como <code class="xref py py-meth docutils literal notranslate"><span class="pre">float.__setformat__()</span></code> no Python 3.7. Sua docstring dizia: “Você provavelmente não quer usar esta função. Ela existe principalmente para ser usada na conjunto de testes do Python.” (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46852">bpo-46852</a>.)</p></li>
<li><p class="translated">O sinalizador de configuração <code class="xref std std-option docutils literal notranslate"><span class="pre">--experimental-isolated-subinterpreters</span></code> e a macro <code class="xref c c-macro docutils literal notranslate"><span class="pre">EXPERIMENTAL_ISOLATED_SUBINTERPRETERS</span></code> correspondente foram removidos.</p></li>
<li><p class="translated"><a class="extlink-pypi reference external" href="https://pypi.org/project/Pynche/">Pynche</a> – O Pythonically Natural Color and Hue Editor – foi removido de <code class="docutils literal notranslate"><span class="pre">Tools/scripts</span></code> e está <a class="reference external" href="https://gitlab.com/warsaw/pynche/-/tree/main">sendo desenvolvido independentemente</a> da árvore fonte do Python.</p></li>
</ul>
</section>
<section id="porting-to-python-3-11">
<span id="whatsnew311-python-api-porting"></span><span id="whatsnew311-porting"></span><h2 class="translated">Portando para Python 3.11<a class="headerlink" href="#porting-to-python-3-11" title="Link para este cabeçalho">¶</a></h2>
<p class="translated">Esta seção lista as alterações descritas anteriormente e outras correções de bugs na API do Python que podem exigir alterações em seu código Python.</p>
<p class="translated">As notas de portabilidade para a API C são <a class="reference internal" href="#whatsnew311-c-api-porting"><span class="std std-ref">listadas separadamente</span></a>.</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, <a class="reference internal" href="../library/io.html#io.open" title="io.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">io.open()</span></code></a>, <a class="reference internal" href="../library/codecs.html#codecs.open" title="codecs.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.open()</span></code></a> e <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">fileinput.FileInput</span></code></a> não aceitam mais <code class="docutils literal notranslate"><span class="pre">'U'</span></code> (“nova linha universal”) em o modo de arquivo. No Python 3, o modo “nova linha universal” é usado por padrão sempre que um arquivo é aberto no modo de texto, e o sinalizador <code class="docutils literal notranslate"><span class="pre">'U'</span></code> foi descontinuado desde o Python 3.3. O <a class="reference internal" href="../library/functions.html#open-newline-parameter"><span class="std std-ref">parâmetro de nova linha</span></a> para essas funções controla como as novas linhas universais funcionam. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37330">bpo-37330</a>.)</p></li>
<li><p class="translated">As posições do nó da <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> agora são validadas quando fornecidas para <a class="reference internal" href="../library/functions.html#compile" title="compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">compile()</span></code></a> e outras funções relacionadas. Se posições inválidas forem detectadas, uma exceção <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> será levantado. (Contribuição de Pablo Galindo em <a class="reference external" href="https://github.com/python/cpython/issues/93351">gh-93351</a>)</p></li>
<li><p class="translated">Proibido passar executores que não sejam <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a> para <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.set_default_executor" title="asyncio.loop.set_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.set_default_executor()</span></code></a> após uma descontinuação no Python 3.8. (Contribuição de Illia Volochii em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43234">bpo-43234</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../library/calendar.html#module-calendar" title="calendar: Functions for working with calendars, including some emulation of the Unix cal program."><code class="xref py py-mod docutils literal notranslate"><span class="pre">calendar</span></code></a>: As classes <a class="reference internal" href="../library/calendar.html#calendar.LocaleTextCalendar" title="calendar.LocaleTextCalendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">calendar.LocaleTextCalendar</span></code></a> e <a class="reference internal" href="../library/calendar.html#calendar.LocaleHTMLCalendar" title="calendar.LocaleHTMLCalendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">calendar.LocaleHTMLCalendar</span></code></a> agora usam <a class="reference internal" href="../library/locale.html#locale.getlocale" title="locale.getlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getlocale()</span></code></a>, em vez de usar <a class="reference internal" href="../library/locale.html#locale.getdefaultlocale" title="locale.getdefaultlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getdefaultlocale()</span></code></a>, se nenhuma localidade é especificada. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46659">bpo-46659</a>.)</p></li>
<li><p class="translated">O módulo <a class="reference internal" href="../library/pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a> agora lê o arquivo de configuração <code class="file docutils literal notranslate"><span class="pre">.pdbrc</span></code> com a codificação <code class="docutils literal notranslate"><span class="pre">'UTF-8'</span></code>. (Contribuição de Srinivas Reddy Thatiparty (శ్రీనివాస్ రెడ్డి తాటిపర్తి) em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41137">bpo-41137</a>.)</p></li>
<li><p class="translated">O parâmetro <em>population</em> de <a class="reference internal" href="../library/random.html#random.sample" title="random.sample"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.sample()</span></code></a> deve ser uma sequência, e a conversão automática de <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>s para <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>s não é mais suportada. Além disso, se o tamanho da amostra for maior que o tamanho da população, uma exceção <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> é levantada. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40465">bpo-40465</a>.)</p></li>
<li><p class="translated">O parâmetro opcional <em>random</em> de <a class="reference internal" href="../library/random.html#random.shuffle" title="random.shuffle"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.shuffle()</span></code></a> foi removido. Anteriormente, era uma função aleatória arbitrária a ser usada para o shuffle; agora, <a class="reference internal" href="../library/random.html#random.random" title="random.random"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.random()</span></code></a> (seu padrão anterior) sempre será usado.</p></li>
<li><p class="translated">Em <a class="reference internal" href="../library/re.html#re-syntax"><span class="std std-ref">Sintaxe de expressão regular</span></a> do <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>, sinalizadores globais inline (por exemplo, <code class="docutils literal notranslate"><span class="pre">(?i)</span></code>) agora só podem ser usados no início de expressões regulares. Se uso em outro lugar foi descontinuado no Python 3.6. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=47066">bpo-47066</a>.)</p></li>
<li><p class="translated">No módulo <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>, vários bugs de longa data foram corrigidos que, em casos raros, poderiam fazer com que os grupos de captura obtivessem o resultado errado. Portanto, isso pode alterar a saída capturada nesses casos. (Contribuição de Ma Lin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35859">bpo-35859</a>.)</p></li>
</ul>
</section>
<section id="build-changes">
<span id="whatsnew311-build-changes"></span><h2 class="translated">Mudanças na construção<a class="headerlink" href="#build-changes" title="Link para este cabeçalho">¶</a></h2>
<ul>
<li><p class="translated">CPython agora tem <span class="target" id="index-120"></span><a class="pep reference external" href="https://peps.python.org/pep-0011/#tier-3"><strong>suporte a Tier 3</strong></a> da <span class="target" id="index-121"></span><a class="pep reference external" href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> para compilação cruzada para as plataformas <a class="reference external" href="https://webassembly.org/">WebAssembly</a> <a class="reference external" href="https://emscripten.org/">Emscripten</a> (<code class="docutils literal notranslate"><span class="pre">wasm32-unknown-emscripten</span></code>, ou seja, Python no navegador) e <a class="reference external" href="https://wasi.dev/">WebAssembly System Interface (WASI)</a> (<code class="docutils literal notranslate"><span class="pre">wasm32-unknown-wasi</span></code>). O esforço é inspirado em trabalhos anteriores como <a class="reference external" href="https://pyodide.org/">Pyodide</a>. Essas plataformas fornecem um subconjunto limitado de APIs POSIX; Os recursos e módulos das bibliotecas padrão do Python relacionados a redes, processos, encadeamento, sinais, mmap e usuários/grupos não estão disponíveis ou não funcionam. (Emscripten contribuído por Christian Heimes e Ethan Smith em <a class="reference external" href="https://github.com/python/cpython/issues/84461">gh-84461</a> e WASI contribuído por Christian Heimes em <a class="reference external" href="https://github.com/python/cpython/issues/90473">gh-90473</a>; plataformas promovidas em <a class="reference external" href="https://github.com/python/cpython/issues/95085">gh-95085</a>)</p></li>
<li><p class="translated">A construção do CPython agora requer:</p>
<ul class="simple">
<li><p class="translated">Um compilador <a class="reference external" href="https://en.cppreference.com/w/c/11">C11</a>. <a class="reference external" href="https://en.wikipedia.org/wiki/C11_(C_standard_revision)#Optional_features">Recursos C11 opcionais</a> não são necessários. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46656">bpo-46656</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45440">bpo-45440</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46640">bpo-46640</a>.)</p></li>
<li><p class="translated">Suporte para números de ponto flutuante <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754</a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46917">bpo-46917</a>.)</p></li>
</ul>
</li>
<li><p class="translated">A macro <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_NO_NAN</span></code> foi removida. Como o CPython agora requer pontos flutuantes de IEEE 754, os valores NaN estão sempre disponíveis. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46656">bpo-46656</a>.)</p></li>
<li><p class="translated">O pacote <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a> agora requer <a class="reference external" href="https://www.tcl.tk">Tcl/Tk</a> versão 8.5.12 ou mais recente. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46996">bpo-46996</a>.)</p></li>
<li><p class="translated">Dependências de construção, sinalizadores de compilador e sinalizadores de vinculador para a maioria dos módulos de extensão stdlib agora são detectados pelo <strong class="program">configure</strong>. Os sinalizadores, ou <em>flags</em>, de libffi, libnsl, libsqlite3, zlib, bzip2, liblzma, libcrypt, Tcl/Tk e uuid são detectados por <a class="reference external" href="https://www.freedesktop.org/wiki/Software/pkg-config/">pkg-config</a> (Quando disponível). <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a> agora requer um comando pkg-config para detectar configurações de desenvolvimento para cabeçalhos e bibliotecas <a class="reference external" href="https://www.tcl.tk">Tcl/Tk</a>. (Contribuição de Christian Heimes e Erlend Egeberg Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45847">bpo-45847</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45747">bpo-45747</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45763">bpo-45763</a>.)</p></li>
<li><p class="translated">libpython não está mais vinculado a libcrypt. (Contribuição de Mike Gilbert em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45433">bpo-45433</a>.)</p></li>
<li><p class="translated">O CPython agora pode ser construído com a opção <a class="reference external" href="https://clang.llvm.org/docs/ThinLTO.html">ThinLTO</a> passando <code class="docutils literal notranslate"><span class="pre">thin</span></code> para <a class="reference internal" href="../using/configure.html#cmdoption-with-lto"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-lto</span></code></a>, ou seja, <code class="docutils literal notranslate"><span class="pre">--with-lto=thin</span></code>. (Contribuição de Donghee Na e Brett Holman em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44340">bpo-44340</a>.)</p></li>
<li><p class="translated">Freelists para structs de objeto agora podem ser desabilitadas. Uma nova opção <a class="reference internal" href="../using/configure.html#cmdoption-without-freelists"><code class="xref std std-option docutils literal notranslate"><span class="pre">--without-freelists</span></code></a> do <strong class="program">configure</strong> pode ser usada para desabilitar todas as freelists, exceto a tupla singleton vazia. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45522">bpo-45522</a>.)</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">Modules/Setup</span></code> e <code class="docutils literal notranslate"><span class="pre">Modules/makesetup</span></code> foram melhorados e amarrados. Módulos de extensão agora podem ser construídos através do <code class="docutils literal notranslate"><span class="pre">makesetup</span></code>. Todos, exceto alguns módulos de teste, podem ser vinculados estaticamente em um binário principal ou biblioteca. (Contribuição de Brett Cannon e Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45548">bpo-45548</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45570">bpo-45570</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45571">bpo-45571</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43974">bpo-43974</a>.)</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p class="translated">Use as variáveis de ambiente <code class="xref std std-envvar docutils literal notranslate"><span class="pre">TCLTK_CFLAGS</span></code> e <code class="xref std std-envvar docutils literal notranslate"><span class="pre">TCLTK_LIBS</span></code> para especificar manualmente a localização dos cabeçalhos e bibliotecas Tcl/Tk. As opções <strong class="program">configure</strong> <code class="xref std std-option docutils literal notranslate"><span class="pre">--with-tcltk-includes</span></code> e <code class="xref std std-option docutils literal notranslate"><span class="pre">--with-tcltk-libs</span></code> foram removidas.</p>
<p class="translated">No RHEL 7 e CentOS 7 os pacotes de desenvolvimento não fornecem <code class="docutils literal notranslate"><span class="pre">tcl.pc</span></code> e <code class="docutils literal notranslate"><span class="pre">tk.pc</span></code>; use <code class="docutils literal notranslate"><span class="pre">TCLTK_LIBS=&quot;-ltk8.5</span> <span class="pre">-ltkstub8.5</span> <span class="pre">-ltcl8.5&quot;</span></code>. O diretório <code class="docutils literal notranslate"><span class="pre">Misc/rhel7</span></code> contém arquivos <code class="docutils literal notranslate"><span class="pre">.pc</span></code> e instruções sobre como construir Python com RHEL 7’s e CentOS 7’s Tcl/Tk e OpenSSL.</p>
</div>
</li>
<li><p class="translated">O CPython agora usará dígitos de 30 bits por padrão para a implementação de <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> do Python. Anteriormente, o padrão era usar dígitos de 30 bits em plataformas com <code class="docutils literal notranslate"><span class="pre">SIZEOF_VOID_P</span> <span class="pre">&gt;=</span> <span class="pre">8</span></code> e, caso contrário, dígitos de 15 bits. Ainda é possível solicitar explicitamente o uso de dígitos de 15 bits através da opção <a class="reference internal" href="../using/configure.html#cmdoption-enable-big-digits"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-big-digits</span></code></a> para o script de configuração ou (para Windows) a variável <code class="docutils literal notranslate"><span class="pre">PYLONG_BITS_IN_DIGIT</span></code> em <code class="docutils literal notranslate"><span class="pre">PC/pyconfig.h</span></code>, mas esta opção pode ser removida em algum momento no futuro. (Contribuição de Mark Dickinson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45569">bpo-45569</a>.)</p></li>
</ul>
</section>
<section id="c-api-changes">
<span id="whatsnew311-c-api"></span><h2 class="translated">Alterações na API C<a class="headerlink" href="#c-api-changes" title="Link para este cabeçalho">¶</a></h2>
<section id="whatsnew311-c-api-new-features">
<span id="id5"></span><h3 class="translated">Novas funcionalidades<a class="headerlink" href="#whatsnew311-c-api-new-features" title="Link para este cabeçalho">¶</a></h3>
<ul>
<li><p class="translated">Adiciona uma nova função <a class="reference internal" href="../c-api/type.html#c.PyType_GetName" title="PyType_GetName"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetName()</span></code></a> para obter o nome curto do tipo. (Contribuição de Hai Shi em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42035">bpo-42035</a>.)</p></li>
<li><p class="translated">Adiciona uma nova função <a class="reference internal" href="../c-api/type.html#c.PyType_GetQualName" title="PyType_GetQualName"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetQualName()</span></code></a> para obter o nome qualificado do tipo. (Contribuição de Hai Shi em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42035">bpo-42035</a>.)</p></li>
<li><p class="translated">Adiciona novas funções <a class="reference internal" href="../c-api/init.html#c.PyThreadState_EnterTracing" title="PyThreadState_EnterTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_EnterTracing()</span></code></a> e <a class="reference internal" href="../c-api/init.html#c.PyThreadState_LeaveTracing" title="PyThreadState_LeaveTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_LeaveTracing()</span></code></a> à API C limitada para suspender e retomar rastreamento e criação de perfil. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43760">bpo-43760</a>.)</p></li>
<li><p class="translated">Adicionada a constante <a class="reference internal" href="../c-api/apiabiversion.html#c.Py_Version" title="Py_Version"><code class="xref c c-data docutils literal notranslate"><span class="pre">Py_Version</span></code></a> que possui o mesmo valor que <a class="reference internal" href="../c-api/apiabiversion.html#c.PY_VERSION_HEX" title="PY_VERSION_HEX"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PY_VERSION_HEX</span></code></a>. (Contribuição de Gabriele N. Tornetta em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43931">bpo-43931</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.Py_buffer" title="Py_buffer"><code class="xref c c-type docutils literal notranslate"><span class="pre">Py_buffer</span></code></a> e APIs agora fazem parte da API limitada e da ABI estável:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CheckBuffer()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyObject_GetBuffer" title="PyObject_GetBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GetBuffer()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_GetPointer" title="PyBuffer_GetPointer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_GetPointer()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_SizeFromFormat" title="PyBuffer_SizeFromFormat"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_SizeFromFormat()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_ToContiguous" title="PyBuffer_ToContiguous"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_ToContiguous()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_FromContiguous" title="PyBuffer_FromContiguous"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_FromContiguous()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyObject_CopyData" title="PyObject_CopyData"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CopyData()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_IsContiguous" title="PyBuffer_IsContiguous"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_IsContiguous()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_FillContiguousStrides" title="PyBuffer_FillContiguousStrides"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_FillContiguousStrides()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_FillInfo" title="PyBuffer_FillInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_FillInfo()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_Release" title="PyBuffer_Release"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_Release()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/memoryview.html#c.PyMemoryView_FromBuffer" title="PyMemoryView_FromBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMemoryView_FromBuffer()</span></code></a></p></li>
<li><p class="translated">Slotes de tipo <a class="reference internal" href="../c-api/typeobj.html#c.PyBufferProcs.bf_getbuffer" title="PyBufferProcs.bf_getbuffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">bf_getbuffer</span></code></a> e <a class="reference internal" href="../c-api/typeobj.html#c.PyBufferProcs.bf_releasebuffer" title="PyBufferProcs.bf_releasebuffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">bf_releasebuffer</span></code></a></p></li>
</ul>
<p class="translated">(Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45459">bpo-45459</a>.)</p>
</li>
<li><p class="translated">Adicionada a função <a class="reference internal" href="../c-api/type.html#c.PyType_GetModuleByDef" title="PyType_GetModuleByDef"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModuleByDef()</span></code></a>, utilizada para obter o módulo no qual um método foi definido, nos casos em que esta informação não está disponível diretamente (via <a class="reference internal" href="../c-api/structures.html#c.PyCMethod" title="PyCMethod"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCMethod</span></code></a>). (Contribuição de Petr Viktorin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46613">bpo-46613</a>.)</p></li>
<li><p class="translated">Adiciona novas funções para compactar e desempacotar double C (serializar e desserializar): <a class="reference internal" href="../c-api/float.html#c.PyFloat_Pack2" title="PyFloat_Pack2"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Pack2()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Pack4" title="PyFloat_Pack4"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Pack4()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Pack8" title="PyFloat_Pack8"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Pack8()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Unpack2" title="PyFloat_Unpack2"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Unpack2()</span></code></a> , <a class="reference internal" href="../c-api/float.html#c.PyFloat_Unpack4" title="PyFloat_Unpack4"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Unpack4()</span></code></a> e <a class="reference internal" href="../c-api/float.html#c.PyFloat_Unpack8" title="PyFloat_Unpack8"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Unpack8()</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46906">bpo-46906</a>.)</p></li>
<li><p class="translated">Adiciona novas funções para obter atributos do objeto quadro: <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBuiltins" title="PyFrame_GetBuiltins"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBuiltins()</span></code></a>, <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGenerator" title="PyFrame_GetGenerator"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGenerator()</span></code></a>, <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGlobals" title="PyFrame_GetGlobals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGlobals()</span></code></a>, <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLasti" title="PyFrame_GetLasti"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLasti()</span></code></a>.</p></li>
<li><p class="translated">Adicionadas duas novas funções para obter e definir a instância de exceção ativa: <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_GetHandledException" title="PyErr_GetHandledException"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_GetHandledException()</span></code></a> e <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetHandledException" title="PyErr_SetHandledException"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetHandledException()</span></code></a>. Estas são alternativas para <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetExcInfo" title="PyErr_SetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetExcInfo()</span></code></a> e <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_GetExcInfo" title="PyErr_GetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_GetExcInfo()</span></code></a> que funcionam com a representação de tuplas de 3 elementos legadas de exceções. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46343">bpo-46343</a>.)</p></li>
<li><p class="translated">Adicionada o membro <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.safe_path" title="PyConfig.safe_path"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.safe_path</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/57684">gh-57684</a>.)</p></li>
</ul>
</section>
<section id="whatsnew311-c-api-porting">
<span id="id6"></span><h3 class="translated">Portando para Python 3.11<a class="headerlink" href="#whatsnew311-c-api-porting" title="Link para este cabeçalho">¶</a></h3>
<ul id="whatsnew311-pep670">
<li><p class="translated">Algumas macros foram convertidas em funções inline estáticas para evitar <a class="reference external" href="https://gcc.gnu.org/onlinedocs/cpp/Macro-Pitfalls.html">armadilhas de macro</a>. A alteração deve ser transparente para os usuários, pois as funções de substituição converterão seus argumentos para os tipos esperados para evitar avisos do compilador devido a verificações de tipo estático. No entanto, quando a API C limitada é definida como &gt;=3.11, essas conversões não são feitas e os chamadores precisarão converter argumentos para seus tipos esperados. Veja <span class="target" id="index-122"></span><a class="pep reference external" href="https://peps.python.org/pep-0670/"><strong>PEP 670</strong></a> para mais detalhes. (Contribuição de Victor Stinner e Erlend E. Aasland em <a class="reference external" href="https://github.com/python/cpython/issues/89653">gh-89653</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetExcInfo" title="PyErr_SetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetExcInfo()</span></code></a> não usa mais os argumentos <code class="docutils literal notranslate"><span class="pre">type</span></code> e <code class="docutils literal notranslate"><span class="pre">traceback</span></code>, o interpretador agora deriva esses valores da instância de exceção (o argumento <code class="docutils literal notranslate"><span class="pre">value</span></code>). A função ainda rouba referências de todos os três argumentos. (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/exceptions.html#c.PyErr_GetExcInfo" title="PyErr_GetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_GetExcInfo()</span></code></a> agora deriva os campos <code class="docutils literal notranslate"><span class="pre">type</span></code> e <code class="docutils literal notranslate"><span class="pre">traceback</span></code> do resultado da instância de exceção (o campo <code class="docutils literal notranslate"><span class="pre">value</span></code>). (Contribuição de Irit Katriel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/import.html#c._frozen" title="_frozen"><code class="xref c c-struct docutils literal notranslate"><span class="pre">_frozen</span></code></a> tem um novo campo <code class="docutils literal notranslate"><span class="pre">is_package</span></code> para indicar se o módulo frozen é ou não um pacote. Anteriormente, um valor negativo no campo <code class="docutils literal notranslate"><span class="pre">size</span></code> era o indicador. Agora apenas valores não negativos serão usados para <code class="docutils literal notranslate"><span class="pre">size</span></code>. (Contribuição de Kumar Aditya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46608">bpo-46608</a>.)</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/init.html#c._PyFrameEvalFunction" title="_PyFrameEvalFunction"><code class="xref c c-func docutils literal notranslate"><span class="pre">_PyFrameEvalFunction()</span></code></a> agora usa <code class="docutils literal notranslate"><span class="pre">_PyInterpreterFrame*</span></code> como seu segundo parâmetro, em vez de <code class="docutils literal notranslate"><span class="pre">PyFrameObject*</span></code>. Veja <span class="target" id="index-123"></span><a class="pep reference external" href="https://peps.python.org/pep-0523/"><strong>PEP 523</strong></a> para mais detalhes de como usar este tipo de ponteiro de função.</p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_New()</span></code> e <code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_NewWithPosOnlyArgs()</span></code> agora recebem um argumento adicional <code class="docutils literal notranslate"><span class="pre">exception_table</span></code>. O uso dessas funções deve ser evitado, se possível. Para obter um objeto código personalizado: crie um objeto código usando o compilador e obtenha uma versão modificada com o método <code class="docutils literal notranslate"><span class="pre">replace</span></code>.</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/code.html#c.PyCodeObject" title="PyCodeObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCodeObject</span></code></a> não possui mais os campos <code class="docutils literal notranslate"><span class="pre">co_code</span></code>, <code class="docutils literal notranslate"><span class="pre">co_varnames</span></code>, <code class="docutils literal notranslate"><span class="pre">co_cellvars</span></code> e <code class="docutils literal notranslate"><span class="pre">co_freevars</span></code>. Em vez disso, use <a class="reference internal" href="../c-api/code.html#c.PyCode_GetCode" title="PyCode_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_GetCode()</span></code></a>, <a class="reference internal" href="../c-api/code.html#c.PyCode_GetVarnames" title="PyCode_GetVarnames"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_GetVarnames()</span></code></a>, <a class="reference internal" href="../c-api/code.html#c.PyCode_GetCellvars" title="PyCode_GetCellvars"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_GetCellvars()</span></code></a> e <a class="reference internal" href="../c-api/code.html#c.PyCode_GetFreevars" title="PyCode_GetFreevars"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_GetFreevars()</span></code></a> respectivamente para acessá-los por meio da API C. (Contribuição de Brandt Bucher em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46841">bpo-46841</a> e Ken Jin em <a class="reference external" href="https://github.com/python/cpython/issues/92154">gh-92154</a> e <a class="reference external" href="https://github.com/python/cpython/issues/94936">gh-94936</a>.)</p></li>
<li><p class="translated">As antigas macros trashcan (<code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_BEGIN</span></code>/<code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_END</span></code>) foram descontinuadas. Elas devem ser substituídas pelas novas macros <code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code> e <code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_END</span></code>.</p>
<p class="translated">Uma função tp_dealloc que possui as macros antigas, como:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="n">void</span>
<span class="n">dealocador_de_meutipo</span><span class="p">(</span><span class="n">meutipo</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PyObject_GC_UnTrack</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="n">Py_TRASHCAN_SAFE_BEGIN</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="o">...</span>
    <span class="n">Py_TRASHCAN_SAFE_END</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="translated">deve migrar para as novas macros da seguinte forma:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="n">void</span>
<span class="n">dealocador_de_meutipo</span><span class="p">(</span><span class="n">meutipo</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PyObject_GC_UnTrack</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="n">Py_TRASHCAN_BEGIN</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">dealocador_de_meutipo</span><span class="p">);</span>
    <span class="o">...</span>
    <span class="n">Py_TRASHCAN_END</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="translated">Observe que <code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code> tem um segundo argumento que deve ser a função de desalocação em que está.</p>
<p class="translated">Para oferecer suporte a versões mais antigas do Python na mesma base de código, você pode definir as seguintes macros e usá-las em todo o código (crédito: elas foram copiadas da base de código do <code class="docutils literal notranslate"><span class="pre">mypy</span></code>):</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &gt;= 0x03080000</span>
<span class="c1">#  define CPy_TRASHCAN_BEGIN(op, dealloc) Py_TRASHCAN_BEGIN(op, dealloc)</span>
<span class="c1">#  define CPy_TRASHCAN_END(op) Py_TRASHCAN_END</span>
<span class="c1">#else</span>
<span class="c1">#  define CPy_TRASHCAN_BEGIN(op, dealloc) Py_TRASHCAN_SAFE_BEGIN(op)</span>
<span class="c1">#  define CPy_TRASHCAN_END(op) Py_TRASHCAN_SAFE_END(op)</span>
<span class="c1">#endif</span>
</pre></div>
</div>
</li>
<li><p class="translated">A função <a class="reference internal" href="../c-api/type.html#c.PyType_Ready" title="PyType_Ready"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_Ready()</span></code></a> agora levanta um erro se um tipo é definido com o sinalizador <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_HAVE_GC" title="Py_TPFLAGS_HAVE_GC"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_HAVE_GC</span></code></a> definido, mas não tem função transversal (<a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_traverse" title="PyTypeObject.tp_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_traverse</span></code></a>). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44263">bpo-44263</a>.)</p></li>
<li><p class="translated">Tipos de heap com o sinalizador <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_IMMUTABLETYPE" title="Py_TPFLAGS_IMMUTABLETYPE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_IMMUTABLETYPE</span></code></a> agora podem herdar o protocolo vectorcall da <span class="target" id="index-124"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a>. Anteriormente, isso só era possível para <a class="reference internal" href="../c-api/typeobj.html#static-types"><span class="std std-ref">tipos estáticos</span></a>. (Contribuição de Erlend E. Aasland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43908">bpo-43908</a>)</p></li>
<li><p class="translated">Uma vez que <a class="reference internal" href="../c-api/structures.html#c.Py_TYPE" title="Py_TYPE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_TYPE()</span></code></a> é alterada para uma função estática inline, <code class="docutils literal notranslate"><span class="pre">Py_TYPE(obj)</span> <span class="pre">=</span> <span class="pre">new_type</span></code> deve ser substituído por <code class="docutils literal notranslate"><span class="pre">Py_SET_TYPE(obj,</span> <span class="pre">new_type)</span></code>: consulte a função <a class="reference internal" href="../c-api/structures.html#c.Py_SET_TYPE" title="Py_SET_TYPE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SET_TYPE()</span></code></a> (disponível desde Python 3.9). Para compatibilidade com versões anteriores, esta macro pode ser usada:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900A4 &amp;&amp; !defined(Py_SET_TYPE)</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">_Py_SET_TYPE</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">ob</span><span class="p">,</span> <span class="n">PyTypeObject</span> <span class="o">*</span><span class="nb">type</span><span class="p">)</span>
<span class="p">{</span> <span class="n">ob</span><span class="o">-&gt;</span><span class="n">ob_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">#define Py_SET_TYPE(ob, type) _Py_SET_TYPE((PyObject*)(ob), type)</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p class="translated">(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39573">bpo-39573</a>.)</p>
</li>
<li><p class="translated">Uma vez que <a class="reference internal" href="../c-api/structures.html#c.Py_SIZE" title="Py_SIZE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SIZE()</span></code></a> é alterada para uma função estática inline, <code class="docutils literal notranslate"><span class="pre">Py_SIZE(obj)</span> <span class="pre">=</span> <span class="pre">new_size</span></code> deve ser substituído por <code class="docutils literal notranslate"><span class="pre">Py_SET_SIZE(obj,</span> <span class="pre">new_size)</span></code>: veja a função <a class="reference internal" href="../c-api/structures.html#c.Py_SET_SIZE" title="Py_SET_SIZE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SET_SIZE()</span></code></a> (disponível desde Python 3.9). Para compatibilidade com versões anteriores, esta macro pode ser usada:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900A4 &amp;&amp; !defined(Py_SET_SIZE)</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">_Py_SET_SIZE</span><span class="p">(</span><span class="n">PyVarObject</span> <span class="o">*</span><span class="n">ob</span><span class="p">,</span> <span class="n">Py_ssize_t</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span> <span class="n">ob</span><span class="o">-&gt;</span><span class="n">ob_size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">#define Py_SET_SIZE(ob, size) _Py_SET_SIZE((PyVarObject*)(ob), size)</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p class="translated">(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39573">bpo-39573</a>.)</p>
</li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">&lt;Python.h&gt;</span></code> não inclui mais os arquivos de cabeçalho <code class="docutils literal notranslate"><span class="pre">&lt;stdlib.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;stdio.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;errno.h&gt;</span></code> e <code class="docutils literal notranslate"><span class="pre">&lt;string.h&gt;</span></code> quando a macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> é definida como <code class="docutils literal notranslate"><span class="pre">0x030b0000</span></code> (Python 3.11) ou superior. As extensões C devem incluir explicitamente os arquivos de cabeçalho após <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;Python.h&gt;</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45434">bpo-45434</a>.)</p></li>
<li><p class="translated">Os arquivos API não limitados <code class="docutils literal notranslate"><span class="pre">cellobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">classobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">code.h</span></code>, <code class="docutils literal notranslate"><span class="pre">context.h</span></code>, <code class="docutils literal notranslate"><span class="pre">funcobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">genobject.h</span></code> e <code class="docutils literal notranslate"><span class="pre">longintrepr.h</span></code> foram movidos para o diretório <code class="docutils literal notranslate"><span class="pre">Include/cpython</span></code>. Além disso, o arquivo de cabeçalho <code class="docutils literal notranslate"><span class="pre">eval.h</span></code> foi removido. Esses arquivos não devem ser incluídos diretamente, pois já estão incluídos aos <a class="reference internal" href="../c-api/intro.html#api-includes"><span class="std std-ref">arquivos de inclusão</span></a> do <code class="docutils literal notranslate"><span class="pre">Python.h</span></code>. Se eles foram incluídos diretamente, considere incluir <code class="docutils literal notranslate"><span class="pre">Python.h</span></code> em seu lugar. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35134">bpo-35134</a>.)</p></li>
<li><p class="translated">A macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_CHECK_INTERNED()</span></code> foi excluída da API C limitada. Nunca foi utilizável lá, porque usava estruturas internas que não estão disponíveis na API C limitada. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46007">bpo-46007</a>.)</p></li>
<li><p class="translated">As seguintes funções e tipo de quadro agora estão disponíveis diretamente com <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;Python.h&gt;</span></code>, não é mais necessário adicionar <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;frameobject.h&gt;</span></code>:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_Check" title="PyFrame_Check"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_Check()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBuiltins" title="PyFrame_GetBuiltins"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBuiltins()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGenerator" title="PyFrame_GetGenerator"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGenerator()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGlobals" title="PyFrame_GetGlobals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGlobals()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLasti" title="PyFrame_GetLasti"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLasti()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLocals()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/frame.html#c.PyFrame_Type" title="PyFrame_Type"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrame_Type</span></code></a></p></li>
</ul>
<p class="translated">(Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/93937">gh-93937</a>.)</p>
</li>
</ul>
<ul id="pyframeobject-3-11-hiding">
<li><p class="translated">Os membros da estrutura <a class="reference internal" href="../c-api/frame.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a> foram removidos da API C pública.</p>
<p class="translated">Embora a documentação observe que os campos <a class="reference internal" href="../c-api/frame.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a> estão sujeitos a alterações a qualquer momento, eles permaneceram estáveis por um longo tempo e foram usados em várias extensões populares.</p>
<p class="translated">No Python 3.11, a estrutura do quadro foi reorganizada para permitir otimizações de desempenho. Alguns campos foram totalmente removidos, pois eram detalhes da antiga implementação.</p>
<p class="translated">Campos do <a class="reference internal" href="../c-api/frame.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a>:</p>
<ul class="simple">
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_back</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_blockstack</span></code>: removido.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_builtins</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBuiltins" title="PyFrame_GetBuiltins"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBuiltins()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_code</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetCode" title="PyFrame_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_gen</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGenerator" title="PyFrame_GetGenerator"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGenerator()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_globals</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGlobals" title="PyFrame_GetGlobals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGlobals()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_iblock</span></code>: removido.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_lasti</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLasti" title="PyFrame_GetLasti"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLasti()</span></code></a>. Código usando <code class="docutils literal notranslate"><span class="pre">f_lasti</span></code> com <code class="docutils literal notranslate"><span class="pre">PyCode_Addr2Line()</span></code> deve usar <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a>, pois deve ser mais rápido.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_lineno</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a></p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_locals</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLocals()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_stackdepth</span></code>: removido.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_state</span></code>: nenhuma API pública (renomeado para <code class="docutils literal notranslate"><span class="pre">f_frame.f_state</span></code>).</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_trace</span></code>: nenhuma API pública.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_trace_lines</span></code>: use <code class="docutils literal notranslate"><span class="pre">PyObject_GetAttrString((PyObject*)frame,</span> <span class="pre">&quot;f_trace_lines&quot;)</span></code>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_trace_opcodes</span></code>: use <code class="docutils literal notranslate"><span class="pre">PyObject_GetAttrString((PyObject*)frame,</span> <span class="pre">&quot;f_trace_opcodes&quot;)</span></code>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_localsplus</span></code>: nenhuma API pública (renomeado para <code class="docutils literal notranslate"><span class="pre">f_frame.localsplus</span></code>).</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">f_valuestack</span></code>: removido.</p></li>
</ul>
<p class="translated">O objeto quadro do Python agora é criado de forma “preguiçosa” (<em>lazy</em>). Um efeito colateral é que o membro <a class="reference internal" href="../reference/datamodel.html#frame.f_back" title="frame.f_back"><code class="xref py py-attr docutils literal notranslate"><span class="pre">f_back</span></code></a> não deve ser acessado diretamente, já que seu valor agora também é calculado de forma “preguiçosa”. A função <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a> deve ser chamada em seu lugar.</p>
<p class="translated">Depuradores que acessam <a class="reference internal" href="../reference/datamodel.html#frame.f_locals" title="frame.f_locals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">f_locals</span></code></a> diretamente <em>devem</em> chamar <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLocals()</span></code></a>. Eles não precisam mais chamar <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_FastToLocalsWithError()</span></code> ou <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_LocalsToFast()</span></code>. Na verdade, eles não devem chamar essas funções. A atualização necessária do quadro agora é gerenciada pela máquina virtual.</p>
<p class="translated">Código definindo <code class="docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code> no Python 3.8 e anteriores:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900B1</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">PyCodeObject</span><span class="o">*</span> <span class="n">PyFrame_GetCode</span><span class="p">(</span><span class="n">PyFrameObject</span> <span class="o">*</span><span class="n">frame</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_INCREF</span><span class="p">(</span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_code</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_code</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p class="translated">Código definindo <code class="docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code> no Python 3.8 e anteriores:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900B1</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">PyFrameObject</span><span class="o">*</span> <span class="n">PyFrame_GetBack</span><span class="p">(</span><span class="n">PyFrameObject</span> <span class="o">*</span><span class="n">frame</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_XINCREF</span><span class="p">(</span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_back</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_back</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p class="translated">Ou use o projeto <a class="reference external" href="https://github.com/python/pythoncapi-compat">pythoncapi_compat</a> para obter essas duas funções em versões mais antigas do Python.</p>
</li>
<li><p class="translated">Mudanças nos membros da estrutura <a class="reference internal" href="../c-api/init.html#c.PyThreadState" title="PyThreadState"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyThreadState</span></code></a>:</p>
<ul class="simple">
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">frame</span></code>: removido, use <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetFrame" title="PyThreadState_GetFrame"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code></a> (função adicionada ao Python 3.9 por <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40429">bpo-40429</a>). Aviso: a função retorna um <a class="reference internal" href="../glossary.html#term-strong-reference"><span class="xref std std-term">referência forte</span></a>, precisa chamar <a class="reference internal" href="../c-api/refcounting.html#c.Py_XDECREF" title="Py_XDECREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_XDECREF()</span></code></a>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">tracing</span></code>: alterado, use <a class="reference internal" href="../c-api/init.html#c.PyThreadState_EnterTracing" title="PyThreadState_EnterTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_EnterTracing()</span></code></a> e <a class="reference internal" href="../c-api/init.html#c.PyThreadState_LeaveTracing" title="PyThreadState_LeaveTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_LeaveTracing()</span></code></a> (funções adicionadas ao Python 3.11 por <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43760">bpo-43760</a>).</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">recursion_depth</span></code>: removido, use <code class="docutils literal notranslate"><span class="pre">(tstate-&gt;recursion_limit</span> <span class="pre">-</span> <span class="pre">tstate-&gt;recursion_remaining)</span></code>.</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">stackcheck_counter</span></code>: removido.</p></li>
</ul>
<p class="translated">Código definindo <code class="docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code> no Python 3.8 e anteriores:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900B1</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">PyFrameObject</span><span class="o">*</span> <span class="n">PyThreadState_GetFrame</span><span class="p">(</span><span class="n">PyThreadState</span> <span class="o">*</span><span class="n">tstate</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_XINCREF</span><span class="p">(</span><span class="n">tstate</span><span class="o">-&gt;</span><span class="n">frame</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">frame</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p class="translated">Código definindo <code class="docutils literal notranslate"><span class="pre">PyThreadState_EnterTracing()</span></code> e <code class="docutils literal notranslate"><span class="pre">PyThreadState_LeaveTracing()</span></code> no Python 3.10 e anteriores:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030B00A2</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">PyThreadState_EnterTracing</span><span class="p">(</span><span class="n">PyThreadState</span> <span class="o">*</span><span class="n">tstate</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">tracing</span><span class="o">++</span><span class="p">;</span>
<span class="c1">#if PY_VERSION_HEX &gt;= 0x030A00A1</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">cframe</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">#else</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">#endif</span>
<span class="p">}</span>

<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">PyThreadState_LeaveTracing</span><span class="p">(</span><span class="n">PyThreadState</span> <span class="o">*</span><span class="n">tstate</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nb">int</span> <span class="n">use_tracing</span> <span class="o">=</span> <span class="p">(</span><span class="n">tstate</span><span class="o">-&gt;</span><span class="n">c_tracefunc</span> <span class="o">!=</span> <span class="n">NULL</span> <span class="o">||</span> <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">c_profilefunc</span> <span class="o">!=</span> <span class="n">NULL</span><span class="p">);</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">tracing</span><span class="o">--</span><span class="p">;</span>
<span class="c1">#if PY_VERSION_HEX &gt;= 0x030A00A1</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">cframe</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="n">use_tracing</span><span class="p">;</span>
<span class="c1">#else</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="n">use_tracing</span><span class="p">;</span>
<span class="c1">#endif</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p class="translated">Ou use <a class="reference external" href="https://github.com/python/pythoncapi-compat">o projeto pythoncapi-compat</a> para obter essas funções em funções antigas do Python.</p>
</li>
<li><p class="translated">Os distribuidores são encorajados a compilar o Python com a biblioteca Blake2 otimizada <a class="reference external" href="https://www.blake2.net/">libb2</a>.</p></li>
<li><p class="translated">O campo <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.module_search_paths_set" title="PyConfig.module_search_paths_set"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.module_search_paths_set</span></code></a> agora deve ser definido como 1 para inicialização para usar <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.module_search_paths" title="PyConfig.module_search_paths"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.module_search_paths</span></code></a> para inicializar <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>. Caso contrário, a inicialização recalculará o caminho e substituirá quaisquer valores adicionados a <code class="docutils literal notranslate"><span class="pre">module_search_paths</span></code>.</p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/init_config.html#c.PyConfig_Read" title="PyConfig_Read"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_Read()</span></code></a> não calcula mais o caminho de pesquisa inicial e não preencherá nenhum valor em <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.module_search_paths" title="PyConfig.module_search_paths"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.module_search_paths</span></code></a>. Para calcular caminhos padrão e modificá-los, termine a inicialização e use <a class="reference internal" href="../c-api/sys.html#c.PySys_GetObject" title="PySys_GetObject"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_GetObject()</span></code></a> para recuperar <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> como um objeto lista do Python e modifique-o diretamente.</p></li>
</ul>
</section>
<section id="whatsnew311-c-api-deprecated">
<span id="id7"></span><h3 class="translated">Descontinuados<a class="headerlink" href="#whatsnew311-c-api-deprecated" title="Link para este cabeçalho">¶</a></h3>
<ul>
<li><p class="translated">Descontinua as seguintes funções para configurar a inicialização do Python:</p>
<ul class="simple">
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_AddWarnOptionUnicode()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_AddWarnOption()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_AddXOption()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_HasWarnOptions()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgv()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetPath()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetPath()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetProgramName()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetPythonHome()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetStandardStreamEncoding()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">_Py_SetProgramFullPath()</span></code></p></li>
</ul>
<p class="translated">Em vez disso, use a nova API <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a> da <a class="reference internal" href="../c-api/init_config.html#init-config"><span class="std std-ref">Configuração de Inicialização do Python</span></a> (<span class="target" id="index-125"></span><a class="pep reference external" href="https://peps.python.org/pep-0587/"><strong>PEP 587</strong></a>). (Contribuição de Victor Stinner em <a class="reference external" href="https://github.com/python/cpython/issues/88279">gh-88279</a>.)</p>
</li>
<li><p class="translated">Descontinua o membro <code class="docutils literal notranslate"><span class="pre">ob_shash</span></code> do <a class="reference internal" href="../c-api/bytes.html#c.PyBytesObject" title="PyBytesObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyBytesObject</span></code></a>. Use <a class="reference internal" href="../c-api/object.html#c.PyObject_Hash" title="PyObject_Hash"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Hash()</span></code></a> em vez disso. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=46864">bpo-46864</a>.)</p></li>
</ul>
</section>
<section id="whatsnew311-c-api-pending-removal">
<span id="id8"></span><h3 class="translated">Pendente remoção no Python 3.12<a class="headerlink" href="#whatsnew311-c-api-pending-removal" title="Link para este cabeçalho">¶</a></h3>
<p class="translated">As seguintes APIs C foram descontinuadas em versões anteriores do Python e serão removidas no Python 3.12.</p>
<ul class="simple">
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AS_DATA()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AS_UNICODE()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicodeAndSize()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicode()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromUnicode()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GET_DATA_SIZE()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GET_SIZE()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GetSize()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_IS_COMPACT()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_IS_READY()</span></code></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_READY" title="PyUnicode_READY"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_READY()</span></code></a></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_WSTR_LENGTH()</span></code></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">_PyUnicode_AsUnicode()</span></code></p></li>
<li><p class="translated"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyUnicode_WCHAR_KIND</span></code></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/unicode.html#c.PyUnicodeObject" title="PyUnicodeObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyUnicodeObject</span></code></a></p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_InternImmortal()</span></code></p></li>
</ul>
</section>
<section id="whatsnew311-c-api-removed">
<span id="id9"></span><h3 class="translated">Removidos<a class="headerlink" href="#whatsnew311-c-api-removed" title="Link para este cabeçalho">¶</a></h3>
<ul>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_BlockSetup()</span></code> e <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_BlockPop()</span></code> foram removidas. (Contribuição de Mark Shannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40222">bpo-40222</a>.)</p></li>
<li><p class="translated">Remove as seguintes macros matemáticas usando a variável <code class="docutils literal notranslate"><span class="pre">errno</span></code>:</p>
<ul class="simple">
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">Py_ADJUST_ERANGE1()</span></code></p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">Py_ADJUST_ERANGE2()</span></code></p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">Py_OVERFLOWED()</span></code></p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">Py_SET_ERANGE_IF_OVERFLOW()</span></code></p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">Py_SET_ERRNO_ON_MATH_ERROR()</span></code></p></li>
</ul>
<p class="translated">(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45412">bpo-45412</a>.)</p>
</li>
<li><p class="translated">Remove as macros <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_COPY()</span></code> e <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_FILL()</span></code>, descontinuadas desde o Python 3.3. Use <code class="docutils literal notranslate"><span class="pre">PyUnicode_CopyCharacters()</span></code> ou <code class="docutils literal notranslate"><span class="pre">memcpy()</span></code> (string <code class="docutils literal notranslate"><span class="pre">wchar_t*</span></code>) e as funções <code class="docutils literal notranslate"><span class="pre">PyUnicode_Fill()</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41123">bpo-41123</a>.)</p></li>
<li><p class="translated">Remove o arquivo de cabeçalho <code class="docutils literal notranslate"><span class="pre">pystrhex.h</span></code>. Ele contém apenas funções privadas. As extensões C devem incluir apenas o arquivo principal <code class="docutils literal notranslate"><span class="pre">&lt;Python.h&gt;</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45434">bpo-45434</a>.)</p></li>
<li><p class="translated">Remove a macro <code class="docutils literal notranslate"><span class="pre">Py_FORCE_DOUBLE()</span></code>. Era usada pela macro <code class="docutils literal notranslate"><span class="pre">Py_IS_INFINITY()</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45440">bpo-45440</a>.)</p></li>
<li><p class="translated">Os seguintes itens não estão mais disponíveis quando <a class="reference internal" href="../c-api/stable.html#c.Py_LIMITED_API" title="Py_LIMITED_API"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code></a> é definida:</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_WriteLongToFile" title="PyMarshal_WriteLongToFile"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_WriteLongToFile()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_WriteObjectToFile" title="PyMarshal_WriteObjectToFile"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_WriteObjectToFile()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_ReadObjectFromString" title="PyMarshal_ReadObjectFromString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_ReadObjectFromString()</span></code></a></p></li>
<li><p class="translated"><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_WriteObjectToString" title="PyMarshal_WriteObjectToString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_WriteObjectToString()</span></code></a></p></li>
<li><p class="translated">a macro <code class="docutils literal notranslate"><span class="pre">Py_MARSHAL_VERSION</span></code></p></li>
</ul>
<p class="translated">Eles não fazem parte da <a class="reference internal" href="../c-api/stable.html#limited-api-list"><span class="std std-ref">API limitada</span></a>.</p>
<p class="translated">(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45474">bpo-45474</a>.)</p>
</li>
<li><p class="translated">Exclui <a class="reference internal" href="../c-api/weakref.html#c.PyWeakref_GET_OBJECT" title="PyWeakref_GET_OBJECT"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyWeakref_GET_OBJECT()</span></code></a> da API C limitada. Nunca funcionou porque a estrutura <code class="xref c c-type docutils literal notranslate"><span class="pre">PyWeakReference</span></code> é opaca na API C limitada. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35134">bpo-35134</a>.)</p></li>
<li><p class="translated">Remove a macro <code class="docutils literal notranslate"><span class="pre">PyHeapType_GET_MEMBERS()</span></code>. Estava exposta na API C pública por engano, deve ser usada apenas pelo Python internamente. Em vez disso, use o membro <code class="docutils literal notranslate"><span class="pre">PyTypeObject.tp_members</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40170">bpo-40170</a>.)</p></li>
<li><p class="translated">Remove a macro <code class="docutils literal notranslate"><span class="pre">HAVE_PY_SET_53BIT_PRECISION</span></code> (movida para a API C interna). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45412">bpo-45412</a>.)</p></li>
</ul>
<ul id="whatsnew311-pep624">
<li><p class="translated">Remove as APIs de codificação <a class="reference internal" href="../c-api/unicode.html#c.Py_UNICODE" title="Py_UNICODE"><code class="xref c c-type docutils literal notranslate"><span class="pre">Py_UNICODE</span></code></a>, pois foram descontinuadas desde o Python 3.3, são pouco usadas e ineficientes em relação às alternativas recomendadas.</p>
<p class="translated">As funções removidas são:</p>
<ul class="simple">
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_Encode()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeASCII()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeLatin1()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeUTF7()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeUTF8()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeUTF16()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeUTF32()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeUnicodeEscape()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeRawUnicodeEscape()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeCharmap()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_TranslateCharmap()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_EncodeDecimal()</span></code></p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">PyUnicode_TransformDecimalToASCII()</span></code></p></li>
</ul>
<p class="translated">Veja a <span class="target" id="index-126"></span><a class="pep reference external" href="https://peps.python.org/pep-0624/"><strong>PEP 624</strong></a> para detalhes e <span class="target" id="index-127"></span><a class="pep reference external" href="https://peps.python.org/pep-0624/#alternative-apis"><strong>orientação sobre migração</strong></a>. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44029">bpo-44029</a>.)</p>
</li>
</ul>
</section>
</section>
<section id="notable-changes-in-3-11-4">
<h2 class="translated">Alterações notáveis no 3.11.4<a class="headerlink" href="#notable-changes-in-3-11-4" title="Link para este cabeçalho">¶</a></h2>
<section id="tarfile">
<h3 class="translated">tarfile<a class="headerlink" href="#tarfile" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Os métodos de extração em <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> e <a class="reference internal" href="../library/shutil.html#shutil.unpack_archive" title="shutil.unpack_archive"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.unpack_archive()</span></code></a>, têm um novo argumento <em>filter</em> que permite limitar recursos do tar que podem ser surpreendentes ou perigosos, como criar arquivos fora do diretório de destino. Veja <a class="reference internal" href="../library/tarfile.html#tarfile-extraction-filter"><span class="std std-ref">Filtros de extração</span></a> para detalhes. No Python 3.12, usar sem o argumento <em>filter</em> mostrará um <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. No Python 3.14, o padrão mudará para <code class="docutils literal notranslate"><span class="pre">'data'</span></code>. (Contribuição de Petr Viktorin em <span class="target" id="index-128"></span><a class="pep reference external" href="https://peps.python.org/pep-0706/"><strong>PEP 706</strong></a>.)</p></li>
</ul>
</section>
</section>
<section id="notable-changes-in-3-11-5">
<h2 class="translated">Alterações notáveis no 3.11.5<a class="headerlink" href="#notable-changes-in-3-11-5" title="Link para este cabeçalho">¶</a></h2>
<section id="openssl">
<h3 class="translated">OpenSSL<a class="headerlink" href="#openssl" title="Link para este cabeçalho">¶</a></h3>
<ul class="simple">
<li><p class="translated">Construções do Windows e instaladores do macOS em python.org agora usam OpenSSL 3.0.</p></li>
</ul>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
    <ul>
<li><a class="reference internal" href="#">O que há de novo no Python 3.11</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumo – Destaques da versão</a></li>
<li><a class="reference internal" href="#new-features">Novas funcionalidades</a><ul>
<li><a class="reference internal" href="#pep-657-fine-grained-error-locations-in-tracebacks">PEP 657: Localizações de erros refinadas em tracebacks</a></li>
<li><a class="reference internal" href="#pep-654-exception-groups-and-except">PEP 654: Grupos de exceção e <code class="docutils literal notranslate"><span class="pre">except*</span></code></a></li>
<li><a class="reference internal" href="#pep-678-exceptions-can-be-enriched-with-notes">PEP 678: Exceções podem ser enriquecidas com notas</a></li>
<li><a class="reference internal" href="#windows-py-exe-launcher-improvements">Melhorias no inicializador <code class="docutils literal notranslate"><span class="pre">py.exe</span></code> do Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-features-related-to-type-hints">Novos recursos relacionados a dicas de tipo</a><ul>
<li><a class="reference internal" href="#pep-646-variadic-generics">PEP 646: Genéricos variádicos</a></li>
<li><a class="reference internal" href="#pep-655-marking-individual-typeddict-items-as-required-or-not-required">PEP 655: Marcando itens <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> individuais como obrigatórios ou não obrigatórios</a></li>
<li><a class="reference internal" href="#pep-673-self-type">PEP 673: Tipo <code class="docutils literal notranslate"><span class="pre">Self</span></code></a></li>
<li><a class="reference internal" href="#pep-675-arbitrary-literal-string-type">PEP 675: Tipo de string literal arbitrário</a></li>
<li><a class="reference internal" href="#pep-681-data-class-transforms">PEP 681: Transformações de classe de dados</a></li>
<li><a class="reference internal" href="#pep-563-may-not-be-the-future">PEP 563 pode não ser o futuro</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Outras mudanças na linguagem</a></li>
<li><a class="reference internal" href="#other-cpython-implementation-changes">Outras mudanças na implementação do CPython</a></li>
<li><a class="reference internal" href="#new-modules">Novos módulos</a></li>
<li><a class="reference internal" href="#improved-modules">Módulos melhorados</a><ul>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#contextlib">contextlib</a></li>
<li><a class="reference internal" href="#dataclasses">dataclasses</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#enum">enum</a></li>
<li><a class="reference internal" href="#fcntl">fcntl</a></li>
<li><a class="reference internal" href="#fractions">fractions</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#gzip">gzip</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#whatsnew311-idle">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#locale">locale</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#operator">operador</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#re">re</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#sqlite3">sqlite3</a></li>
<li><a class="reference internal" href="#string">string</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#sysconfig">sysconfig</a></li>
<li><a class="reference internal" href="#tempfile">tempfile</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#tkinter">tkinter</a></li>
<li><a class="reference internal" href="#traceback">traceback</a></li>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#warnings">avisos</a></li>
<li><a class="reference internal" href="#zipfile">zipfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Otimizações</a></li>
<li><a class="reference internal" href="#faster-cpython">CPython mais rápido</a><ul>
<li><a class="reference internal" href="#faster-startup">Inicialização mais rápida</a><ul>
<li><a class="reference internal" href="#frozen-imports-static-code-objects">Importações congeladas/objetos de código estático</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faster-runtime">Tempo de execução mais rápido</a><ul>
<li><a class="reference internal" href="#cheaper-lazy-python-frames">Quadros Python menos custosos e mais preguiçosos</a></li>
<li><a class="reference internal" href="#inlined-python-function-calls">Chamadas de função Python em linha</a></li>
<li><a class="reference internal" href="#pep-659-specializing-adaptive-interpreter">PEP 659: Interpretador adaptativo especializado</a></li>
</ul>
</li>
<li><a class="reference internal" href="#misc">Diversos</a></li>
<li><a class="reference internal" href="#faq">FAQ</a><ul>
<li><a class="reference internal" href="#how-should-i-write-my-code-to-utilize-these-speedups">Como devo escrever meu código para utilizar esses aceleradores?</a></li>
<li><a class="reference internal" href="#will-cpython-3-11-use-more-memory">O CPython 3.11 usará mais memória?</a></li>
<li><a class="reference internal" href="#i-don-t-see-any-speedups-in-my-workload-why">Não vejo nenhuma aceleração em minha carga de trabalho. Por que?</a></li>
<li><a class="reference internal" href="#is-there-a-jit-compiler">Existe um compilador JIT?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#about">Sobre</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Alterações de bytecode do CPython</a><ul>
<li><a class="reference internal" href="#new-opcodes">Novos opcodes</a></li>
<li><a class="reference internal" href="#replaced-opcodes">Opcodes substituídos</a></li>
<li><a class="reference internal" href="#changed-removed-opcodes">Opcodes alterados/removidos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deprecated">Descontinuados</a><ul>
<li><a class="reference internal" href="#language-builtins">Linguagem/Embutidos</a></li>
<li><a class="reference internal" href="#modules">Módulos</a></li>
<li><a class="reference internal" href="#standard-library">Biblioteca Padrão</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pending-removal-in-python-3-12">Pendente remoção no Python 3.12</a></li>
<li><a class="reference internal" href="#removed">Removidos</a></li>
<li><a class="reference internal" href="#porting-to-python-3-11">Portando para Python 3.11</a></li>
<li><a class="reference internal" href="#build-changes">Mudanças na construção</a></li>
<li><a class="reference internal" href="#c-api-changes">Alterações na API C</a><ul>
<li><a class="reference internal" href="#whatsnew311-c-api-new-features">Novas funcionalidades</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-porting">Portando para Python 3.11</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-deprecated">Descontinuados</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-pending-removal">Pendente remoção no Python 3.12</a></li>
<li><a class="reference internal" href="#whatsnew311-c-api-removed">Removidos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-3-11-4">Alterações notáveis no 3.11.4</a><ul>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-3-11-5">Alterações notáveis no 3.11.5</a><ul>
<li><a class="reference internal" href="#openssl">OpenSSL</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tópico anterior</h4>
    <p class="topless"><a href="3.12.html"
                          title="capítulo anterior">O que há de novo no Python 3.12</a></p>
  </div>
  <div>
    <h4>Próximo tópico</h4>
    <p class="topless"><a href="3.10.html"
                          title="próximo capítulo">O que há de novo no Python 3.10</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.11.rst?plain=1"
            rel="nofollow">Mostrar o código-fonte
        </a>
      </li>
    </ul>
  </div>
        </div>
<div id="sidebarbutton" title="Recolher painel lateral">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice Geral"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="O que há de novo no Python 3.10"
             >próximo</a> |</li>
        <li class="right" >
          <a href="3.12.html" title="O que há de novo no Python 3.12"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.13.5 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >O que há de novo no Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">O que há de novo no Python 3.11</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="search" name="q" id="search-box">
          <input type="submit" value="Ir">
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; 
      <a href="../copyright.html">
    
    Direitos autorais
    
      </a>
     2001-2025, Python Software Foundation.
    <br>
    This page is licensed under the Python Software Foundation License Version 2.
    <br>
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br>
    
      See <a href="/license.html">History and License</a> for more information.<br>
    
    
    <br>

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br>
    <br>
      Última atualização em ago. 03, 2025 (07:16 UTC).
    
      <a href="/bugs.html">Found a bug</a>?
    
    <br>

    Criada usando <a href="https://www.sphinx-doc.org/pt_BR/master">Sphinx</a> 8.2.3.
    </div>

  </body>
</html>